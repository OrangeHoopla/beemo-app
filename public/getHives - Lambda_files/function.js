(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{105:function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=r},121:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==r(n))throw new TypeError(n+"must be non-object");for(var i in n)a(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},s={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},130:function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(448).Readable}catch(e){t.nodestream=!1}}).call(this,n(131).Buffer)},132:function(e,t,n){"use strict";var r=n(229),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var a=Object.create(n(189));a.inherits=n(162);var o=n(449),s=n(312);a.inherits(d,o);for(var c=i(s.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},162:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},1677:function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(429),c=n(167),l=n(440),u=n(675),d=n(1666),f=n(1657),p=n(1653),m=n(1652),h=n(70);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=e.id,n=e.children,r=e.counter,a=e.editPage,o=e.error,u=e.loading,d=e.refresh,f=e.primaryButton,p=e.actionsButton,g=e.otherButtons,b=e.refreshing,v=e.showInfoLink,y=e.description,E=e.noGutters,O=e.readonly,w=e.navigateToEdit,j=e.helpMsgIdOverride,S="functionDetail.sections.".concat(t,".title"),k="designer.pane.".concat(j||t,".title.helpContent"),_="functionDetail.sections.".concat(t,".edit");O&&(S="functionDetail.sections.".concat(t,".title.readonly"),k="designer.pane.".concat(j||t,".title.helpContent.readonly"));var C=null;a&&!O&&(C=i.a.createElement(s.Button,{className:"edit-button",disabled:!!b,onClick:w,"data-analytics":h.WorkflowTags.edit},i.a.createElement(c.a,{id:_})));var T=null;d&&(T=i.a.createElement(s.Button,{className:"refresh-button",icon:"refresh",loading:!!b,onClick:d,"data-analytics":h.WorkflowTags.refresh}));var P=i.a.createElement(c.a,{id:"preview",values:{name:i.a.createElement(c.a,{id:"functionURL"})}}),x=i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{header:"url"===t?P:i.a.createElement(l.a,{id:S}),info:v?k:null,counter:r},!o&&i.a.createElement(i.a.Fragment,null,T,null!=g?g:null,C,null!=p?p:null,null!=f?f:null)),y&&i.a.createElement("div",{className:"awsui-util-container-header-description awsui-util-mt-xs"},y));return i.a.createElement("div",{className:"function-node-section"},i.a.createElement(m.c,{id:"".concat(t,"Section"),header:x,noGutters:E,loading:u,error:o},n))}y.propTypes={id:o.a.string.isRequired,children:o.a.oneOfType([o.a.node,o.a.arrayOf(o.a.node)]).isRequired,counter:o.a.node,editPage:o.a.string,error:o.a.instanceOf(Error),loading:o.a.bool,showInfoLink:o.a.bool,description:o.a.node,noGutters:o.a.bool,readonly:o.a.bool,refreshing:o.a.bool,primaryButton:o.a.node,actionsButton:o.a.element,otherButtons:o.a.array,helpMsgIdOverride:o.a.string,navigateToEdit:o.a.func.isRequired,refresh:o.a.func};t.a=Object(u.connect)((function(e){return{functionName:Object(p.B)(e),qualifier:Object(p.U)(e)}}),(function(e,t){return{navigateToEdit:function(n,r){e(Object(f.L)(!0)),e(Object(d.f)(n,r,t.editPage))}}}),(function(e,t,n){return b(b(b(b({},n),e),t),{},{navigateToEdit:function(){return t.navigateToEdit(e.functionName,e.qualifier)}})}))(y)},1793:function(e,t,n){var r=n(1);function i(e){return r.createElement("svg",e,r.createElement("g",{transform:"scale(.8)"},[r.createElement("defs",{key:0},r.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"0%",id:"a"},[r.createElement("stop",{stopColor:"#B0084D",offset:"0%",key:0}),r.createElement("stop",{stopColor:"#FF4F8B",offset:"100%",key:1})])),r.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[r.createElement("path",{d:"M0 0h80v80H0z",fill:"url(#a)",key:0}),r.createElement("path",{d:"M45 44h21v-7H45v7zm22-9H44a1 1 0 00-1 1v9a1 1 0 001 1h23a1 1 0 001-1v-9a1 1 0 00-1-1zM43.5 62.5c0 1.93-1.57 3.5-3.5 3.5s-3.5-1.57-3.5-3.5S38.07 59 40 59s3.5 1.57 3.5 3.5zM14 47h18v-4H14v4zm0-10h18v-4H14v4zm22.5-19.5c0-1.93 1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5S41.93 21 40 21s-3.5-1.57-3.5-3.5zM56 53H24v-4h9a1 1 0 001-1v-6a1 1 0 00-1-1h-9v-2h9a1 1 0 001-1v-6a1 1 0 00-1-1h-9v-3h32v4h2v-5a1 1 0 00-1-1H41v-3.096c2.556-.472 4.5-2.713 4.5-5.404 0-3.033-2.468-5.5-5.5-5.5a5.506 5.506 0 00-5.5 5.5c0 2.691 1.944 4.932 4.5 5.404V26H23a1 1 0 00-1 1v4h-9a1 1 0 00-1 1v6a1 1 0 001 1h9v2h-9a1 1 0 00-1 1v6a1 1 0 001 1h9v5a1 1 0 001 1h16v2.096c-2.556.472-4.5 2.713-4.5 5.404 0 3.033 2.468 5.5 5.5 5.5s5.5-2.467 5.5-5.5c0-2.691-1.944-4.932-4.5-5.404V55h16a1 1 0 001-1v-4.973h-2V53z",fill:"#FFF",key:1})])]))}i.defaultProps={viewBox:"0 0 64 64"},e.exports=i,i.default=i},1794:function(e,t,n){"use strict";var r=n(1);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(r.useState)(e),n=i(t,2),a=n[0],o=n[1],s=function(e){var t,n;o(null!==(t=null==e||null===(n=e.detail)||void 0===n?void 0:n.filteringText)&&void 0!==t?t:"")},c=function(){o(e)};return{filteringText:a,onFilteringChange:s,resetFilteringText:c,setFilteringText:o}}},1856:function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(677),o=n.n(a),s=n(33),c=n.n(s),l=n(429),u=n(167),d=n(675),f=n(1722),p=n(1681),m=n(69),h=n(24),g=n(1676),b=n(1793),v=n.n(b),y=n(1662),E=n(70),O=n(1649),w=n(1663);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=Object(d.connect)(null,{toggleSidebar:g.q})((function(e){return i.a.createElement("a",{onClick:function(){return e.toggleSidebar(!0)},href:"#/stepfunctions/statemachine/".concat(e.item.get("name")),"data-analytics":E.WorkflowTags.details},e.item.get("name"))})),N=[{id:"stateMachineName",header:function(){return i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.name"})},cell:function(e){return i.a.createElement(R,{item:e})}},{id:"stateMachineType",header:function(){return i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.type"})},cell:function(e){return"STANDARD"===e.get("type")?"Standard":"Express"}},{id:"stateMachineCreated",header:function(){return i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.created"})},cell:function(e){return i.a.createElement(p.a,{value:e.get("creationDate")})}}],I=[{id:"stateMachineName",comparator:function(e,t){var n=t.get("name"),r=e.get("name");return r<n?-1:r>n?1:0}},{id:"stateMachineType",comparator:function(e,t){var n=t.get("type"),r=e.get("type");return r<n?-1:r>n?1:0}},{id:"stateMachineCreated",comparator:function(e,t){return t.get("creationDate")-e.get("creationDate")}}],D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,e);var t,n,r,a=_(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),x(T(n=a.call(this,e,t)),"filteringFunction",(function(e,t){return E.panorama.logWorkflowEvent({tagPath:n.props.nextTag(E.WorkflowTags.search),eventDetail:t}),-1!==e.get("type").toUpperCase().indexOf(t.toUpperCase())||-1!==e.get("name").toUpperCase().indexOf(t.toUpperCase())})),n.state={},n}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.sfnLoading,n=e.tag,r=e.qualifiedFunctionName,a=this.props.stateMachines.toArray(),o="/states/home?region=".concat(Object(h.N)(),"#/statemachines/create");r&&(o+="?lambdaName=".concat(r));var s=i.a.createElement("div",{className:"awsui-grid"},i.a.createElement("div",{className:"awsui-row"},i.a.createElement("div",{className:"col-7"},i.a.createElement("div",{className:"sfn-header-container awsui-util-mt-s"},i.a.createElement(v.a,{className:"sfn-header-container__sfn-icon"}),i.a.createElement("span",{className:"awsui-util-pl-s"},i.a.createElement("h2",null,i.a.createElement("div",null,i.a.createElement(u.a,{tagName:"span",id:"stepfunctions.statemachinestable.header.title"})," ",t?null:i.a.createElement("span",{className:"awsui-util-header-counter"},"(",a.length,")"),i.a.createElement("span",{"data-analytics":E.WorkflowTags.info},i.a.createElement(y.a,{path:r?"designer.pane.stepFunctions.table.helpContent":"stepFunctions.helpContent"}))),i.a.createElement("div",{className:"sfn-header-container-description"},i.a.createElement(u.a,{id:r?"stepfunctions.lambdadetail.statemachinestable.header.desc":"stepfunctions.statemachinestable.header.desc"})))))),i.a.createElement("div",{className:"col-5 awsui-util-t-r"},i.a.createElement(l.Button,{icon:"refresh",loading:t,onClick:this.props.refresh}),i.a.createElement(l.Button,{icon:"external",href:o,target:"_blank",iconAlign:"right","data-analytics":E.WorkflowTags.create},i.a.createElement(u.a,{id:"stepfunctions.linktosfnconsole.title"}))))),c=i.a.createElement("div",{className:"awsui-util-t-c awsui-util-mv-m"},i.a.createElement("div",null,i.a.createElement("strong",null,i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.empty.line1"}))),i.a.createElement("div",{className:"awsui-util-mt-m"},i.a.createElement(u.a,{id:r?"stepfunctions.lambdadetail.statemachinestable.empty.line2":"stepfunctions.statemachinestable.empty.line2"})," ",r?i.a.createElement("div",{className:"awsui-util-mt-m"},i.a.createElement(l.Button,{icon:"external",href:o,target:"_blank",iconAlign:"right","data-analytics":E.WorkflowTags.create},i.a.createElement(u.a,{id:"stepfunctions.linktosfnconsole.title"}))):i.a.createElement(w.d,{href:"/states/home?region=".concat(Object(h.N)(),"#/sampleProjects?helloLambda"),tag:E.WorkflowTags.getStarted},i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.empty.getStarted"})))),d=i.a.createElement(u.a,{id:"stepfunctions.statemachinestable.loading"}),f=t?d:c;return i.a.createElement(l.Table,{columnDefinitions:N,empty:f,items:a,header:s,features:["filtering","pagination","sorting"],"data-analytics":n},i.a.createElement(l.TableFiltering,{filteringFunction:this.filteringFunction,filteringPlaceholder:m.intl.formatMessage({id:"stepfunctions.statemachinestable.placeholderSearch"})}),i.a.createElement(l.TablePagination,null),i.a.createElement(l.TableSorting,{sortableColumns:I}))}}])&&S(t.prototype,n),r&&S(t,r),o}(i.a.Component);x(D,"propTypes",{stateMachines:o.a.map.isRequired,sfnLoading:c.a.bool.isRequired,refresh:c.a.func.isRequired,qualifiedFunctionName:c.a.string,nextTag:c.a.func.isRequired,tag:c.a.string});t.a=Object(O.tagContextHoc)(Object(d.connect)((function(e,t){var n=Object(f.g)(e);return null!=t&&t.qualifiedFunctionName&&(n=n.filter((function(e){var n;return null===(n=e.get("lambdaStates"))||void 0===n?void 0:n.includes(t.qualifiedFunctionName)}))),{stateMachines:n,sfnLoading:Object(f.e)(e)}}),(function(e,t){var n=t.nextTag;return{refresh:function(){return e(Object(f.l)(n))}}}))(D))},189:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"===r(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===i(e)},t.isObject=function(e){return"object"===r(e)&&null!==e},t.isDate=function(e){return"[object Date]"===i(e)},t.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===r(e)||void 0===e},t.isBuffer=n(131).Buffer.isBuffer},1953:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(161),i=n(1),a=n.n(i),o=n(435),s=n(1829),c=n(2640),l=n(433),u=n(434);function d(e){var t=e.gridDefinition,n=void 0===t?[]:t,i=e.disableGutters,l=void 0!==i&&i,d=e.children,f=Object(r.b)(e,["gridDefinition","disableGutters","children"]),p=Object(u.a)("Grid"),m=Object(o.a)(f),h=Object(c.a)(),g=h[0],b=h[1];return a.a.createElement(s.a,Object(r.a)({},m,p,{ref:b,__breakpoint:g,gridDefinition:n,disableGutters:l}),d)}Object(l.a)(d,"Grid")},1955:function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(429),c=n(677),l=n.n(c),u=n(167),d=n(440),f=n(675),p=n(1686),m=n(1653),h=n(1652),g=n(301),b=n(24),v=n(1668),y=function(t){var n=t.id,r=t.value,a=void 0===r?"":r,o=e.innerWidth/10,c=Math.min(10,a.split(/\r\n|\r|\n/).map((function(e){return Math.ceil((e.length+1)/o)})).reduce((function(e,t){return e+t})));return i.a.createElement(s.Textarea,{id:n,className:"awsui-util-mv-xs",readonly:!0,value:a,rows:c})};function E(e){var t,n=e.functionName,r=e.invoking,a=e.error,o=e.invokeFailureMessage,s=e.isStream;if(r)t=i.a.createElement(u.a,{id:"executionResults.pending.title"});else if(o)t=i.a.createElement(u.a,{id:"executionResults.invokeFailureMessage.title",values:{message:o}});else{var c=i.a.createElement("a",{href:"/cloudwatch/home?region=".concat(Object(b.N)(),"#logStream:group=%252Faws%252Flambda%252F").concat(encodeURIComponent(n)),target:"_blank",rel:"noopener noreferrer"},i.a.createElement(u.a,{id:"executionResults.logs.subtextLink"}));t=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,i.a.createElement(u.a,{id:"executionResults.".concat(a?"failed":"succeeded",".title")}),i.a.createElement("span",{className:"awsui-util-ml-xs"},i.a.createElement(u.a,{id:"wrapper",values:{value:c}}))),Object(b.U)("creek")&&s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(d.a,{id:"stream.response.payload",tagName:"p"})))}return i.a.createElement("h3",null,t)}function O(e){var t=e.results,n=e.codeSha256,r=["execId","duration","billed","size"],a=t.get("used");return t.get("initDuration")&&r.splice(1,0,"initDuration"),i.a.createElement("div",{className:"results-summary awsui-util-mv-s"},i.a.createElement("h3",{className:"awsui-util-mb-s"},i.a.createElement(u.a,{id:"executionResults.summary.title"})),i.a.createElement(s.ColumnLayout,{columns:2,borders:"vertical"},i.a.createElement("div",{"data-awsui-column-layout-root":!0},i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},i.a.createElement(u.a,{id:"config.codeSha256.label"})),i.a.createElement("div",null,n)),r.map((function(e){return i.a.createElement("div",{key:e},i.a.createElement("div",{className:"awsui-util-label"},i.a.createElement(u.a,{id:"executionResults.summary.".concat(e)})),i.a.createElement("div",null,t.get(e)))})),i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},i.a.createElement(u.a,{id:"executionResults.summary.used"})),i.a.createElement("div",null,a&&a===t.get("size")?i.a.createElement(h.i,{status:"warning"},a):a)))))}function w(e){var t=e.functionName,n=e.logs,r=i.a.createElement("a",{href:"/cloudwatch/home?region=".concat(Object(b.N)(),"#logStream:group=%252Faws%252Flambda%252F").concat(encodeURIComponent(t)),target:"_blank",rel:"noopener noreferrer"},i.a.createElement(u.a,{id:"executionResults.logs.cloudwatchLink"}));return i.a.createElement("div",null,i.a.createElement(u.a,{tagName:"h3",id:"executionResults.logs.title"}),i.a.createElement(u.a,{id:"executionResults.logs.cloudwatchWrapper",values:{link:r}}),i.a.createElement(y,{id:"execution-logs",value:n}))}function j(e){var t=e.isStream,n=e.results,r=e.className,a=e.codeSha256,o=e.showExecutionResults,c=e.invoking,l=e.runtime,f=e.functionName,p=e.dismissExecutionResults,m=e.invokeFailureMessage;return i.a.createElement(g.a,{overlay:!0,className:"execution-results ".concat(r),cond:c},i.a.createElement(s.Alert,{type:n.get("error")||m?"error":"success",visible:o,dismissible:!0,onDismiss:p},i.a.createElement(E,{functionName:f,invoking:c,error:n.get("error"),invokeFailureMessage:m,isStream:t}),m?null:i.a.createElement(s.ExpandableSection,{header:i.a.createElement(u.a,{id:"details"})},i.a.createElement(d.a,{id:"executionResults.runtime.text.html",values:{docPage:Object(v.i)("programmingModel",l)}}),i.a.createElement(y,{id:"execution-result",value:n.get("message")}),i.a.createElement(O,{results:n,codeSha256:a}),i.a.createElement(w,{functionName:f,logs:n.get("logs")}))))}y.propTypes={id:o.a.string,value:o.a.string},E.propTypes={functionName:o.a.string,invoking:o.a.bool.isRequired,error:o.a.bool.isRequired,invokeFailureMessage:o.a.string,isStream:o.a.bool},O.propTypes={results:l.a.map.isRequired,codeSha256:o.a.string},w.propTypes={functionName:o.a.string,logs:o.a.string.isRequired},j.propTypes={isStream:o.a.bool,results:l.a.map.isRequired,className:o.a.string,codeSha256:o.a.string,invoking:o.a.bool.isRequired,showExecutionResults:o.a.bool.isRequired,runtime:o.a.string.isRequired,functionName:o.a.string,dismissExecutionResults:o.a.func.isRequired,invokeFailureMessage:o.a.string};t.a=Object(f.connect)((function(e){return{results:p.i.getExecutionResults(e),codeSha256:Object(m.s)(e),invoking:p.i.getIsInvoking(e),isStream:p.i.getIsStream(e),showExecutionResults:p.i.getShowExecutionResults(e),functionName:Object(m.B)(e),runtime:Object(m.E)(e)||v.a,invokeFailureMessage:p.i.getInvokeFailureMessage(e)}}),(function(e){return{dismissExecutionResults:function(){return e(p.g.dismissExecutionResults())}}}))(j)}).call(this,n(14))},1956:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n(1),i=n.n(r),a=n(675),o=n(429),s=n(167),c=n(440),l=n(1677),u=n(1652),d=n(2648),f=n(2643),p=n(2647),m=n(69),h=n(1653),g=n(1654),b=n(1660),v=n(1659),y=n(1938),E=n(1666),O=n(1663),w=n(24),j=n(1681),S=n(1706),k=["result"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var x=function(){var e,t=!(null===(e=Object(a.useSelector)((function(e){return Object(h.gb)(e,"functionUrlSource")})))||void 0===e||!e.get("functionUrl")),n=Object(E.j)("function-url").goToEdit,r=t?"edit":"functionDetail.sections.url.button.addUrl";return i.a.createElement(o.Button,{onClick:n},i.a.createElement(s.a,{id:r}))},R=function(){var e=Object(a.useSelector)(h.q),t=Object(a.useDispatch)(),n=Object(v.a)(t);return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.Button,{onClick:function(){return n(y.a)}},m.intl.formatMessage({id:"delete"})),i.a.createElement(y.b,{functionArn:e}))},N=u.f.itemBuilder((function(e){return m.intl.formatMessage({id:"functionDetail.sections.url.".concat(e,".label")})})),I=function(e){var t=e.active,n=void 0!==t&&t;return i.a.createElement(d.a,{type:n?"success":"stopped"},m.intl.formatMessage({id:"functionDetail.sections.url.isCorsEnabled.".concat(n?"enabled":"disabled")}))},D=function(e){var t=e.href;return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{text:" ",value:t}),i.a.createElement(O.d,{href:t},t))},A=function(e){return"string"==typeof e&&e.endsWith("E9")?new Date(1e3*+e).toISOString():e};t.b=Object(g.E)(["urlParser","functionUrlSource"])(Object(a.connect)((function(e,t){var n,r=Object(h.nb)(e,"functionUrlSource"),i=r.result,a=P(r,k);return C(C({qualifierType:Object(w.L)(Object(h.U)(e)),result:null!==(n=null==i?void 0:i.toJS())&&void 0!==n?n:{},functionName:Object(h.B)(e)},a),t)}),null)((function(e){var t=e.error,n=e.loading,r=e.result,a=e.qualifierType,o=e.functionName,s=Object(E.j)("function-url").goToEdit,d=a===b.H.VERSION,h=!(null==r||!r.functionUrl),g=function(){var e,t;if(d)return i.a.createElement(f.a,{type:"info"},i.a.createElement(c.a,{id:"functionDetail.sections.url.alert.notAllowed.description",values:{functionName:o}}));if(!h)return i.a.createElement(u.d,{id:"functionDetail.sections.url.empty",onClick:s});var n=r.functionUrl,a=r.lastModifiedTime,l=r.authorizationType,g=r.cors,b=r.functionUrlArn,v=r.creationTime,y=r.isCorsEnabled,E=[N("functionUrl",i.a.createElement(D,{href:n})),N("authorizationType",m.intl.formatMessage({id:"editFunctionUrl.formfield.authorizationType.".concat(l,".label")})),N("creationTime",i.a.createElement(j.a,{value:A(v)})),N("functionUrlArn",i.a.createElement(S.a,{value:b})),N("isCorsEnabled",i.a.createElement(I,{active:y})),N("lastModified",i.a.createElement(j.a,{value:A(a)}))],O=[N("accessControlAllowOrigin",null==g?void 0:g.allowOrigins.join(", ")),N("accessControlExposeHeaders",null==g?void 0:g.exposeHeaders.join(", ")),N("accessControlAllowHeaders",null==g?void 0:g.allowHeaders.join(", ")),N("accessControlAllowMethods",null==g?void 0:g.allowMethods.join(", ")),N("accessControlMaxAge",null==g||null===(e=g.maxAge)||void 0===e?void 0:e.toString()),N("accessControlAllowCredentials",null==g||null===(t=g.allowCredentials)||void 0===t?void 0:t.toString())],w=i.a.createElement(i.a.Fragment,null,i.a.createElement("h5",null,m.intl.formatMessage({id:"functionDetail.sections.url.corsSettings.label"})),i.a.createElement(u.f,{flat:!0,items:O,columns:3}));return i.a.createElement(p.a,{size:"s"},i.a.createElement(u.f,{flat:!0,items:E,columns:3}),y?w:"")}(),v=n||d?[]:h?[i.a.createElement(R,{key:"delete"}),i.a.createElement(x,{key:"modify"})]:[i.a.createElement(x,{key:"modify"})];return i.a.createElement(l.a,{id:"url",showInfoLink:!0,loading:n,error:t,otherButtons:v},g)})))},1957:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return O}));var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(675),c=n(429),l=n(167),u=n(1717),d=n(1689),f=n(1657),p=n(1653),m=n(1654),h=n(1685);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return i.a.createElement(d.a,{id:"editGroup",actionsProvider:function(e,t,n){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(c.Button,{variant:"link",onClick:t},i.a.createElement(l.a,{id:"cancel"})),i.a.createElement(c.Button,{variant:"primary",loading:e,onClick:n},i.a.createElement(l.a,{id:"save"})))},modalProps:{expandToFit:!0,header:i.a.createElement(l.a,{id:"group.modal.header"})},formProps:{onSubmit:e.saveGroup}},i.a.createElement(u.FormField,{id:"group",fieldTextProps:["label","description"],childTextProps:["placeholder"],secondaryControl:i.a.createElement(c.Button,{disabled:!e.selectedGroup,onClick:e.removeGroup},i.a.createElement(l.a,{id:"remove"}))},i.a.createElement(c.Autosuggest,{options:e.groups,empty:i.a.createElement(l.a,{id:"group.form.autosuggest.empty",values:{suggestion:e.selectedGroup}})})))}y.propTypes={functionName:o.a.string.isRequired,groups:o.a.array.isRequired,selectedGroup:o.a.string,removeGroup:o.a.func.isRequired,saveGroup:o.a.func.isRequired};var E=Object(s.connect)((function(e){return{functionName:Object(h.n)(e),groups:Object(h.h)(e).toArray().map((function(e){return{value:e}})),selectedGroup:Object(u.getFieldValue)(e,"editGroup","group")}}),(function(e){return{removeGroup:function(){return e(Object(u.setFieldValue)("editGroup","group",null))},saveGroup:function(t,n){return e(Object(h.a)(t,n))}}}),(function(e,t,n){return b(b(b(b({},n),e),t),{},{saveGroup:function(n){var r=n.group;return t.saveGroup(r,e.functionName)}})}))(y),O=Object(s.connect)((function(e){return{groups:Object(p.w)(e),selectedGroup:Object(u.getFieldValue)(e,"editGroup","group")}}),(function(e,t){return{removeGroup:function(){return e(Object(u.setFieldValue)("editGroup","group",null))},saveGroup:function(n){var r=n.group;return e(Object(f.r)(t.functionName,r))}}}))(Object(m.E)(["functionGroupParser"])(y))},2039:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(33),i=n.n(r),a=n(1),o=n.n(a),s=n(87),c=n(429),l=n(677),u=n.n(l),d=n(167),f=n(675),p=n(1677),m=n(1657),h=n(1666),g=n(1653),b=n(1654),v=n(161),y=n(435),E=n(227),O=(n(2126),{badge:"awsui_badge_1yjyg_1gkjh_3","badge-color-grey":"awsui_badge-color-grey_1yjyg_1gkjh_20","badge-color-green":"awsui_badge-color-green_1yjyg_1gkjh_23","badge-color-blue":"awsui_badge-color-blue_1yjyg_1gkjh_26","badge-color-red":"awsui_badge-color-red_1yjyg_1gkjh_29"}),w=n(433),j=n(434);function S(e){var t=e.color,n=void 0===t?"grey":t,r=e.children,i=Object(v.b)(e,["color","children"]),a=Object(j.a)("Badge").__internalRootRef,s=Object(y.a)(i),c=Object(E.a)(s.className,O.badge,O["badge-color-"+n]);return o.a.createElement("span",Object(v.a)({},s,{className:c},{ref:a}),r)}Object(w.a)(S,"Badge");var k=n(1652),_=n(55),C=n(301);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){return{functionName:Object(g.B)(e),qualifiers:Object(g.V)(e)||Object(s.Map)(),provisionedConcurrencyConfigs:Object(g.W)(e,"provisionedConcurrencyConfigsParser")||Object(s.Map)(),refreshing:_.d.includes("hyperion")&&!Object(g.T)(e)}},N=function(e,t){return{openCreateAlias:function(n){e(Object(m.L)(!0)),e(Object(h.f)(n,t.qualifier,"alias",null,!0))},refresh:function(){return e(Object(m.z)(["functionQualifiersSource","provisionedConcurrencyConfigsSource","provisionedConcurrencyConfigsParser"]))}}};function I(e){var t=e.functionName,n=e.version,r=e.weight,i=e.hasAdditionalVersion,a=e.isInProgress,s=o.a.createElement("a",{href:Object(h.a)(t,n)},n);if(!i)return Object(b.r)(n)?n:s;var c=a?o.a.createElement(k.i,{status:"in-progress"}):o.a.createElement(d.a,{id:"functionDetail.aliasConfig.versionWeight",values:{percentage:r}});return o.a.createElement(d.a,{id:"titleSeparator",values:{key:s,value:c}})}function D(e){var t=e.alias,n=e.columns,r=e.error,i=e.functionName,a=e.id,s=e.loading,c=e.provisionedConcurrencyConfigs,l=e.refresh,u=e.refreshing,f=e.skipAliasName,m=null;if(t){var h,g,b,v,y="IN_PROGRESS"===(null===(h=c.get("aliases"))||void 0===h||null===(g=h.find((function(e){return e.get("qualifier")===t})))||void 0===g?void 0:g.get("status")),E=!(null===(b=t.additionalVersionWeight)||void 0===b||!b.version),O=[];f||O.push({key:o.a.createElement(d.a,{id:"functionDetail.aliasConfig.name.label"}),value:t.name}),O.push({key:o.a.createElement(d.a,{id:"functionDetail.aliasConfig.description.label"}),value:t.description||"-"},{key:o.a.createElement(d.a,{id:"functionDetail.aliasConfig.version.label"}),value:o.a.createElement(I,{functionName:i,version:t.version,weight:100-((null===(v=t.additionalVersionWeight)||void 0===v?void 0:v.weight)||0),hasAdditionalVersion:E,isInProgress:y})}),E&&O.push({key:o.a.createElement(d.a,{id:"functionDetail.aliasConfig.additionalVersion.label"}),value:o.a.createElement(I,{functionName:i,version:t.additionalVersionWeight.version,weight:t.additionalVersionWeight.weight,hasAdditionalVersion:E,isInProgress:y})}),m=o.a.createElement(k.f,{flat:!0,columns:null!=n?n:2,items:O})}return o.a.createElement(p.a,{id:null!=a?a:"alias",loading:s,error:r,editPage:"alias",refresh:l,refreshing:u},m)}I.propTypes={functionName:i.a.string.isRequired,version:i.a.string.isRequired,weight:i.a.number.isRequired,hasAdditionalVersion:i.a.bool.isRequired,isInProgress:i.a.bool.isRequired},D.propTypes={alias:i.a.object,columns:i.a.number,id:i.a.string,skipAliasName:i.a.bool,error:i.a.instanceOf(Error),loading:i.a.bool,functionName:i.a.string.isRequired,provisionedConcurrencyConfigs:u.a.map,refreshing:i.a.bool.isRequired,refresh:i.a.func.isRequired};var A=Object(b.E)(["provisionedConcurrencyConfigsParser"])(Object(f.connect)(R,N)(D));function M(e){if("alias"===e.qualifierType){var t,n=e.qualifier,r=e.qualifiers,i=e.id,a=e.columns,s=e.skipAliasName;return o.a.createElement(A,{alias:null===(t=r.getIn(["aliases",n]))||void 0===t?void 0:t.toJS(),id:i,columns:a,skipAliasName:s})}var l=e.functionName,u=e.qualifier,f=e.qualifiers,p=e.loading,m=e.error,h=Object(b.p)(f.get("aliases"))[u]||[],g=m?o.a.createElement(k.b,{error:m}):o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,h.map((function(e){return o.a.createElement("a",{key:e,href:"#/functions/".concat(l,"/aliases/").concat(e)},o.a.createElement(S,{color:"blue"},e))}))),o.a.createElement(c.Button,{variant:"link",icon:"add-plus",onClick:e.openCreateAlias},o.a.createElement(d.a,{id:"functionDetail.button.createAlias"})));return o.a.createElement(c.FormSection,{header:o.a.createElement(d.a,{id:"functionDetail.configuration.aliases.title"})},o.a.createElement(C.a,{cond:!!p},g))}M.propTypes={qualifier:i.a.string.isRequired,qualifierType:i.a.string.isRequired,readonly:i.a.bool,id:i.a.string,columns:i.a.number,skipAliasName:i.a.bool,loading:i.a.bool,error:i.a.instanceOf(Error),functionName:i.a.string.isRequired,qualifiers:u.a.map,openCreateAlias:i.a.func.isRequired};t.b=Object(b.E)(["functionQualifiersSource"])(Object(f.connect)(R,N,(function(e,t,n){return P(P(P(P({},n),e),t),{},{openCreateAlias:function(){return t.openCreateAlias(e.functionName)}})}))(M))},2121:function(e,t,n){"use strict";n.r(t),n.d(t,"NodeSelector",(function(){return j})),n.d(t,"AddRelationPageComponent",(function(){return k}));var r=n(1),i=n.n(r),a=n(429),o=n(87),s=n(167),c=n(675),l=n(38),u=n(1840),d=n(428),f=n(1655),p=n(1846),m=n(1669),h=n(1845),g=n(24),b=n(55),v=n(70),y=n(69),E=n(1649);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=e.type,n=e.nodes,r=e.otherType,s=e.setOtherType,c=y.intl.formatMessage({id:"addRelation.type.".concat(t)}),l=Object(o.Map)(n[t]).filter((function(e){return null==e?void 0:e.isAvailable})).sortBy((function(e){return e.getDisplayName()})).map((function(e){return{id:e.id,label:e.getDisplayName(),iconUrl:e.icon,tags:e.categories.concat(e.keywords).sort()}})).toArray(),u=!l.length,d=l;if(b.d.includes("encephalon")&&(u=u||!n.thirdParty,n.thirdParty&&!n.thirdParty.isEmpty())){var f=n.thirdParty.map((function(e){return{id:e.id,label:e.name,description:e.description,iconUrl:e.logo}})).toArray();d.push({id:"thirdParty",label:y.intl.formatMessage({id:"addRelation.nodeSelector.thirdParty.label"}),options:f})}var p=d.find((function(e){return e.id===r}));return i.a.createElement(a.Select,{id:"node-selector",className:"awsui-util-mb-s",filteringType:"auto",triggerVariant:"option",options:d,statusType:u?"loading":null,selectedOption:p,onChange:function(e){return s(e.detail.selectedOption.id)},placeholder:y.intl.formatMessage({id:"addRelation.nodeSelector.placeholder"},{type:c})})}function S(e){var t=y.intl.formatMessage({id:"addRelation.type.".concat(e)});return{items:[{text:y.intl.formatMessage({id:"addRelation.header"},{type:t}),href:"#/add/relation"}]}}function k(e){var t=e.adding,n=e.config,o=e.nodes,c=e.relation,u=e.add,b=e.cancel,y=e.setOtherType,E=e.updateRelation,w=e.tag,k=e.tagType,_=O(Object(r.useState)(!1),2),C=_[0],T=_[1],P=n.toJS(),x=P.type,R=P.sourceType,N=P.target,I=P.targetType,D=P.focus,A=P.nodeId;if(!N)return i.a.createElement(l.Redirect,{to:"/functions"});if(!x)return null;var M,F=i.a.createElement(s.a,{id:"addRelation.type.".concat(x)}),q=D===R?I:R,B=D===R?o.lambda:o[x][A],L=D===R?o[x][A]:o.lambda,z=B&&L;null!=q&&q.startsWith("aws.partner/")&&(M={partner:q});var U,W=!1;"cloudfront"!==q||Object(g.Y)(new g.i(N).qualifier)||(W=!0,U=h.b);var V=null,G=null,H=null;if(z){var Z=B.formatMessage("acknowledgement.header"),J=B.formatMessage("acknowledgement.content"),K=B.formatMessage("acknowledgement.checkbox"),Q=!!Z;!!K&&(W=!0,H=i.a.createElement(a.Checkbox,{checked:C,onChange:function(e){T(e.detail.checked),Object(v.logEvent)(v.EVENT_NAMES.TRIGGER_ACK(e.detail.checked))},className:"awsui-util-mt-s"},K)),Q&&(G=i.a.createElement(a.Alert,{header:Z,className:"awsui-util-mb-m"},J,H)),V=U?i.a.createElement(U,{target:N,sourceDefinition:B}):i.a.createElement(p.a,{type:x,source:c.get("identifier"),target:N,data:c.get("data"),metadata:M,persistedState:c.get("persistedState"),validation:c.get("validation"),focus:D,sourceDefinition:B,targetDefinition:L,onChange:E})}else q&&(V=i.a.createElement(d.a,{size:"large"}));var Y=i.a.createElement("div",null,i.a.createElement(a.Button,{variant:"link",onClick:b,"data-analytics":v.WorkflowTags.cancel},i.a.createElement(s.a,{id:"cancel"})),i.a.createElement(a.Button,{variant:"primary",onClick:u,disabled:W&&!(H&&C),loading:t,"data-analytics":v.WorkflowTags.add},i.a.createElement(s.a,{id:"add.button.submit"})));return i.a.createElement(m.a,{id:"addRelation",breadcrumbs:S(x),tag:w,tagType:k},i.a.createElement(f.a,{id:"addRelation",header:i.a.createElement(s.a,{tagName:"h1",id:"addRelation.header",values:{type:F}}),actions:Y},i.a.createElement(a.FormSection,{header:i.a.createElement(s.a,{id:"addRelation.section.".concat(x)})},i.a.createElement(j,{type:x,nodes:o,otherType:q,setOtherType:y}),V),G))}t.default=Object(E.tagContextHoc)(Object(c.connect)(u.d,u.c,u.e)(k),!0)},2122:function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigureBlueprintComponent",(function(){return I}));var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(429),c=n(38),l=n(87),u=n(677),d=n.n(u),f=n(167),p=n(440),m=n(675),h=n(1841),g=n(1661),b=n(1652),v=n(1669),y=n(436),E=n(1903),O=n(1655),w=n(1717),j=n(1662),S=n(1846),k=n(1760),_=n(24),C=n(70),T=n(1668),P=n(1780),x=n(69),R=n(1649),N=n(1673);function I(e){var t,n=e.functionName,r=e.isQuickstart,a=e.runtime,o=e.trigger,u=e.pageLoadError;if(!e.blueprintName||u)return i.a.createElement(c.Redirect,{to:"/create/function"});var d,m,h=r?i.a.createElement("div",{className:"awsui-util-mb-l"},i.a.createElement(s.Alert,{header:i.a.createElement(f.a,{id:"create.quickstart.header"})},i.a.createElement(f.a,{id:"create.quickstart.new.content"}))):null,R=o.getIn(["data","id"]),I=e.integrations[R],D=I&&R&&!("cloudfront"===R)?i.a.createElement(b.c,{header:i.a.createElement(b.a,{header:i.a.createElement(f.a,{id:"trigger.create.header.title",values:{trigger:I.getDisplayName()}})},i.a.createElement(s.Button,{onClick:function(){return e.updateTrigger(Object(l.fromJS)({data:{id:""}}))}},i.a.createElement(f.a,{id:"remove"})))},i.a.createElement(S.a,{type:"trigger",source:o.getIn(["data","identifier"]),target:_.i.fromFunctionName(n).arn,data:o.get("data"),persistedState:o.get("persistedState"),validation:o.get("validation"),focus:"lambda",sourceDefinition:I,targetDefinition:e.lambdaNode,onChange:e.updateTrigger})):null,A={name:function(t){return e.existingFunctionNames.includes(t)?[{message:x.intl.formatMessage({id:"error.frontend.create.existingFunction"})}]:null}},M=i.a.createElement("div",null,i.a.createElement(f.a,{id:"create.configureFunction.basics.title"}),i.a.createElement(j.a,{path:"configureBlueprint.helpContent"})),F=[{key:i.a.createElement(f.a,{id:"configureBlueprint.runtime.field.label"}),value:Object(T.q)(a)}];return Object(N.c)().length>1&&F.push({key:i.a.createElement(f.a,{id:"functions.grid.architecture"}),value:N.a.x86}),i.a.createElement(v.a,{id:"configureBlueprint",breadcrumbs:(d=e.blueprintName,m=x.intl.formatMessage({id:"authorFromScratch"}),d&&(m=x.intl.formatMessage({id:"create.breadcrumbsTitleWithBlueprint"},{blueprint:d})),{items:[{text:x.intl.formatMessage({id:"functions.title"}),href:"#/functions"},{text:x.intl.formatMessage({id:"create.title"}),href:"#/create/function"},{text:m,href:"#/create/function/configure/blueprint?blueprint=".concat(d)}]}),tag:e.tag},h,i.a.createElement(O.a,{id:"configureBlueprint",actionsProvider:function(t){return i.a.createElement("div",null,i.a.createElement(s.Button,{variant:"link",href:"#/create/function","data-analytics":C.WorkflowTags.cancel},i.a.createElement(f.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",onClick:t,loading:e.creating,"data-analytics":C.WorkflowTags.create},i.a.createElement(f.a,{id:"wizard.button.done"})))},onSubmit:e.createFunction,schema:P.a,customValidators:A},i.a.createElement(b.e,{header:M},i.a.createElement(w.FormField,{id:"name",fieldTextProps:["label"]},i.a.createElement(s.Input,{placeholder:"myFunctionName"})),i.a.createElement(k.a,{formId:"configureBlueprint",functionNameField:"name",showBasic:!0})),D,e.blueprint&&i.a.createElement(b.e,{header:i.a.createElement(f.a,{id:"create.configureFunction.code.title"}),description:i.a.createElement(p.a,{id:"create.configureFunction.new.code.runtime.text",values:{docPage:Object(T.i)("deploymentPackage",a)}})},i.a.createElement(g.b,{scope:"containsLibraries"}),i.a.createElement(b.f,{flat:!0,items:F,columns:F.length}),i.a.createElement("div",null,i.a.createElement(y.a,{id:"editor",readonly:!0,mode:Object(T.j)(a),value:e.blueprintCode}))),(null===(t=e.blueprint)||void 0===t?void 0:t.config.config.lambda.Environment)&&i.a.createElement(E.a,{formId:"configureBlueprint",functionName:n,runtime:a})))}I.propTypes={blueprint:o.a.object,blueprintCode:o.a.string,blueprintName:o.a.string,creating:o.a.bool.isRequired,existingFunctionNames:o.a.arrayOf(o.a.string).isRequired,functionName:o.a.string,integrations:o.a.object.isRequired,isQuickstart:o.a.bool.isRequired,lambdaNode:o.a.object.isRequired,runtime:o.a.string,trigger:d.a.map.isRequired,pageLoadError:o.a.bool,tag:o.a.string,createFunction:o.a.func,updateTrigger:o.a.func.isRequired},t.default=Object(R.tagContextHoc)(Object(m.connect)(h.f,h.e)(I),!0)},2123:function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(683),c=n(675),l=n(1664),u=n(1665),d=n(24),f=n(430),p=n(70),m=function(){var t=Object(d.C)(["ideCdn"]),n=t,r="".concat(t,"/index.html");return n.startsWith("/")&&(n=e.location.origin.replace("9443","7000"),r="".concat(n,"/static/@amzn/lambda-console-ide/static/local.html")),[r,n.split("/").slice(0,3).join("/")]},h=function(e){return i.a.createElement(s.Cloud9Lite,{adapter:e.adapter,adapterProps:e.adapterProps,dark:Object(d.Z)(),defaultFile:e.defaultFile,features:Object(d.G)(),fullscreen:e.fullscreen,hash:e.hash,projectId:e.projectId,projectName:e.projectName,readonly:e.readonly,userId:Object(d.R)(),getIframeLocation:m,metrics:p,onReady:e.onReady,registerApis:e.registerApis,setFullscreen:e.setFullscreen,encryptionSchemes:{"1/KMS":{decrypt:function(e){return f.a.decryptIdeReadKey({readKey:e}).then((function(e){return e.body.readKey}))},encrypt:function(e){return f.a.encryptIdeWriteKey({writeKey:e}).then((function(e){return e.body.writeKey}))}}},defaultEncryptionScheme:Object(d.U)("kathlemias")?"1/KMS":"0/ECHO"})};h.propTypes={adapter:o.a.any.isRequired,adapterProps:o.a.object.isRequired,defaultFile:o.a.string,hash:o.a.string.isRequired,projectId:o.a.string.isRequired,projectName:o.a.string.isRequired,readonly:o.a.bool.isRequired,onReady:o.a.func,registerApis:o.a.func,fullscreen:o.a.bool.isRequired,setFullscreen:o.a.func.isRequired};t.a=Object(c.connect)((function(e){return{fullscreen:!!Object(u.b)(e).query.fullscreen}}),(function(e){return{setFullscreen:function(t){return e(Object(l.c)({query:{fullscreen:t?"true":void 0}},{persistQuery:!0}))}}}))(h)}).call(this,n(14))},2126:function(e,t,n){var r=n(432),i=n(2127);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);e.exports=i.locals||{}},2127:function(e,t,n){(t=n(431)(!1)).push([e.i,'.awsui_badge_1yjyg_1gkjh_3:not(#\\9){\n  border-collapse:separate;\n  border-spacing:0;\n  caption-side:top;\n  cursor:auto;\n  direction:ltr;\n  empty-cells:show;\n  font-family:serif;\n  font-size:medium;\n  font-style:normal;\n  font-variant:normal;\n  font-weight:normal;\n  font-stretch:normal;\n  line-height:normal;\n  hyphens:none;\n  letter-spacing:normal;\n  list-style:disc outside none;\n  tab-size:8;\n  text-align:left;\n  text-align-last:auto;\n  text-indent:0;\n  text-shadow:none;\n  text-transform:none;\n  visibility:visible;\n  white-space:normal;\n  widows:2;\n  word-spacing:normal;\n  box-sizing:border-box;\n  font-size:14px;\n  font-size:var(--font-body-m-size-3mVn35, 14px);\n  line-height:22px;\n  line-height:var(--font-body-m-line-height-3H4gFo, 22px);\n  color:#16191f;\n  color:var(--color-text-body-default-fgLpHn, #16191f);\n  font-weight:400;\n  font-family:"Amazon Ember", "Helvetica Neue", Roboto, Arial, sans-serif;\n  font-family:var(--font-family-base-SgSfB7, "Amazon Ember", "Helvetica Neue", Roboto, Arial, sans-serif);\n  font-size:12px;\n  font-size:var(--font-body-s-size-26MKNB, 12px);\n  line-height:16px;\n  line-height:var(--font-body-s-line-height-1u2UBI, 16px);\n  letter-spacing:normal;\n  letter-spacing:var(--font-body-s-letter-spacing-svMjV2, normal);\n  line-height:22px;\n  line-height:var(--font-body-m-line-height-3H4gFo, 22px);\n  display:inline-block;\n  border-radius:16px;\n  border-radius:var(--border-badge-radius-25ntG7, 16px);\n  padding:0 8px;\n  padding:0 var(--space-xs-2P4jwl, 8px);\n  color:#fafafa;\n  color:var(--color-text-notification-default-1kG4-3, #fafafa);\n}\n.awsui_badge_1yjyg_1gkjh_3.awsui_badge-color-grey_1yjyg_1gkjh_20:not(#\\9){\n  background-color:#545b64;\n  background-color:var(--color-background-notification-grey-2l6xEq, #545b64);\n}\n.awsui_badge_1yjyg_1gkjh_3.awsui_badge-color-green_1yjyg_1gkjh_23:not(#\\9){\n  background-color:#1d8102;\n  background-color:var(--color-background-notification-green-eYld4J, #1d8102);\n}\n.awsui_badge_1yjyg_1gkjh_3.awsui_badge-color-blue_1yjyg_1gkjh_26:not(#\\9){\n  background-color:#0073bb;\n  background-color:var(--color-background-notification-blue-1iGHWA, #0073bb);\n}\n.awsui_badge_1yjyg_1gkjh_3.awsui_badge-color-red_1yjyg_1gkjh_29:not(#\\9){\n  background-color:#d13212;\n  background-color:var(--color-background-notification-red-3Mpv7H, #d13212);\n}',""]),e.exports=t},2128:function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(429),c=n(87),l=n(677),u=n.n(l),d=n(167),f=n(675),p=n(2129),m=n(2130),h=n(1657),g=n(1666),b=n(1654),v=n(301),y=n(1671),E=n(1699),O=n(24),w=n(70),j=n(69),S=n(1660),k=n(1653),_=n(2131),C=n(1953),T=n(1649);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){var t=e.message;return i.a.createElement("div",{className:"placeholder-card"},i.a.createElement("div",{className:"awsui-util-d-ib awsui-util-ml-s"},i.a.createElement(d.a,{id:t})))};B.propTypes={message:o.a.string.isRequired};var L=function(){var e=Object(c.Map)({id:"loadingPlaceholder",type:"placeholder",name:"",icon:function(){return i.a.createElement("div",null)}});return i.a.createElement(p.a,{node:e,selectNode:function(){},visualOnly:!0},i.a.createElement("div",{className:"gleam loading"}))},z=function(){return Object(O.U)("hoover")&&Object(O.U)("dermestid")},U=function(e){var t=e.focus,n=e.nodes,r=e.onChangeFunction,a=n.filter((function(e){return"function"===e.get("type")&&e.get("id")!==t})).map((function(e){return{id:e.get("id"),label:e.get("name")}})).toJS();return a.length?i.a.createElement("div",null,i.a.createElement(d.a,{tagName:"small",id:"designer.relatedFunctions.label"}),i.a.createElement("div",{className:"function-select"},i.a.createElement(s.Select,{filteringType:"auto",filteringPlaceholder:j.intl.formatMessage({id:"designer.relatedFunctions.filter"}),options:a,className:"designer-dropdown",placeholder:j.intl.formatMessage({id:"designer.relatedFunctions.placeholder"}),onChange:r}))):null};U.propTypes={focus:o.a.string.isRequired,nodes:u.a.listOf(E.d).isRequired,onChangeFunction:o.a.func.isRequired};var W=o.a.shape({loading:o.a.bool,type:o.a.string.isRequired,tag:o.a.string}),V=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(l,t);var n,r,a,o=D(l);function l(){var t;R(this,l);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return q(M(t=o.call.apply(o,[this].concat(r))),"selectNode",(function(n){var r=t.props.nodes.filter((function(e){return Object(b.d)(e,n)}));t.props.onClickNodes(r);var i=t.designer.getBoundingClientRect().bottom,a=e.innerHeight,o=t.canvas.scrollTop;i>a-100&&(t.scroller.style.bottom="".concat(Math.max(i-a+60,28)-o,"px"),Array.from(t.scroller.children).forEach((function(e,t){return setTimeout((function(){e.style.opacity=1,setTimeout((function(){e.style.opacity=0}),500)}),150*t)})))})),t}return n=l,(r=[{key:"componentDidMount",value:function(){this.props.expanded&&this.props.runGraphTasks()}},{key:"componentDidUpdate",value:function(e){var t=e.expanded,n=e.focus,r=this.props,i=r.expanded,a=r.focus,o=r.runGraphTasks;!i||t&&n===a||o()}},{key:"onChangeFunction",value:function(e){var t=this.props.nodes.filter((function(t){return t.get("name")===e.detail.selectedOption.label})).getIn([0,"id"]);this.props.changeFunction(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.expandable,r=t.focus,a=t.id,o=t.lambdaIcon,l=t.leftNodes,u=t.loading,f=t.navigateToAddDestination,h=t.nodes,g=t.readonly,y=t.rightNodes,E=h.filter((function(e,t,n){return n.findIndex((function(t){return Object(b.d)(t,e)}))===t})),k=h.find((function(e){return e.get("id")===r}))||Object(c.Map)({id:r,type:"function",name:r?new O.i(r).friendlyName:j.intl.formatMessage({id:"function"}),icon:o||function(){return i.a.createElement("div",null)}}),T=null;if(r&&null!=h&&h.size){var P,x=h.find((function(e){return"layer"===e.get("id")})),R=new O.i(r).qualifier,N=Object(O.L)(R)===S.H.ALIAS;x&&x.get("packageType")!==S.D.IMAGE&&!N&&(T=i.a.createElement(p.a,{key:"layer",selected:this.props.selectedNodes.includes("layer"),node:x,count:(null===(P=k.getIn(["data","layers"]))||void 0===P?void 0:P.size)||0,selectNode:function(t){e.selectNode(t),e.props.changeTab(S.N.CODE),Object(b.C)(S.J.LAYERS)},tag:w.WorkflowTags.layers}))}var I=i.a.createElement("div",null);g||(I=i.a.createElement(s.Button,{id:"add-trigger",icon:"add-plus",href:"#/add/relation?type=trigger&targetType=lambda&target=".concat(r),onClick:function(){Object(w.logEvent)(w.EVENT_NAMES.TRIGGER_ADD)},"data-analytics":w.WorkflowTags.addTrigger},i.a.createElement(d.a,{id:"trigger.create.title"})));var D=g?i.a.createElement("div",null):i.a.createElement("div",null,i.a.createElement(B,{message:"designer.placeholder.".concat(y.type)}));if(!g&&r&&Object(O.U)("starfish")){var A=new O.i(r),M=A.functionName,F=A.qualifier;D=i.a.createElement(s.Button,{className:"awsui-util-f-r",id:"add-destination",icon:"add-plus",onClick:function(){f(M,F),Object(w.logEvent)(w.EVENT_NAMES.DESTINATION_ADD)}},i.a.createElement(d.a,{id:"destination.create.title"}))}var q=i.a.createElement("div",{className:"awsui-grid"},i.a.createElement("div",{className:"awsui-row awsui-util-no-gutters"},i.a.createElement("div",{className:"col-4"}),i.a.createElement("div",{className:"col-4 function-and-layer"},i.a.createElement(p.a,{key:r,visualOnly:!0,selected:this.props.selectedNodes.includes(r),node:k,selectNode:this.selectNode.bind(this)}),T),i.a.createElement("div",{className:"col-4"},i.a.createElement(U,{nodes:h,focus:r,onChangeFunction:this.onChangeFunction.bind(this)}))),i.a.createElement("div",{className:"awsui-row awsui-util-no-gutters"},i.a.createElement("div",{className:"col-6 left-column","data-analytics":l.tag},i.a.createElement(v.a,{cond:l.loading,placeholder:z()&&i.a.createElement(L,null)},E.filter((function(e){return e.get("type")===l.type})).map((function(t){return i.a.createElement(p.a,{key:t.get("id"),selected:e.props.selectedNodes.includes(t.get("id")),node:t,count:h.filter((function(e){return Object(b.d)(e,t)})).size,selectNode:e.selectNode.bind(e)})})),I)),i.a.createElement("div",{className:"col-6 right-column","data-analytics":y.tag},i.a.createElement(v.a,{cond:y.loading,placeholder:z()&&i.a.createElement(L,null)},E.filter((function(e){return e.get("type")===y.type})).map((function(t){return i.a.createElement(p.a,{key:t.get("id"),selected:e.props.selectedNodes.includes(t.get("id")),node:t,count:h.filter((function(e){return Object(b.d)(e,t)})).size,selectNode:e.selectNode.bind(e)})})),D))),i.a.createElement("div",{className:"scroller",ref:function(t){return e.scroller=t}},i.a.createElement(s.Icon,{size:"big",variant:"disabled",name:"caret-down-filled"}),i.a.createElement(s.Icon,{size:"big",variant:"disabled",name:"caret-down-filled"}),i.a.createElement(s.Icon,{size:"big",variant:"disabled",name:"caret-down-filled"})));return i.a.createElement(m.a,{id:a,expandable:n,expandedInitially:this.props.expanded,onExpandChange:this.props.setVizExpanded,setUserPreference:this.props.setUserPreference,infoPath:"functionDesigner.helpContent",tag:this.props.tag,tagType:this.props.tagType},i.a.createElement("div",{id:"app-designer",ref:function(t){return e.designer=t}},i.a.createElement("section",{className:"canvas",ref:function(t){return e.canvas=t}},i.a.createElement(v.a,{cond:u},i.a.createElement(C.a,{gridDefinition:[{colspan:8},{colspan:4}],disableGutters:!0},i.a.createElement("div",{className:"designer-viz-container"},q),i.a.createElement("div",{className:"designer-info-container"},i.a.createElement(_.a,null)))))))}}])&&N(n.prototype,r),a&&N(n,a),l}(i.a.Component);q(V,"propTypes",{id:o.a.string.isRequired,loading:o.a.bool.isRequired,nodes:u.a.listOf(E.d).isRequired,edges:u.a.listOf(E.a).isRequired,focus:o.a.string.isRequired,selectedNodes:u.a.listOf(o.a.string).isRequired,leftNodes:W.isRequired,rightNodes:W.isRequired,expandable:o.a.bool,onClickNodes:o.a.func,setUserPreference:o.a.func,readonly:o.a.bool,changeTab:o.a.func,tag:o.a.string,tagType:o.a.string,lambdaIcon:o.a.string,expanded:o.a.bool.isRequired,changeFunction:o.a.func.isRequired,navigateToAddDestination:o.a.func.isRequired,setVizExpanded:o.a.func.isRequired,runGraphTasks:o.a.func.isRequired});var G,H=["cloudformationParser"].concat(function(e){if(Array.isArray(e))return x(e)}(G=Object(O.U)("starfish")?["destinationParser"]:["executionRoleParser"])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(G)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["functionParser","integrationConfigSource","layerParser","relationParser"]);t.a=Object(T.tagContextHoc)(Object(f.connect)((function(e){return{lambdaIcon:y.c.getLambdaIcon(e),expanded:Object(k.kb)(e)}}),(function(e){return{changeFunction:function(t){return e(Object(g.g)(t))},navigateToAddDestination:function(t,n){e(Object(h.L)(!0)),e(Object(g.f)(t,n,"destination",null,!0))},setVizExpanded:function(t){e(Object(h.R)(t))},runGraphTasks:function(){return e(Object(h.D)(H))}}}))(V))}).call(this,n(14))},2129:function(e,t,n){"use strict";var r=n(33),i=n.n(r),a=n(1),o=n.n(a),s=n(302),c=n.n(s),l=n(167),u=n(1699),d=function(e){var t=e.node,n=e.selectNode,r=e.children,i=e.count,a=e.visualOnly,s=e.tag,u=null,d=t.get("type");"function"!==d&&(i>1||"layer"===d)&&(u=o.a.createElement(l.a,{id:"wrapper",values:{value:i.toString()}}));var f=["awsui-util-container","awsui-util-mb-s","awsui-util-no-gutters","designer-card-container",d];a&&f.push("visual-only");var p=t.get("icon"),m="string"==typeof p?o.a.createElement("img",{src:p,alt:"icon"}):o.a.createElement(p,null);return o.a.createElement("div",{className:c()(f),onClick:function(){return n(t)},"data-analytics":s},o.a.createElement("div",null,o.a.createElement("div",{className:"service-icon-container"},m),o.a.createElement("div",{className:"node-details awsui-util-d-ib awsui-util-ph-s"},o.a.createElement("h3",{className:"awsui-util-pt-n"},t.get("name"))),u),r)};d.propTypes={node:u.d.isRequired,selectNode:i.a.func.isRequired,count:i.a.number,visualOnly:i.a.bool,tag:i.a.string,children:i.a.node},t.a=d},2130:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(167),c=n(429),l=n(1662),u=n(70);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,n,r,a=m(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),v(g(t=a.call(this,e)),"setExpanded",(function(e){return t.setState({expanded:e})})),v(g(t),"onSectionChange",(function(e){Object(u.logEvent)("cfg_".concat(t.props.id,"_").concat(e.detail.expanded?"expand":"collapse")),t.setExpanded(e.detail.expanded),t.props.setUserPreference({appDesignerExpand:t.state.expanded}),"function"==typeof t.props.onExpandChange&&t.props.onExpandChange(e.detail.expanded)})),t.state={expanded:e.expandedInitially||!1},t}return t=o,(n=[{key:"componentDidUpdate",value:function(e){this.props.expandedInitially!==e.expandedInitially&&this.setExpanded(this.props.expandedInitially)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.children,r=e.expandable,a=e.infoPath,o=e.tag,u=e.tagType,d=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{id:"functionDetail.sections.".concat(t,".title")}),a&&i.a.createElement(l.a,{path:a}));return i.a.createElement(c.FormSection,{id:"".concat(t,"Section"),header:d,expandable:null==r||r,expanded:this.state.expanded,onChange:this.onSectionChange.bind(this),"data-analytics":o,"data-analytics-type":u},n)}}])&&f(t.prototype,n),r&&f(t,r),o}(i.a.Component);v(y,"propTypes",{id:o.a.string.isRequired,expandedInitially:o.a.bool,children:o.a.node.isRequired,setUserPreference:o.a.func,expandable:o.a.bool,onExpandChange:o.a.func,infoPath:o.a.string,tag:o.a.string,tagType:o.a.string})},2131:function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(87),c=n(677),l=n.n(c),u=n(167),d=n(440),f=n(675),p=n(428),m=n(1706),h=n(1652),g=n(1681),b=n(2039),v=n(1653),y=n(24),E=n(1654),O=n(1662),w=n(1956),j=function(e){var t,n=e.functionLoading,r=e.functionArn,a=e.functionNode,o=e.provisionedConcurrencyConfigs,s=e.qualifiers,c=e.stackNode,l=e.metadata,E=function(){var e,t=Object(f.useSelector)((function(e){return Object(v.nb)(e,"functionUrlSource")})),n=t.result,r=t.loading,a=t.error;if(!Object(y.U)("ganondorf")||a)return null;var o=i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{id:"preview",values:{name:i.a.createElement(u.a,{id:"functionURL"})}}),i.a.createElement(O.a,{path:"functionOverview.url.helpContent"}));if(r)return{key:o,value:i.a.createElement(u.a,{id:"fetching"})};var s=null==n||null===(e=n.toJS())||void 0===e?void 0:e.functionUrl;return{key:o,value:s?i.a.createElement(w.a,{href:s}):"-"}}();if(n)return Object(y.U)("hoover")&&Object(y.U)("dermestid")?i.a.createElement(h.g,{columns:1,itemCount:3+Object(y.U)("ganondorf")}):i.a.createElement(p.a,{size:"large"});var j=new y.i(r),S=j.functionName,k=j.qualifier,_=Object(y.L)(k),C=null===(t=s.getIn(["aliases",k]))||void 0===t?void 0:t.toJS(),T={key:i.a.createElement(u.a,{id:"functionDesigner.section.generalConfiguration.functionARN.label"}),value:i.a.createElement(m.a,{value:r})};if(!a)return i.a.createElement(h.f,{flat:!0,columns:1,items:[T]});var P=a.get("data"),x=[];if(k&&"alias"===_&&C){var R,N,I,D,A="IN_PROGRESS"===(null===(R=o.get("aliases"))||void 0===R||null===(N=R.find((function(e){return e.get("qualifier")===C})))||void 0===N?void 0:N.get("status")),M=!(null==C||null===(I=C.additionalVersionWeight)||void 0===I||!I.version);x.push({key:i.a.createElement(u.a,{id:"functionDesigner.section.generalConfiguration.description.label"}),value:C.description||"-"},{key:i.a.createElement(u.a,{id:"functionDetail.aliasConfig.version.label"}),value:i.a.createElement(b.a,{functionName:S,version:C.version,weight:100-((null===(D=C.additionalVersionWeight)||void 0===D?void 0:D.weight)||0),hasAdditionalVersion:M,isInProgress:A})}),M&&x.push({key:i.a.createElement(u.a,{id:"functionDetail.aliasConfig.additionalVersion.label"}),value:i.a.createElement(b.a,{functionName:S,version:C.additionalVersionWeight.version,weight:C.additionalVersionWeight.weight,hasAdditionalVersion:M,isInProgress:A})}),x.push(T)}else{x.push({key:i.a.createElement(u.a,{id:"functionDesigner.section.generalConfiguration.description.label"}),value:P.get("description")||"-"},{key:i.a.createElement(u.a,{id:"functionDesigner.section.generalConfiguration.lastModified.label"}),value:i.a.createElement(g.a,{value:P.get("lastModified")||new Date})},T);var F=null==c?void 0:c.get("stackArn");if(F){var q=null==c?void 0:c.get("stackName");x.push({key:i.a.createElement(u.a,{id:"functionDesigner.section.generalConfiguration.application.label"}),value:i.a.createElement(d.a,{id:"functionDesigner.section.generalConfiguration.".concat(Object(y.U)("huesillo")?"application":"stack",".value"),values:{stackArn:F,stackName:q}})})}}var B=l.masterArn;return B&&x.push({key:i.a.createElement(u.a,{id:"masterARN"}),value:i.a.createElement(m.a,{value:B})}),E&&"version"!==_&&!B&&x.push(E),i.a.createElement(i.a.Fragment,null,i.a.createElement(h.f,{flat:!0,columns:1,items:x}))};j.propTypes={functionLoading:o.a.bool.isRequired,functionArn:o.a.string,functionNode:l.a.map,qualifiers:l.a.map.isRequired,provisionedConcurrencyConfigs:l.a.list,stackNode:l.a.map,metadata:o.a.shape({masterArn:o.a.string}),functionURL:o.a.string};t.a=Object(E.E)(["functionParser","cloudformationStackSource","provisionedConcurrencyConfigsSource","functionUrlSource"])(Object(f.connect)((function(e){return{functionLoading:!Object(v.a)(e,"overview"),functionArn:Object(v.q)(e),functionNode:Object(v.N)(e,Object(v.q)(e)),stackNode:Object(v.gb)(e,"cloudformationStackSource"),qualifiers:Object(v.V)(e)||Object(s.Map)(),provisionedConcurrencyConfigs:Object(v.W)(e,"provisionedConcurrencyConfigsSource")||Object(s.List)(),metadata:Object(v.A)(e)}}),null)(j))},226:function(e,t,n){"use strict";n.r(t),n.d(t,"defineMessages",(function(){return y})),n.d(t,"injectIntl",(function(){return s.c})),n.d(t,"RawIntlProvider",(function(){return s.b})),n.d(t,"IntlContext",(function(){return s.a})),n.d(t,"useIntl",(function(){return f.a})),n.d(t,"IntlProvider",(function(){return p.b})),n.d(t,"createIntl",(function(){return p.a})),n.d(t,"FormattedDate",(function(){return E})),n.d(t,"FormattedTime",(function(){return O})),n.d(t,"FormattedNumber",(function(){return w})),n.d(t,"FormattedList",(function(){return j})),n.d(t,"FormattedDisplayName",(function(){return S})),n.d(t,"FormattedDateParts",(function(){return k})),n.d(t,"FormattedTimeParts",(function(){return _})),n.d(t,"FormattedNumberParts",(function(){return l})),n.d(t,"FormattedRelativeTime",(function(){return m.a})),n.d(t,"FormattedPlural",(function(){return g})),n.d(t,"FormattedMessage",(function(){return b.a})),n.d(t,"FormattedHTMLMessage",(function(){return v.a})),n.d(t,"createIntlCache",(function(){return o.d}));var r,i,a=n(1),o=n(6),s=n(40),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(r||(r={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(i||(i={}));var l=function(e){return a.createElement(s.a.Consumer,null,(function(t){Object(o.h)(t);var n=e.value,r=e.children,i=c(e,["value","children"]);return r(t.formatNumberToParts(n,i))}))};function u(e){var t=function(t){return a.createElement(s.a.Consumer,null,(function(n){Object(o.h)(n);var r=t.value,i=t.children,a=c(t,["value","children"]),s="string"==typeof r?new Date(r||0):r;return i("formatDate"===e?n.formatDateToParts(s,a):n.formatTimeToParts(s,a))}))};return t.displayName=i[e],t}function d(e){var t=function(t){return a.createElement(s.a.Consumer,null,(function(n){Object(o.h)(n);var r=t.value,i=t.children,s=c(t,["value","children"]),l=n[e](r,s);if("function"==typeof i)return i(l);var u=n.textComponent||a.Fragment;return a.createElement(u,null,l)}))};return t.displayName=r[e],t}l.displayName="FormattedNumberParts";var f=n(437),p=n(234),m=n(439),h=function(e){var t=e.value,n=e.other,r=e.children,i=e.intl,o=i.formatPlural,s=i.textComponent,c=e[o(t,e)]||n;return"function"==typeof r?r(c):s?a.createElement(s,null,c):c};h.defaultProps={type:"cardinal"},h.displayName="FormattedPlural";var g=Object(s.c)(h),b=n(167),v=n(440);function y(e){return e}var E=d("formatDate"),O=d("formatTime"),w=d("formatNumber"),j=d("formatList"),S=d("formatDisplayName"),k=u("formatDate"),_=u("formatTime")},228:function(e,t,n){"use strict";for(var r=n(51),i=n(130),a=n(455),o=n(105),s=new Array(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}t.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),o=0,a=0;o<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,c=new Array(2*o);for(n=0,t=0;t<o;)if((i=e[t++])<128)c[n++]=i;else if((a=s[i])>4)c[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<o;)i=i<<6|63&e[t++],a--;a>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,o),l.prototype.processChunk=function(e){var n=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=n;(n=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),n.set(a,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(n),c=n;o!==n.length&&(i.uint8array?(c=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(c=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=l,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=u},229:function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n(136))},230:function(e,t,n){var r=n(131),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},2613:function(e,t,n){"use strict";n.r(t),n.d(t,"TAB_IDS",(function(){return Xc})),n.d(t,"getQualifierEventName",(function(){return tl})),n.d(t,"mapState",(function(){return nl})),n.d(t,"mapDispatch",(function(){return rl})),n.d(t,"FunctionDesignerTabs",(function(){return il})),n.d(t,"FunctionDesignerPageContainer",(function(){return al}));var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(429),c=n(440),l=n(675),u=n(38),d=n(331),f=n(1664),p=n(1654),m=n(1657),h=n(167),g=n(1777),b=n(1660),v=n(1666),y=n(1653),E=n(1669),O=n(70),w=["tab"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function C(e){var t,n=e.breadcrumbs,r=e.isCreate,a=e.functionName,o=e.qualifier,c=e.editPage,l=e.tag,d=e.tagType,f=e.isSavingEdit,m=e.cancel,b=e.save,v=Object(p.i)(c),y=null!==(t=g[v])&&void 0!==t?t:{},w=y.component,j=y.tag;if(!w)return i.a.createElement(u.Redirect,{to:"/functions"});var S={id:v,header:i.a.createElement(h.a,{tagName:"h1",id:"".concat(v,r?"Create.header":".header")}),actionsProvider:function(e){return i.a.createElement("div",null,i.a.createElement(s.Button,{variant:"link",onClick:m,disabled:f,"data-analytics":O.WorkflowTags.cancel},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",onClick:e,loading:f,"data-analytics":O.WorkflowTags.save},i.a.createElement(h.a,{id:"save"})))},onSubmit:b,schema:g[v].schema};return i.a.createElement(E.a,{id:"functionDesigner",breadcrumbs:n,tag:l,tagType:d},i.a.createElement(w,{formProps:S,functionName:a,qualifier:o,tag:j}))}C.propTypes={breadcrumbs:o.a.object.isRequired,functionName:o.a.string.isRequired,qualifier:o.a.string,editPage:o.a.string.isRequired,tag:o.a.string.isRequired,tagType:o.a.string,isSavingEdit:o.a.bool.isRequired,isCreate:o.a.bool.isRequired,cancel:o.a.func.isRequired,save:o.a.func.isRequired};var T,P=Object(l.connect)((function(e){return{isSavingEdit:Object(y.K)(e),tab:Object(y.g)(e)}}),(function(e,t){var n=t.editPage,r=t.functionName,i=t.qualifier;return{cancel:function(t){Object(O.logEvent)(O.EVENT_NAMES.EDIT_PAGE_CANCEL(n)),Object(p.x)(r,i,"editPage","cancel");var a="alias"===n&&t===b.N.ALIASES;e(Object(v.e)(r,a?null:i,{tab:t}))},save:function(t){e(Object(m.H)(r,i,n,t))}}}),(function(e,t,n){var r=e.tab,i=_(e,w);return S(S(S(S({},n),i),t),{},{cancel:function(){return t.cancel(r)}})}))(C),x=n(301),R=n(683),N=n(168),I=n.n(N),D=n(302),A=n.n(D),M=n(1677),F=n(1936),q=n(1686),B=n(1721),L=n(1661),z=n(1658),U=n(1911),W=n(428),V=n(2643),G=n(1659),H=n(1717),Z=n(2123),J=n(24),K=n(430),Q=n(1668),Y=n(69),$=n(330),X=n(1649),ee=["rootFunctionName","currTab"];function te(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){re(a,r,i,o,s,"next",e)}function s(e){re(a,r,i,o,s,"throw",e)}o(void 0)}))}}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce,le=function(e,t,n,r,i,a,o,s,c,l){var u=e.toJS();t?u={error:!0,message:Y.intl.formatMessage({id:"executionResults.invokeFailureMessage.title"},{message:t})}:u.logs||(u=void 0);var d,f,p=Object(J.U)("mandarinquat2")?null==l?void 0:l.toJS():null==r?void 0:r.toJS(),m=Object(J.U)("mandarinquat1")?Object(B.b)({savedEvents:p,dirtyEventCode:o,savedEventId:s,isCreate:c,selectedTestEventName:n}):null==r?void 0:r.toJS();d={executionResults:u,selectedTestEventName:n,testEvents:null==m?void 0:m.map((function(e){return{testEventName:e.id,group:e.group}})),testing:i,lastRunEventId:a},null===(f=ce)||void 0===f||f.emit("lambda.test","sync",d)},ue=Object(d.default)(le),de=Object(l.connect)((function(e,t){var n=Object(J.U)("mandarinquat1")?{dirtyEventCode:q.i.getDirtyEventCode(e),savedEventId:q.i.getEventModalState(e,"savedEventId"),isCreate:q.i.getEventModalState(e,"configurationOption")===q.a}:{},r=Object(J.U)("mandarinquat2")?{allSavedTestEvents:q.i.getAllSavedEvents(e)}:{};return oe(oe({hash:Object(y.P)(e,t.nodeId,"codeSha256"),projectId:Object($.c)(t.nodeId),projectName:Object(y.P)(e,t.nodeId,"name"),executionResults:q.i.getExecutionResults(e),invokeFailureMessage:q.i.getInvokeFailureMessage(e),selectedTestEventName:q.i.getEventIdToInvoke(e),testEvents:q.i.getSavedEvents(e),testing:q.i.getIsInvoking(e),lastRunEventId:q.i.getLastRunEventId(e)},n),r)}),(function(e){return{configure:function(){return e(q.g.toggleEventModal(!0))},save:function(t,n,r){return e(Object(m.E)(t,n,r))},saveRemote:function(t,n,r,i){return e(Object(m.G)(t,n,r,i))},selectTestEvent:function(t){return e(q.g.setEventIdToInvoke(t))},test:function(){return e(q.g.test())},testWithDraft:function(){return e(q.g.testWithDraft())},testWithSharedEvents:function(){return e(q.g.testWithSharedEvents())}}}),(function(e,t,n){var r,i,a=e.executionResults,o=e.invokeFailureMessage,s=e.selectedTestEventName,c=e.testEvents,l=e.testing,u=e.dirtyEventCode,d=e.savedEventId,f=e.isCreate,p=e.lastRunEventId,m=e.allSavedTestEvents,h=Object(J.U)("mandarinquat1")?[u,d,f]:[],g=Object(J.U)("mandarinquat2")?m:void 0;return ce&&ue.apply(void 0,[a,o,s,c,l,p].concat(h,[g])),oe(oe(oe(oe({},n),e),t),{},{adapter:Object(J.U)("mangelfish")?R.RemoteZipAdapter:R.LocalZipAdapter,adapterProps:Object(J.U)("mangelfish")?{getRemoteRange:(i=ie(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!==(n=t.low)&&void 0!==n?n:0,a=null!==(r=t.high)&&void 0!==r?r:-1,e.next=4,I.a.get(t.url,{headers:{Range:i<0?"bytes=".concat(i):"bytes=".concat(i,"-").concat(a<0?"":a)},responseType:"arraybuffer"});case 4:return o=e.sent,s=o.body,e.abrupt("return",new Uint8Array(s));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),getUrl:(r=ie(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.getFunction({functionName:e.projectId});case 2:return n=t.sent,r=n.body,i=r.code.location,a=Date.now()+1e3*(parseInt(new URL(i).searchParams.get("X-Amz-Expires"),10)-10),t.abrupt("return",{url:i,expires:a,zipSize:r.configuration.codeSize});case 7:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),save:function(e,n){return new Promise((function(r,i){return t.saveRemote(e,n,r,i)}))}}:{zip:n.unzipped,save:function(e){return new Promise((function(n,r){return t.save(e,n,r)}))}},onReady:function(e){ce=e,le.apply(void 0,[a,o,s,c,l,p].concat(h,[g]))},registerApis:function(e){e.on("lambda.test",(function(e){"configure"===e?t.configure():"selectTestEvent"===e?t.selectTestEvent(arguments.length<=1?void 0:arguments[1]):"test"===e&&(Object(J.U)("mandarinquat2")?t.testWithSharedEvents():Object(J.U)("mandarinquat1")?t.testWithDraft():t.test(s))}))}})}))(Z.a);function fe(e){var t=e.cloud9LiteKey,n=e.nodeId,r=e.readonly,a=e.defaultFile,o=e.unzipped,s=e.loading,c=e.error;return s?i.a.createElement("div",{className:A()({"ide-iframe-placeholder":Object(J.U)("hoover")})},i.a.createElement(W.a,{size:"large"})):c?i.a.createElement(V.a,{type:"error"},c.message):o?i.a.createElement("div",{className:"code-section"},i.a.createElement(de,{key:t,nodeId:n,readonly:r,defaultFile:a,unzipped:o})):null}fe.propTypes={nodeId:o.a.string.isRequired,readonly:o.a.bool.isRequired,defaultFile:o.a.string,cloud9LiteKey:o.a.string,unzipped:o.a.object,loading:o.a.bool,error:o.a.instanceOf(Error)};var pe,me=Object(p.E)(["functionCodeSource","functionCodeParser"].concat(function(e){if(Array.isArray(e))return ne(e)}(pe=Object(J.U)("mandarinquat2")?["testingSharedSource"]:["testingSource"])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(pe)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(pe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))(Object(l.connect)((function(e,t){return oe(oe({},Object(y.nb)(e,"functionCodeSource")),{},{cloud9LiteKey:Object(y.P)(e,t.nodeId,"cloud9LiteKey"),unzipped:Object(y.P)(e,t.nodeId,"unzippedPackage")},t)}),null)(fe));function he(e){var t=e.codeSource,n=e.isEditable,r=e.codeSigningConfigArn,i=e.hasSignedArtifact;return"inline"===t&&n&&!r&&!i}var ge=(se(T={},"upload",O.WorkflowTags.zip),se(T,"s3",O.WorkflowTags.s3),T);function be(e){var t,n,r,a,o=e.readonly,l=e.runtime,u=e.functionName,d=e.fileName,f=e.deploymentTooLarge,p=e.isEditable,m=e.hasCustomRuntime,g=e.hasDeprecatedRuntime,b=e.codeSigningConfigArn,v=e.hasSignedArtifact,y=e.trueQualifier,E=e.goToEditableCode,w=e.tag,j=e.tagType,S=e.nextTag,k=Object(Q.g)(l),_=!d&&!m,C=!!v||!!b;if(o&&(_=!0,t=i.a.createElement(s.Alert,{className:"awsui-util-m-m awsui-util-mb-xl",buttonText:i.a.createElement(h.a,{id:"functionDesigner.section.code.alert.button.readonly.label"}),onButtonClick:E},i.a.createElement(c.a,{id:"functionDesigner.section.code.alert.readonly.label"}))),f&&(n=i.a.createElement(s.Alert,{className:"awsui-util-mb-l"},i.a.createElement(c.a,{id:"warning.frontend.functionDetail.largePackage",values:{functionName:u}}))),g&&(Object(O.logEvent)(O.EVENT_NAMES.DEPRECATED_RUNTIME_ALERT_APPEAR),r=i.a.createElement("div",{className:"awsui-util-mv-s","data-testid":"deprecated-runtime-alert"},i.a.createElement(s.Alert,{dismissible:!0,visible:!0,onDismiss:function(){return Object(O.logEvent)(O.EVENT_NAMES.DEPRECATED_RUNTIME_ALERT_DISMISS)}},i.a.createElement(h.a,{id:"recEngine.runtimeDeprecated.title",tagName:"b"}),i.a.createElement(c.a,{id:"recEngine.runtimeDeprecated.description",tagName:"p"})))),f||p||(a=i.a.createElement(s.Alert,{className:"awsui-util-mt-s"},i.a.createElement(h.a,{id:"functionDetail.sections.codeSection.inlineEditingDisabled",values:{runtimeName:e.runtimeName}}))),C){t=null,n=null,a=null;var T=y?"functionDetail.sections.codeSection.inlineEditingDisabled.codeSigning.qualifier":"functionDetail.sections.codeSection.inlineEditingDisabled.codeSigning";a=i.a.createElement(s.Alert,{className:"awsui-util-mt-s"},i.a.createElement(h.a,{id:v?"functionDetail.sections.codeSection.inlineEditingDisabled.signedArtifact":T}))}var P,x=[{id:"upload",text:Y.intl.formatMessage({id:Object(Q.s)(k)}),disabled:_},{id:"s3",text:Y.intl.formatMessage({id:"functionDesigner.section.code.upload.type.s3"}),disabled:_}],R=i.a.createElement(s.ButtonDropdown,{items:x,onItemClick:function(t){var n=t.detail.id;e.setCodeSource(n);var r=ge[n];r&&O.panorama.logWorkflowEvent({tagPath:S([O.WorkflowTags.uploadSource,r])})},"data-analytics":O.WorkflowTags.uploadSource},i.a.createElement(h.a,{id:"functionDesigner.section.code.button.upload.label"}));if(he(e)){var N=d?"/".concat(d):void 0;P=i.a.createElement(me,{nodeId:e.nodeId,readonly:o,defaultFile:N})}else P=a;return i.a.createElement("div",{"data-analytics":w,"data-analytics-type":j},i.a.createElement(M.a,{id:"codeSource",helpMsgIdOverride:"code",showInfoLink:!0,readonly:o,actionsButton:R,primaryButton:null,noGutters:he(e)},t,n,r,i.a.createElement(L.b,{scope:"code-section",className:"awsui-util-m-m awsui-util-mb-xl"}),i.a.createElement(U.a,{nodeId:e.nodeId,readonly:o,isEditable:e.isEditable,cloud9RawZip:e.cloud9RawZip,tag:O.WorkflowTags.uploadModal}),P))}be.propTypes={nodeId:o.a.string.isRequired,readonly:o.a.bool.isRequired,tag:o.a.string.isRequired,tagType:o.a.string,nextTag:o.a.func.isRequired,runtime:o.a.string.isRequired,codeSource:o.a.string.isRequired,functionName:o.a.string.isRequired,trueQualifier:o.a.string,deploymentTooLarge:o.a.bool.isRequired,isEditable:o.a.bool.isRequired,hasDeprecatedRuntime:o.a.bool.isRequired,hasCustomRuntime:o.a.bool.isRequired,runtimeName:o.a.string,fileName:o.a.string,cloud9RawZip:o.a.string,hasSignedArtifact:o.a.bool.isRequired,codeSigningConfigArn:o.a.string,refreshRecEngine:o.a.func.isRequired,setCodeSource:o.a.func.isRequired,goToEditableCode:o.a.func.isRequired};var ve=Object(X.tagContextHoc)(Object(l.connect)((function(e,t){var n=Object(y.P)(e,t.nodeId,"runtime"),r=Object(y.P)(e,t.nodeId,"handler"),i=Object(y.P)(e,t.nodeId,"codeSize"),a=Object(y.P)(e,t.nodeId,"cloud9RawZip"),o=!Object(Q.x)(i),s=Object(y.P)(e,t.nodeId,"signingProfileVersionArn"),c=Object(y.P)(e,t.nodeId,"signingJobArn");return{runtime:n,codeSource:Object(y.P)(e,t.nodeId,"codeSource"),functionName:Object(y.P)(e,t.nodeId,"name"),rootFunctionName:Object(p.A)(Object(y.P)(e,t.nodeId,"name")),currTab:Object(y.g)(e),trueQualifier:Object(y.U)(e),deploymentTooLarge:o,isEditable:Object(Q.w)(n,i),hasDeprecatedRuntime:!!Object(y.n)(e,F.a),hasCustomRuntime:Object(Q.u)(n),runtimeName:Object(Q.q)(n),fileName:Object(Q.k)(r,n),cloud9RawZip:a,hasSignedArtifact:!!s||!!c,codeSigningConfigArn:Object(y.gb)(e,"functionCodeSigningConfigArn")}}),(function(e){return{refreshRecEngine:function(){return e(Object(m.z)(["recommendationEngine"]))},setCodeSource:function(t){e(Object(z.g)("codeSourceModal")),e(Object(H.resetForm)("codeSource")),e(Object(H.setFieldValue)("codeSection","codeSource",t)),e(Object(G.m)("codeSource",!0))},goToEditableCode:function(t,n){e(Object(v.f)(t,null,null,{tab:n}))}}}),(function(e,t,n){var r=e.rootFunctionName,i=e.currTab,a=te(e,ee);return oe(oe(oe(oe({},n),a),t),{},{goToEditableCode:function(){return t.goToEditableCode(r,i)}})}))(Object(p.E)(["urlParser","functionParser","functionCodeParser","functionCodeSigningConfigArn","recommendationEngine"])(be))),ye=n(1689),Ee=n(2646),Oe=n(2647),we=n(1652),je=n(1719);var Se=Object(l.connect)((function(e){return{functionRuntimePolicy:Object(y.nb)(e,"functionRuntimePolicy")}}),(function(e){return{rollback:function(){return e(Object(m.C)())}}}))((function(e){var t,n=e.rollback,r=e.functionRuntimePolicy,a=r.loading,o=r.error;if(a)t=i.a.createElement(s.Spinner,null);else if(o)t=i.a.createElement(s.Alert,{type:"error"},o.message);else{var l;t=(null===(l=r.result)||void 0===l?void 0:l.get("previousRuntimeVersion"))||"-"}var u=[{key:i.a.createElement("span",null,i.a.createElement(c.a,{id:"editRuntimePolicy.previousRuntime.version"})),value:t},{key:i.a.createElement("span",null,i.a.createElement(c.a,{id:"editRuntimePolicy.updateRuntime.version"})),value:i.a.createElement("span",null,i.a.createElement(c.a,{id:"editRuntimePolicy.".concat(je.a.ON_FUNCTION_CHANGE,".label")}))}];return i.a.createElement(ye.b,{id:"runtimePolicy",size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"editRuntimePolicy.rollback.modal.header"}),footerProvider:function(e,t){return i.a.createElement(Ee.a,{float:"right"},i.a.createElement(s.Button,{variant:"link",onClick:t},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:a||e,onClick:n},i.a.createElement(h.a,{id:"editRuntimePolicy.rollback.modal.save"})))}},i.a.createElement(Oe.a,{size:"s"},i.a.createElement(c.a,{id:"editRuntimePolicy.rollback.modal.body"}),i.a.createElement(we.f,{flat:!0,items:u,columns:1})))})),ke=n(1662),_e=n(1673);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){var t,n=e.handler,r=e.runtime,a=e.readonly,o=e.architectures,c=e.nodeId,l=e.navigateToEditRuntimePolicy,u=e.openRuntimePolicyModal,d=e.functionRuntimePolicy,f=e.isExpandedRuntimePolicy,m=e.setExpandableRuntimePolicy,g=2,b=Object(Q.g)(r),v=Object(_e.c)().length,y=[{key:i.a.createElement(h.a,{id:"create.configureFunction.runtime.label"}),value:Object(Q.q)(r)||r},{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"config.handler.label"}),i.a.createElement(ke.a,{path:Object(Q.l)(b)})),value:n}];if(v>1&&(y.push({key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"config.code.image.architectures"}),i.a.createElement(ke.a,{path:"architectures.helpContent"})),value:o.join(", ")||_e.a.x86}),g=3),Object(J.U)("nutella")){var E=d.error,O=d.loading,w=d.result;if(E)t=i.a.createElement(s.Alert,{type:"error"},E.message);else if(O)t=i.a.createElement(s.Spinner,null);else{var j,S=null!==(j=null==w?void 0:w.toJS())&&void 0!==j?j:{},k=S.updateRuntimeOn,_=S.runtimeVersion,C=S.previousRuntimeVersion,T=[{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"editRuntimePolicy.runtime.version"})),value:_},{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"editRuntimePolicy.updateRuntime.version"})),value:Y.intl.formatMessage({id:"editRuntimePolicy.".concat(k,".label")})},{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"editRuntimePolicy.previousRuntime.version"})),value:C||"-"}];t=i.a.createElement(we.f,{flat:!0,borders:"none",items:T,columns:3})}}var P=i.a.createElement(s.Button,{onClick:l,key:"editRuntimePolicy"},i.a.createElement(h.a,{id:"editRuntimePolicy.editRuntimeVersion"})),x=i.a.createElement(s.Button,{onClick:u,key:"rollback"},i.a.createElement(h.a,{id:"editRuntimePolicy.rollback"})),R=Object(p.t)(c);return i.a.createElement(M.a,{id:"runtime",showInfoLink:!0,readonly:a,editPage:"runtime-settings",otherButtons:Object(J.U)("nutella")&&!R?[x,P]:null},i.a.createElement(Oe.a,{size:"m"},i.a.createElement(we.f,{flat:!0,items:y,columns:g}),Object(J.U)("nutella")&&i.a.createElement(Se,null),Object(J.U)("nutella")&&i.a.createElement(s.ExpandableSection,{header:Y.intl.formatMessage({id:"editRuntimePolicy.section.expandable.header"}),expanded:f,onChange:function(e){return m(e.detail.expanded)}},t)))}xe.propTypes={handler:o.a.string,nodeId:o.a.string.isRequired,readonly:o.a.bool,runtime:o.a.string,architectures:o.a.array,navigateToEditRuntimePolicy:o.a.func,openRuntimePolicyModal:o.a.func,functionRuntimePolicy:o.a.object,isExpandedRuntimePolicy:o.a.bool,setExpandableRuntimePolicy:o.a.func};var Re=Object(p.E)(["functionParser","functionRuntimePolicy"])(Object(l.connect)((function(e,t){var n,r,i,a=Object(y.N)(e,t.nodeId).get("data");return{runtime:null!==(n=a.get("runtime"))&&void 0!==n?n:null,handler:null!==(r=a.get("handler"))&&void 0!==r?r:null,architectures:(null===(i=a.get("architectures"))||void 0===i?void 0:i.toJS())||[_e.a.x86],functionName:Object(y.B)(e),qualifier:Object(y.U)(e),functionRuntimePolicy:Object(y.nb)(e,"functionRuntimePolicy"),isExpandedRuntimePolicy:Object(y.o)(e)}}),(function(e){return{openRuntimePolicyModal:function(){return e(Object(G.m)("runtimePolicy",!0))},navigateToEditRuntimePolicy:function(t,n){Object(l.batch)((function(){e(Object(m.L)(!0)),e(Object(v.f)(t,n,"runtime-policy"))}))},setExpandableRuntimePolicy:function(t){e(Object(m.t)(t))}}}),(function(e,t,n){return Te(Te(Te(Te({},n),e),t),{},{navigateToEditRuntimePolicy:function(){return t.navigateToEditRuntimePolicy(e.functionName,e.qualifier)}})}))(xe)),Ne=n(677),Ie=n.n(Ne),De=n(1665),Ae=n(1908);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e){var t=i.a.createElement(we.a,{header:i.a.createElement(h.a,{id:"layers.header.title"}),info:"layers.description"},!e.readonly&&i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{className:"edit-button",id:"layers-on-designer-edit-button",onClick:e.navigateToEdit,"data-analytics":O.WorkflowTags.edit},i.a.createElement(h.a,{id:"edit"})),i.a.createElement(s.Button,{id:"layers-on-designer-add-button",href:"#/add/layer?function=".concat(e.functionName),"data-analytics":O.WorkflowTags.add},i.a.createElement(h.a,{id:"layers.buttons.add"}))));return i.a.createElement(Ae.a,{layers:e.layers.toJS(),withVersionArn:!0,header:t,"data-analytics":e.tag,"data-analytics-type":e.tagType,nameWidth:450})}Be.propTypes={nodeId:o.a.string.isRequired,readonly:o.a.bool,tag:o.a.string,tagType:o.a.string,layers:Ie.a.list.isRequired,functionName:o.a.string.isRequired,navigateToEdit:o.a.func.isRequired};var Le=Object(l.connect)((function(e,t){return{layers:Object(y.P)(e,t.nodeId,"layers"),functionName:Object(De.b)(e).params.functionName}}),(function(e){return{navigateToEdit:function(t,n){e(Object(m.L)(!0)),e(Object(v.f)(t,n,"layers",{tab:b.N.CODE},!1))}}}),(function(e,t,n){return Fe(Fe(Fe(Fe({},n),e),t),{},{navigateToEdit:function(){return t.navigateToEdit(e.functionName,e.qualifier)}})}))(Object(p.E)(["urlParser","functionParser"])(Be)),ze=n(1699);function Ue(e){var t=e.nodes,n=e.readonly,r=new J.i(t.getIn([0,"data","arn"])).qualifier,a=n||Object(p.s)(r);return i.a.createElement(Le,{nodeId:t.getIn([0,"id"]),readonly:a,tag:e.tag,tagType:e.tagType})}Ue.propTypes={nodes:Ie.a.listOf(ze.d).isRequired,readonly:o.a.bool,tag:o.a.string.isRequired,tagType:o.a.string};var We=Object(X.tagContextHoc)(Ue);function Ve(e){var t=e.task,n=void 0===t?"urlParser":t,r=e.children,a=Object(l.useSelector)((function(e){return Object(y.nb)(e,n)})),o=a.loading,s=a.error;return o?i.a.createElement(W.a,{size:"large"}):null!=s&&s.message?i.a.createElement(V.a,{type:"error"},s.message):r}Ve.propTypes={task:o.a.string,children:o.a.node};var Ge=n(226),He=["value"];function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ke=function(e){var t=e.value,n=Je(e,He);return i.a.createElement(Ge.FormattedDate,Ze({value:t,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},n))};Ke.propTypes={value:o.a.oneOfType([o.a.string,o.a.number,o.a.instanceOf(Date)])};var Qe=Ke,Ye=n(1706),$e=n(1681);function Xe(e){var t=e.functionArn,n=e.description,r=e.onDelete;if(!t)return i.a.createElement(x.a,null,i.a.createElement("div",null));var a=new J.i(t).functionName;return i.a.createElement(ye.b,{id:"deleteCodeSigningOnFunction",size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"modal.delete.title.codeSigning"}),footerProvider:function(e,t){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:t},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:e,onClick:r},i.a.createElement(h.a,{id:"remove"})))}},i.a.createElement(c.a,{tagName:"p",id:"modal.delete.text.codeSigning",values:{description:n,functionName:a}}))}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xe.propTypes={functionArn:o.a.string,description:o.a.string,onDelete:o.a.func.isRequired};var rt=we.f.itemBuilder(),it=function(){var e=Object(l.useSelector)(y.fb),t=Object(l.useSelector)(y.eb),n=!!e||!!t;return Object(J.U)("ishikawa")&&n?[rt("codeSigning.config.profileArn.label",e),rt("codeSigning.config.jobArn.label",t)]:[]};var at=Object(p.E)(["functionCodeSigningConfig","urlParser"])(Object(l.connect)((function(e,t){return tt(tt(tt({},Object(y.nb)(e,"functionCodeSigningConfig")),t),{},{qualifier:Object(y.U)(e),functionArn:Object(y.q)(e),functionName:Object(y.B)(e)})}),(function(e){return{showDeleteCodeSigningConfigModal:function(){return e(Object(G.m)("deleteCodeSigningOnFunction",!0))},onDelete:function(t,n){return e(Object(m.j)(t,n))},navigateToEdit:function(t){e(Object(v.f)(t,null,"codeSigning"))}}}),(function(e,t,n){return tt(tt(tt(tt({},n),e),t),{},{navigateToEdit:function(){return t.navigateToEdit(e.functionName)}})}))((function(e){var t,n=e.loading,r=e.error,a=e.functionArn,o=e.forceProfilesView,c=e.result,l=e.qualifier,u=e.navigateToEdit,d=e.onDelete,f=e.showDeleteCodeSigningConfigModal,p=it(),m=!!p.length,g=r||!!l||!!o,b=null==c||null===(t=c.codeSigningConfig)||void 0===t?void 0:t.description,v=null,y=i.a.createElement(we.d,{id:"functionDetail.sections.codeSigning.empty",onClick:u}),E=l||o?null:i.a.createElement(s.Button,{id:"codeSigningRemoveButton",disabled:!c,onClick:f},i.a.createElement(h.a,{id:"codeSigning.section.remove"}));if(g&&(y=i.a.createElement(we.d,{id:"functionDetail.sections.codeSigning.empty",noButton:!0})),c&&!l){var O,w,j=(null===(O=c.codeSigningConfig.allowedPublishers)||void 0===O||null===(w=O.signingProfileVersionArns)||void 0===w?void 0:w.join(", "))||"",S=[{key:i.a.createElement(h.a,{id:"codeSigning.config.description.label"}),value:c.codeSigningConfig.description},{key:i.a.createElement(h.a,{id:"codeSigning.config.configId.label"}),value:i.a.createElement("a",{href:"#/code-signing-configurations/".concat(c.codeSigningConfig.codeSigningConfigId)},c.codeSigningConfig.codeSigningConfigId)},{key:i.a.createElement(h.a,{id:"codeSigning.config.configARN.label"}),value:c.codeSigningConfig.codeSigningConfigArn},{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"codeSigning.config.policies.untrusted.label"}),i.a.createElement(ke.a,{path:"codeSigning.policies.helpContent"})),value:c.codeSigningConfig.codeSigningPolicies.untrustedArtifactOnDeployment},{key:i.a.createElement(h.a,{id:"codeSigning.config.modified.label"}),value:i.a.createElement($e.a,{value:c.codeSigningConfig.lastModified})},{key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"codeSigning.config.allowed.label"}),i.a.createElement(ke.a,{path:"codeSigning.allowed.helpContent"})),value:j}];y=i.a.createElement(we.f,{flat:!0,columns:3,items:S}),v=i.a.createElement(Xe,{functionArn:a,description:b,onDelete:function(){return d(a,b)}})}return m&&(l||o)&&(y=i.a.createElement(we.f,{flat:!0,columns:3,items:p})),c&&(l||o)&&!m&&(y=i.a.createElement(we.d,{id:"functionDetail.sections.codeSigning.unsigned.empty",noButton:!0})),i.a.createElement(M.a,{id:"codeSigning",loading:n,error:r,showInfoLink:!0,editPage:"codeSigning",readonly:!!g,actionsButton:E},y,v)})));function ot(e){return function(e){if(Array.isArray(e))return st(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=we.f.itemBuilder((function(e){return Y.intl.formatMessage({id:"functionDetail.sections.codeProperties.label.".concat(e)})})),lt=Object(l.connect)((function(e){return{codeSha256:Object(y.s)(e),codeSize:Object(y.t)(e),lastModified:Object(y.y)(e)}}),null)(Object(p.E)(["functionParser"])((function(e){var t=e.codeSha256,n=e.codeSize,r=e.lastModified,a=it(),o=[ct("codeSize","number"==typeof n&&Object(J.p)(n)),ct("codeSha256",t&&i.a.createElement(Ye.a,{value:t})),ct("lastModified",r&&i.a.createElement(Qe,{value:r}))].concat(ot(a));return i.a.createElement(M.a,{id:"codeProperties",readonly:!0,showInfoLink:!!a.length},i.a.createElement(Ve,{task:"functionSource"},i.a.createElement(we.f,{flat:!0,items:o,columns:3})))})));function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var dt,ft=(dt="functionSource",function(e){return function(){return i.a.createElement(Ve,{task:dt},i.a.createElement(e,null))}})(Object(l.connect)((function(e){var t,n=Object(y.nb)(e,"functionParser"),r=n.loading,i=n.result;return{loading:r,isError:!r&&!i,functionArn:null!==(t=Object(y.q)(e))&&void 0!==t?t:"",isQualified:!!Object(y.U)(e),nodes:Object(y.Y)(e)}}),null)(Object(p.E)(["functionParser"])((function(e){var t=e.functionArn,n=e.loading,r=e.isQualified,a=e.isError,o=e.nodes;if(a)return null;var s={nodeId:t,readonly:r};return i.a.createElement(x.a,{cond:n},i.a.createElement(ve,ut({},s,{tag:O.WorkflowTags.code})),i.a.createElement(lt,null),i.a.createElement(Re,s),i.a.createElement("div",{id:b.J.LAYERS},i.a.createElement(We,ut({nodes:o},s,{tag:O.WorkflowTags.layers}))))})))),pt=n(1663),mt=function(e,t){return i.a.createElement(pt.d,{href:Object(J.x)("ecr","repository",t)},e)};function ht(e){var t=e.architectures,n=e.readonly,r=e.imageUri,a=i.a.createElement(s.Alert,{className:"awsui-util-mt-s"},i.a.createElement(h.a,{id:"functionDetail.sections.imageSource.image.title",tagName:"b"}),i.a.createElement(h.a,{id:"functionDetail.sections.imageSource.image.description",tagName:"p"})),o=new J.e(r),c=[{key:i.a.createElement(h.a,{id:"config.code.image.label"}),value:o?mt(r,o.repositoryName):null}],l=Object(_e.c)().length;return l>1&&c.push({key:i.a.createElement("span",null,i.a.createElement(h.a,{id:"config.code.image.architectures"}),i.a.createElement(ke.a,{path:"architectures.helpContent"})),value:t.length?t.join(", "):_e.a.x86}),i.a.createElement(M.a,{id:"imageSource",readonly:n,editPage:"image-settings"},a,i.a.createElement("div",{className:"awsui-util-mt-l"},i.a.createElement(we.f,{columns:l>1?2:1,flat:!0,borders:"none",items:c})))}ht.propTypes={architectures:o.a.array,imageUri:o.a.string.isRequired,readonly:o.a.bool,resolvedImageUri:o.a.string};var gt=Object(l.connect)((function(e){return{imageUri:Object(y.x)(e),architectures:Object(y.p)(e)||[],resolvedImageUri:Object(y.D)(e)}}),null)(Object(p.E)(["functionParser"])(ht));function bt(e){var t,n=e.columns,r=void 0===n?3:n,a=e.imageConfig,o=e.readonly,s=null!==(t=null==a?void 0:a.toJS())&&void 0!==t?t:{},c=s.entryPoint,l=s.command,u=s.workingDirectory;c=Array.isArray(c)?c.join(", "):c,l=Array.isArray(l)?l.join(", "):l,u=Array.isArray(u)?u.join(", "):u;var d=[{key:i.a.createElement(h.a,{id:"config.entryPoint.label"}),value:c||"-"},{key:i.a.createElement(h.a,{id:"config.command.label"}),value:l||"-"},{key:i.a.createElement(h.a,{id:"config.workingDirectory.label"}),value:u||"-"}];return i.a.createElement(M.a,{id:"imageConfiguration",showInfoLink:!0,readonly:o,editPage:"image-configuration"},i.a.createElement(we.f,{flat:!0,items:d,columns:r}))}bt.propTypes={columns:o.a.number,imageConfig:o.a.object,nodeId:o.a.string.isRequired,readonly:o.a.bool};var vt=Object(l.connect)((function(e,t){return{imageConfig:Object(y.N)(e,t.nodeId).get("data").getIn(["imageConfigResponse","imageConfig"],null)}}))(Object(p.E)(["functionParser"])(bt)),yt=Object(l.connect)((function(e){var t=Object(y.nb)(e,"functionParser"),n=t.loading,r=t.result;return{loading:n,isError:!n&&!r,functionArn:Object(y.q)(e),isQualified:!!Object(y.U)(e)}}),null)(Object(p.E)(["functionParser"])((function(e){var t=e.functionArn,n=e.isError,r=e.isQualified,a=e.loading;return i.a.createElement(x.a,{cond:a},!n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(gt,{readonly:r})," ",i.a.createElement(vt,{nodeId:t,readonly:r})))}))),Et=n(1935),Ot=n(1676),wt=n(1671),jt=function(e){var t=e.id,n=e.label,r=e.tag,a=e.isActive,o=e.handleClick,s=e.isMouseFocused;return i.a.createElement("button",{type:"button",className:A()(["awsui-sidebar-button",a&&"".concat("awsui-sidebar-button","-active"),s&&"".concat("awsui-sidebar-button","-focus")]),onClick:function(e){return o(e,t)},tabIndex:a===t?0:-1,"data-analytics":r,"data-testid":"sidebar-".concat(t)},n)};jt.propTypes={id:o.a.string.isRequired,label:o.a.string.isRequired,tag:o.a.string,isActive:o.a.bool,handleClick:o.a.func.isRequired,isMouseFocused:o.a.bool};var St=jt;function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ct={LEFT:37,UP:38,RIGHT:39,DOWN:40},Tt=function(e){var t,n,a=e.items,o=e.activeItemId,s=e.onClick,c=void 0===s?function(){}:s,l=e.direction,u=void 0===l?"column":l,d=e.noGutter,f=e.rightSide,p=e.persistContent,m=Object(r.useContext)(X.TagContext),h=m.tag,g=m.tagType,b=(null===(t=a[0])||void 0===t?void 0:t.id)||"",v=kt(Object(r.useState)(o||b),2),y=v[0],E=v[1],w=kt(Object(r.useState)(!0),2),j=w[0],S=w[1],k=Object(r.useRef)(null);Object(r.useEffect)((function(){o&&E(o)}),[o]),Object(r.useEffect)((function(){Object(O.logTab)("sidebar_tab",y)}),[y]);var _=function(e){if(Object.values(Ct).includes(e.keyCode)&&(e.preventDefault(),S(!1),a.length)){var t=Array.from(k.current.children).reduce((function(e,t){return e.concat(Array.from(t.children))}),[]),n=a.findIndex((function(e){return e.id===y}));if(e.keyCode===Ct.UP||e.keyCode===Ct.LEFT){var r=((n-1)%a.length+a.length)%a.length;E(a[r].id),t[r].focus()}else if(e.keyCode===Ct.DOWN||e.keyCode===Ct.RIGHT){var i=(n+1)%a.length;E(a[i].id),t[i].focus()}}},C=function(e,t){e.detail={activeItemId:t},S(!0),o||E(t),c(e)},T=function(e,t){return i.a.createElement("div",{className:A()("col-xxxs-12",{"col-xxs-10":"row"!==u,hide:e})},t)},P=p?a.map((function(e){var t=e.id,n=e.content;return i.a.createElement(i.a.Fragment,{key:t},T(t!==y,n))})):T(!1,null===(n=a.filter((function(e){return e.id===y}))[0])||void 0===n?void 0:n.content);return i.a.createElement("div",{className:"awsui-grid"},i.a.createElement("div",{className:A()(["awsui-row",d&&"awsui-util-no-gutters"]),id:"awsui-sidebar-control"},a.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:A()("col-xxxs-12",{"col-xxs-2":"row"!==u}),"data-analytics":h,"data-analytics-type":g},i.a.createElement("ul",{className:A()("row"===u?"awsui-sidebar-ul-row awsui-util-f-l":"awsui-sidebar-ul-col"),ref:k},a.map((function(e){var t=e.id,n=e.label,r=e.tag;return i.a.createElement("li",{key:t,tabIndex:y===t?0:-1,onKeyDown:_},i.a.createElement(St,{id:t,label:n,tag:r,isActive:y===t,handleClick:C,isMouseFocused:j}))}))),"row"===u&&f&&i.a.createElement("div",{className:"awsui-util-f-r"},f)),P)))};Tt.propTypes={items:o.a.arrayOf(o.a.shape({id:o.a.string,tag:o.a.string,content:o.a.node,label:o.a.string})).isRequired,activeItemId:o.a.string,onClick:o.a.func,direction:o.a.string,noGutter:o.a.bool,rightSide:o.a.node,persistContent:o.a.bool};var Pt=Tt,xt=n(1853),Rt=n(1767),Nt=function(e){var t=e.functionName;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"embedded-dashboard-header"},i.a.createElement("div",null,i.a.createElement("h2",null,i.a.createElement(h.a,{id:"functionDetail.monitoring.xray.title"}),i.a.createElement(ke.a,{path:"functions.monitor.traces"})),i.a.createElement(h.a,{tagName:"p",id:"functionDetail.monitoring.xray.description"}))),i.a.createElement(Rt.a,{method:"getServiceLensQuery",functionName:t,widgetsPerRow:1}))};Nt.propTypes={functionName:o.a.string};var It=Object(l.connect)((function(e){return{functionName:Object(y.B)(e)}}),null)(Nt),Dt=function(e){return"/cloudwatch/home?region=".concat(Object(J.N)(),"#logStream:group=%252Faws%252Flambda%252F").concat(encodeURIComponent(e))},At=function(e){var t=e.functionName,n=e.isQualifiersDataLoaded,r=e.qualifier,a=e.qualifiers,o=e.descriptionId,s=i.a.createElement(Rt.a,{method:"getInsightsQueries",functionName:t,qualifier:r,qualifiers:a,widgetsPerRow:1}),l=i.a.createElement("h2",null,i.a.createElement(h.a,{id:"functionDetail.monitoring.cloudWatch.insights.title"}),i.a.createElement(ke.a,{path:"functions.monitor.logs"}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"embedded-dashboard-header"},l,i.a.createElement(c.a,{tagName:"p",id:"functionDetail.monitoring.cloudWatch.insights.description.".concat(o),values:{qualifier:r}})),n&&s)};At.propTypes={functionName:o.a.string,isQualifiersDataLoaded:o.a.bool,qualifier:o.a.string,qualifiers:o.a.object,descriptionId:o.a.string};var Mt=Object(l.connect)((function(e){var t=Object(y.A)(e),n=t.qualifier,r=t.isHub,i=Object(xt.c)(r,n);return{functionName:Object(y.B)(e),isQualifiersDataLoaded:Object(y.H)(e),qualifier:n,qualifiers:Object(y.V)(e),descriptionId:i}}),null)(Object(p.E)(["functionQualifiersSource"])(At)),Ft=n(1737);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vt(e);if(t){var i=Vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){if(t&&("object"===qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wt(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ht=Object(X.tagContextHoc)(Pt),Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(o,e);var t,n,r,a=zt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Gt(Wt(t=a.call(this,e)),"getMonitoringItems",(function(){return[{id:b.B.METRICS,content:i.a.createElement(xt.b,null),label:Y.intl.formatMessage({id:"functionDesigner.tab.monitor.metrics"})},{id:b.B.LOGS,content:i.a.createElement(Mt,null),label:Y.intl.formatMessage({id:"functionDesigner.tab.monitor.logs"})},{id:b.B.TRACES,content:i.a.createElement(It,null),label:Y.intl.formatMessage({id:"functionDesigner.tab.monitor.traces"})}].filter((function(e){var n=e.id;return t.state.items.find((function(e){return e.id===n}))}))})),Gt(Wt(t),"getLambdaAtEdgeAlert",(function(){var e=t.props,n=e.cloudfrontNode,r=e.hasCloudfrontTrigger,a=e.functionArn;return n&&r&&i.a.createElement("div",{className:"awsui-util-mb-s"},i.a.createElement(s.Alert,null,i.a.createElement(c.a,{id:"functionDetail.monitoring.lambdaAtEdge.blurb",values:{link:n["x-edge-monitoring-link"].format(a)}})))})),Gt(Wt(t),"getCloudWatchLogsAlert",(function(){var e=t.props.missingCloudWatchLogsResult;return e&&Object(O.logEvent)(O.EVENT_NAMES.LOG_PERMISSIONS_ALERT_APPEAR),e&&i.a.createElement("div",{className:"awsui-util-mv-s","data-testid":"missing-logs-alert"},i.a.createElement(s.Alert,{dismissible:!0,onDismiss:function(){return Object(O.logEvent)(O.EVENT_NAMES.LOG_PERMISSIONS_ALERT_DISMISS)}},i.a.createElement(h.a,{id:"recEngine.logPermissions.title",tagName:"b"}),i.a.createElement(c.a,{id:"recEngine.logPermissions.description",values:{result:e.get(0)},tagName:"p"})))})),t.state={items:[{id:b.B.METRICS},Object(J.U)("sarmentose")&&{id:b.B.LOGS},e.isTracerAvailable&&e.isHub&&{id:b.B.TRACES}].filter((function(e){return!!e}))},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props.selectedSidebarItem;this.state.items.find((function(t){return t.id===e}))||this.props.resetSelectedSidebarItem(),this.props.showHelp()}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedSidebarItem,r=t.functionName,a=t.isTracerAvailable,o=t.isLambdaInsightsAvailable,c=t.isCodeGuruAvailable,l=this.getLambdaAtEdgeAlert(),u=this.getCloudWatchLogsAlert(),d="/cloudwatch/home?region=".concat(Object(J.N)(),"#servicelens:traces"),f="/cloudwatch/home?region=".concat(Object(J.N)(),"#lambda-insights:functions/").concat(r),p="/codeguru/profiler?region=".concat(Object(J.N)()),m=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{icon:"external",iconAlign:"right",href:Dt(r),target:"_blank"},i.a.createElement(h.a,{id:"functionDetail.monitoring.cloudWatch.logsLink"})),a&&i.a.createElement(s.Button,{icon:"external",iconAlign:"right",href:d,target:"_blank"},i.a.createElement(h.a,{id:"functionDetail.monitoring.serviceLens.link"})),o&&i.a.createElement(s.Button,{icon:"external",iconAlign:"right",href:f,target:"_blank"},i.a.createElement(h.a,{id:"functionDetail.monitoring.lambdaInsights.logsLink"})),c&&i.a.createElement(s.Button,{icon:"external",iconAlign:"right",href:p,target:"_blank"},i.a.createElement(h.a,{id:"functionDetail.monitoring.codeguru.link"})));return i.a.createElement("div",null,u,l,i.a.createElement(Ht,{items:this.getMonitoringItems(),persistContent:!0,direction:"row",rightSide:m,activeItemId:n,onClick:function(t){var n=t.detail;return e.props.setSelectedSidebarItem(n.activeItemId)},tag:O.WorkflowTags.monitoringSidebar}))}}])&&Bt(t.prototype,n),r&&Bt(t,r),o}(i.a.Component);Gt(Zt,"propTypes",{cloudfrontNode:o.a.object,functionArn:o.a.string.isRequired,hasCloudfrontTrigger:o.a.bool.isRequired,isLatest:o.a.bool,functionName:o.a.string,missingCloudWatchLogsResult:Ie.a.list,qualifier:o.a.string,selectedSidebarItem:o.a.string.isRequired,isHub:o.a.bool,isLambdaInsightsAvailable:o.a.bool.isRequired,isCodeGuruAvailable:o.a.bool.isRequired,isTracerAvailable:o.a.bool.isRequired,showHelp:o.a.func.isRequired,setSelectedSidebarItem:o.a.func.isRequired,resetSelectedSidebarItem:o.a.func.isRequired});var Jt=Object(l.connect)((function(e){var t,n=!1,r=Object(y.gb)(e,"relationParser");r&&(n=r.get("nodes").some((function(e){return"trigger"===e.get("type")&&"cloudfront"===e.getIn(["data","id"])})));var i=Object(y.r)(e),a=Object(y.A)(e),o=a.isLatest,s=a.qualifier,c=a.isHub;return{cloudfrontNode:wt.c.getNodes(e).cloudfront,functionArn:i,isLatest:o,hasCloudfrontTrigger:n,functionName:Object(y.B)(e),missingCloudWatchLogsResult:Object(y.n)(e,Et.a),qualifier:s,selectedSidebarItem:null===(t=wt.c.getSelectedSidebarItem(e))||void 0===t?void 0:t.get("monitoringTab"),isHub:c,isLambdaInsightsAvailable:!!Object(Ft.f)(e).find((function(e){return"lambdaInsights"===e.id})),isCodeGuruAvailable:!!Object(Ft.f)(e).find((function(e){return"codeGuru"===e.id})),isTracerAvailable:!!Object(Ft.f)(e).find((function(e){return"tracer"===e.id}))}}),(function(e){return{showHelp:function(){return e(Object(Ot.m)("functionDetail.tab.monitoring.helpContent"))},setSelectedSidebarItem:function(t){return e(Object(Ot.p)("monitoringTab",t))},resetSelectedSidebarItem:function(){return e(Object(Ot.f)("monitoringTab"))}}}))(Object(p.E)(["urlParser","functionParser","simulateRoleForExtensions","relationParser","recommendationEngine"])(Zt)),Kt=n(1838),Qt=n(436),Yt=n(1955),$t=n(55);function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=an(e);if(t){var i=an(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rn(this,n)}}function rn(e,t){if(t&&("object"===Xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(o,e);var t,n,r,a=nn(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this,e,t)).state={eventName:null,eventNameErrorMessage:null},n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.showHelp,n=e.dispatch,r=e.modalCreate,i=e.setEventIdToInvoke,a=e.templateEventId,o=e.configurationOption;t(),Object(J.U)("chidori")&&n(q.g.listSavedTestEvents()),r&&a&&(Object(J.U)("mandarinquat1")?i(Object(B.f)()):i(a));var s=O.WorkflowTags.testing,c=O.WorkflowTags.testEventConfiguration;O.panorama.logWorkflowEvent({tagPath:this.context.nextTag([s,c]),eventDetail:o})}},{key:"componentDidUpdate",value:function(e){this.props.modalCreate&&e.templateEventId!==this.props.templateEventId&&(Object(J.U)("mandarinquat1")?this.props.setEventIdToInvoke(Object(B.f)()):this.props.setEventIdToInvoke(this.props.templateEventId));var t=this.props,n=t.savedEventId,r=t.modalCreate,i=t.dirtyEventCode,a=t.eventIdToInvoke,o=t.setEventIdToInvoke;if(!r&&i&&Object(J.U)("mandarinquat1")&&n&&Object(B.e)(n)!==a&&o(Object(B.e)(n)),e.configurationOption!==this.props.configurationOption){var s=O.WorkflowTags.testing,c=O.WorkflowTags.testEventConfiguration;O.panorama.logWorkflowEvent({tagPath:this.context.nextTag([s,c]),eventDetail:this.props.configurationOption})}}},{key:"resetEventState",value:function(){this.setState({eventName:null,eventNameErrorMessage:null}),this.props.dispatch(q.g.updateEventModal({hasParseError:!1}))}},{key:"validateTestEvent",value:function(){var e=!1;try{var t;JSON.parse(null!==(t=this.props.dirtyEventCode)&&void 0!==t?t:this.props.codeForEventInDropdown)}catch(t){e=!0}return e&&this.props.dispatch(q.g.updateEventModal({hasParseError:e})),!e}},{key:"formatTestEvent",value:function(){var e,t=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown,n=!1;try{t=Object(J.s)(t,!0)}catch(e){n=!0}this.props.dispatch(q.g.updateEventModal({dirtyEventCode:t,hasParseError:n}))}},{key:"saveSampleEvent",value:function(){if(this.props.modalCreate){if(this.state.eventNameErrorMessage)return;if(null===this.state.eventName)return void this.eventNameChanged({detail:{value:""}})}if(this.validateTestEvent()){Object(O.logEvent)(O.EVENT_NAMES.TESTEVENT_FD("save"));var e=this.props,t=e.functionName,n=e.qualifier;this.props.modalCreate?this.props.dispatch(q.g.testingTabSaveTestEvent(t,n,this.state.eventName,this.props.dirtyEventCode||this.props.codeForEventInDropdown)):this.props.dispatch(q.g.testingTabSaveTestEvent(t,n,this.props.savedEventId,this.props.dirtyEventCode)),this.resetEventState()}}},{key:"eventRadioGroupChanged",value:function(e){e.detail.value===q.b&&this.props.setEventIdToInvoke(this.props.savedEventId),this.props.dispatch(q.g.changeConfigurationOption(e.detail.value))}},{key:"templateChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id,!0))}},{key:"savedEventChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id,!1)),this.props.setEventIdToInvoke(e.detail.selectedOption.id)}},{key:"eventNameChanged",value:function(e){var t=Kt.a.validate(e.detail.value),n=t.valid,r=t.errors;this.setState({eventNameErrorMessage:n?null:r[0].message,eventName:e.detail.value}),this.props.setEventIdToInvoke(e.detail.value)}},{key:"testFunction",value:function(){var e;if(this.validateTestEvent()){var t=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown;this.props.dispatch(q.g.testingTabInvokeTest(t,this.props.configurationOption))}}},{key:"codeChanged",value:function(e){this.props.dispatch(q.g.updateEventModal({dirtyEventCode:e,hasParseError:!1}))}},{key:"delete",value:function(){this.props.dispatch(q.g.deleteTestEvent(this.props.functionName,this.props.savedEventId)),this.resetEventState()}},{key:"showEventModal",value:function(){this.props.openEventModal()}},{key:"saveAsNew",value:function(){this.props.dispatch(q.g.testingTabSaveTestAsNew(this.props.functionName))}},{key:"createTest",value:function(){this.props.dispatch(q.g.testingTabCreateNewTest()),this.props.visit("/functions/".concat(this.props.functionName,"/create/test-event"))}},{key:"selectTemplate",value:function(){this.props.dispatch(q.g.updateEventModal({dirtyEventCode:""})),this.props.visit("/functions/".concat(this.props.functionName,"/edit/test-template"))}},{key:"tableSelectionChange",value:function(e){this.props.dispatch(q.g.updateSelectedItem(e.detail.selectedItems[0]))}},{key:"loadTestEventFromTable",value:function(){this.props.dispatch(q.g.testingTabLoadTestEvent(this.props.selectedTableItem.eventName))}},{key:"testEventFromTable",value:function(){this.props.dispatch(q.g.testingTabInvokeTestFromTable(this.props.selectedTableItem.eventName,this.props.configurationOption))}},{key:"deleteTestFromTable",value:function(){var e=this.props.selectedTableItem;this.props.dispatch(q.g.testingTabDeleteTest(e.eventName,e.tagKey))}},{key:"saveTestEvent",value:function(){var e=this.props.savedEventId;if(this.validateTestEvent()){var t=this.props.savedTestEvents.find((function(t){return t.eventName===e})).description;this.props.dispatch(q.g.testingTabUpdateTest(e,this.props.dirtyEventCode,t))}}},{key:"render",value:function(){var e,t,n,r,a,o,l,u,d,f,p,m,g,b,v=this,y=function(e){return Y.intl.formatMessage({id:e})},E=this.delete.bind(this),w=this.props,j=w.groupedSampleEvents,S=w.hasParseError,k=w.isEventLoading,_=w.isTestButtonDisabled,C=w.isInvoking,T=w.isSaving,P=w.loading,R=w.error,N=w.savedEventId,I=w.showExecutionResults,D=P||k||S||!!R,A=j.filter((function(e){return e.label===$t.r})).map((function(e){return sn(sn({},e),{},{label:y(e.id)})})),M=j.map((function(e){return sn(sn({},e),{},{label:y(e.id)})})),F=i.a.createElement(s.Button,{className:"awsui-util-ml-s",variant:"icon",icon:"refresh",onClick:function(){return v.props.dispatch(q.g.refreshTestEvents(v.props.functionName))}}),B=i.a.createElement(s.FormField,{id:"savedEvent",label:y("functionDesigner.tab.testing.testEvent.saved"),secondaryControl:F},i.a.createElement(s.Select,{filteringType:(null===(e=A[0])||void 0===e||null===(t=e.options)||void 0===t?void 0:t.length)>1?"auto":"none",options:A,onChange:this.savedEventChanged.bind(this),selectedOption:{label:this.props.savedEventId,id:this.props.savedEventId}})),z=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.FormField,{id:"eventTemplate",stretch:!0,label:y("functionDesigner.tab.testing.testEvent.eventTemplate")},i.a.createElement(s.Select,{filteringType:"auto",options:M,onChange:this.templateChanged.bind(this),selectedOption:{label:this.props.templateEventId,id:this.props.templateEventId}})),i.a.createElement(s.FormField,{id:"eventName",stretch:!0,label:y("functionDesigner.tab.testing.testEvent.eventName"),errorText:this.state.eventNameErrorMessage},i.a.createElement(s.Input,{placeholder:"MyEventName",onInput:this.eventNameChanged.bind(this),value:this.state.eventName}))),U=Object(J.J)({id:"functionDesigner.tab.testing.testEvent.radio.".concat(q.a)}),W=Object(J.J)({id:"functionDesigner.tab.testing.testEvent.radio.".concat(q.b)});Object(J.U)("chidori")?(o=!this.props.savedEventId,l=this.saveTestEvent.bind(this),u=this.selectTemplate.bind(this),d="functionDesigner.tab.testing.testEvent.actions.save",f=this.createTest.bind(this),p=N||Y.intl.formatMessage({id:"functionDesigner.tab.testing.testEvent.header"}),m=this.props.savedTestEvents.toArray()):(o=D||!this.props.dirtyEventCode||this.props.dirtyEventCode===this.props.codeForEventInDropdown,l=this.saveSampleEvent.bind(this),u=null,d="functionDesigner.tab.testing.testEvent.actions.saveChanges",f=this.showEventModal.bind(this),p=i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.header"}),m=[{eventName:"event 1"},{eventName:"event 2"},{eventName:"event 3"}],this.props.modalCreate&&(o=(null===(g=A[0])||void 0===g||null===(b=g.options)||void 0===b?void 0:b.length)>9||D));var V=i.a.createElement(we.a,{header:p},this.props.modalCreate?null:i.a.createElement(s.Button,{onClick:E,"data-analytics":O.WorkflowTags.delete},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.delete"})),Object(J.U)("chidori")&&i.a.createElement(s.Button,{onClick:u,disabled:T},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.selectTemplate"})),i.a.createElement(s.Button,{onClick:function(){return v.formatTestEvent()},disabled:T,"data-analytics":O.WorkflowTags.formatJson},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.format"})),i.a.createElement(s.Button,{onClick:l,disabled:o,loading:T,"data-analytics":O.WorkflowTags.save},i.a.createElement(h.a,{id:d})),Object(J.U)("chidori")?i.a.createElement(s.Button,{onClick:function(){return v.saveAsNew()}},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.saveAsNew"})):null,i.a.createElement(s.Button,{key:"invoke",variant:"primary",onClick:function(){return v.testFunction()},loading:C,disabled:_||S,"data-analytics":O.WorkflowTags.invoke,"data-testid":"testTabInvokeButton"},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.test"}))),G=null!==(n=this.props.dirtyEventCode)&&void 0!==n?n:this.props.codeForEventInDropdown,H=i.a.createElement(we.a,{header:i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.header"})},i.a.createElement(s.Button,{disabled:this.props.isTableItemNotSelected,onClick:function(){return v.loadTestEventFromTable()}},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.actions.edit"})),i.a.createElement(s.Button,{disabled:this.props.isTableItemNotSelected,onClick:function(){return v.deleteTestFromTable()}},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.actions.delete"})),i.a.createElement(s.Button,{onClick:f},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.actions.create"})),i.a.createElement(s.Button,{disabled:this.props.isTableItemNotSelected,onClick:function(){return v.testEventFromTable()}},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.actions.invoke"}))),Z=[{id:"eventName",header:i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.columns.eventName"}),minWidth:"140px",cell:function(e){return e.eventName}}],K=Object(J.U)("chidori")?null:i.a.createElement("div",null,this.props.hasParseError?i.a.createElement(s.Alert,{type:"error"},Object(J.J)({id:"functionDesigner.tab.testing.testEvent.jsonParseError"})):null,(null===(r=A[0])||void 0===r||null===(a=r.options)||void 0===a?void 0:a.length)>9&&"create"===this.props.configurationOption?i.a.createElement(s.Alert,{type:"error"},Object(J.J)({id:"functionDesigner.tab.testing.testEvent.exceedNumError"})):null,i.a.createElement(L.b,{scope:"event-modal"}),i.a.createElement(c.a,{id:"functionDesigner.tab.testing.testEvent.text"}),i.a.createElement(s.FormField,{id:"createEditRadioGroup",stretch:!0},i.a.createElement(s.RadioGroup,{onChange:this.eventRadioGroupChanged.bind(this),value:this.props.configurationOption,items:[{value:q.a,label:U},{value:q.b,label:W,disabled:!this.props.hasSavedEvents}]})),this.props.modalCreate?z:B);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt.a,{className:I?"awsui-util-mb-l":""}),i.a.createElement(we.c,{id:"testEventContainer",header:V,tag:O.WorkflowTags.testing,loading:P,error:R},i.a.createElement(s.ColumnLayout,null,i.a.createElement("div",{"data-awsui-column-layout-root":"true"},K,i.a.createElement(x.a,{cond:k,overlay:!0},i.a.createElement("div",{"data-analytics":O.WorkflowTags.editor},i.a.createElement(Qt.a,{id:"eventCode",mode:"json",value:G,loading:!0,onChange:function(e){v.codeChanged(null!=e?e:G)}})),this.props.hasParseError?i.a.createElement("div",{className:"awsui-util-mt-s"},i.a.createElement(s.Alert,{type:"error"},Object(J.J)({id:"functionDetail.testEvents.modal.jsonParseError"}))):null)))),Object(J.U)("chidori")?i.a.createElement(s.Table,{loadingText:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.loading"}),columnDefinitions:Z,items:m,wrapLines:!1,features:["filtering","pagination","selection","sorting"],header:H,loading:this.props.isTableLoading,noMatch:i.a.createElement("div",{className:"awsui-util-t-c"},i.a.createElement("div",{className:"awsui-util-pt-s awsui-util-mb-xs"},i.a.createElement("b",null,i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.searchResults.noMatch"}))),i.a.createElement("p",{className:"awsui-util-mb-s"},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.searchResults.cantFindMatch"})),i.a.createElement("div",{className:"awsui-util-mb-m"},i.a.createElement(s.Button,null,i.a.createElement(h.a,{id:"functionDesigner.tab.testing.savedEvents.actions.clearFilter"})))),"data-analytics":O.WorkflowTags.testing},i.a.createElement(s.TableFiltering,{filteringPlaceholder:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.filtering.placeHolder"})}),i.a.createElement(s.TablePagination,{pageSize:5}),i.a.createElement(s.TableSorting,{sortingColumn:"variable",sortableColumns:[{id:"eventName"}]}),i.a.createElement(s.TableSelection,{selectionType:"single",trackBy:"eventName",onSelectionChange:function(e){return v.tableSelectionChange(e)},keepSelection:!0}),i.a.createElement(s.TablePreferences,{title:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.preferences.title"}),confirmLabel:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.preferences.confirm"}),cancelLabel:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.preferences.cancel"})},i.a.createElement(s.TableWrapLines,{label:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.wrapLines.label"}),description:Y.intl.formatMessage({id:"functionDesigner.tab.testing.savedEvents.wrapLines.description"})}))):null)}}])&&en(t.prototype,n),r&&en(t,r),o}(i.a.Component);cn(ln,"contextType",X.TagContext),cn(ln,"propTypes",{savedEventId:o.a.string,codeForEventInDropdown:o.a.string,dirtyEventCode:o.a.string,hasParseError:o.a.bool,loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),isSaving:o.a.bool.isRequired,isEventLoading:o.a.bool.isRequired,isTestButtonDisabled:o.a.bool.isRequired,showExecutionResults:o.a.bool.isRequired,isInvoking:o.a.bool.isRequired,groupedSampleEvents:o.a.array,eventsById:o.a.object,modalCreate:o.a.bool,hasSavedEvents:o.a.bool,configurationOption:o.a.string,templateEventId:o.a.string,eventIdToInvoke:o.a.string,functionName:o.a.string,qualifier:o.a.string,eventModalOpen:o.a.bool,dispatch:o.a.func.isRequired,showHelp:o.a.func.isRequired,setEventIdToInvoke:o.a.func.isRequired,savedTestEvents:Ie.a.listOf(a.object),selectedTableItem:o.a.object,isTableLoading:o.a.bool,isTableItemNotSelected:o.a.bool,visit:o.a.func.isRequired,selectedFunctionArn:o.a.string,openEventModal:o.a.func.isRequired});var un=Object(p.E)(["testingSource","testEventTemplatesSource"])(Object(l.connect)((function(e,t){var n=new J.i(Object(y.q)(e)||""),r=n.functionName,i=n.qualifier,a=n.arn;return sn({savedTestEvents:q.i.getTestingTabSavedEvents(e),selectedTableItem:q.i.getEventModalState(e,"testingTabSelectedEvent"),isTableLoading:q.i.getEventModalState(e,"testingTabIsTableLoading"),isTableItemNotSelected:q.i.getIsTableItemNotSelected(e),savedEventId:q.i.getEventModalState(e,"savedEventId"),codeForEventInDropdown:q.i.getCodeToShow(e),dirtyEventCode:q.i.getDirtyEventCode(e),hasParseError:q.i.getEventModalState(e,"hasParseError"),groupedSampleEvents:q.i.getGroupedSampleEvents(e),loading:q.i.getEventModalState(e,"loading"),isSaving:q.i.getEventModalState(e,"isSaving"),isEventLoading:q.i.getIsEventLoading(e),isTestButtonDisabled:Object(y.L)(e),showExecutionResults:q.i.getShowExecutionResults(e),isInvoking:q.i.getIsInvoking(e),eventsById:q.i.getEventsById(e),modalCreate:q.i.getEventModalState(e,"configurationOption")===q.a,configurationOption:q.i.getEventModalState(e,"configurationOption"),templateEventId:q.i.getEventModalState(e,"templateEventId"),hasSavedEvents:q.i.getHasSavedEvents(e),eventIdToInvoke:q.i.getEventIdToInvoke(e),selectedFunctionArn:a,functionName:r,qualifier:i,eventModalOpen:q.i.getEventModalOpen(e)},t)}),(function(e){return{showHelp:function(){return e(Object(Ot.m)("functionDesigner.tab.testing.helpContent"))},setEventIdToInvoke:function(t){return e(q.g.setEventIdToInvoke(t))},dispatch:e,openEventModal:function(){return e(q.g.toggleEventModal())},visit:function(t,n){return e(Object(f.c)(t,n))}}}))(ln));function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vn(e);if(t){var i=vn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(e,t){if(t&&("object"===dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bn(e)}function bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var En=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(o,e);var t,n,r,a=hn(o);function o(){var e;fn(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(bn(e=a.call.apply(a,[this].concat(n))),"handleEventTypeChanges",(function(t){var n=t.detail.value;e.props.dispatch(q.g.updateEventType(n))})),e}return t=o,(n=[{key:"render",value:function(){var e=function(e){return Y.intl.formatMessage({id:e})},t=e("functionDetail.testEvents.shared.form.eventType.shared"),n=e("functionDetail.testEvents.shared.form.eventType.user"),r=i.a.createElement(pt.b,{id:"functionDetail.testEvents.shared.form.eventType.shared.desc",href:"https://docs.aws.amazon.com/lambda/latest/dg/testing-functions.html"}),a=i.a.createElement(pt.b,{id:"functionDetail.testEvents.shared.form.eventType.user.desc",href:"https://docs.aws.amazon.com/lambda/latest/dg/testing-functions.html"});return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.FormField,{stretch:!0,label:e("functionDetail.testEvents.modal.eventName"),errorText:this.props.eventNameErrorMessage},i.a.createElement(s.Input,{placeholder:"MyEventName",onInput:this.props.eventNameChanged,value:this.props.eventName})),i.a.createElement(s.FormField,{stretch:!0,id:"eventType",label:e("functionDetail.testEvents.shared.form.eventType.label")},i.a.createElement(s.RadioGroup,{onChange:this.handleEventTypeChanges,value:this.props.eventType,items:[{value:q.f,label:n,description:a},{value:q.e,label:t,description:r}]})))}}])&&pn(t.prototype,n),r&&pn(t,r),o}(i.a.Component),On=Object(l.connect)((function(e){return{eventType:q.i.getEventModalState(e,"eventType")}}),(function(e){return{dispatch:e}}))(En);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rn(e);if(t){var i=Rn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xn(this,n)}}function xn(e,t){if(t&&("object"===wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(o,e);var t,n,r,a=Pn(o);function o(){return _n(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"savedEventChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id)),this.props.setEventIdToInvoke(e.detail.selectedOption.id)}},{key:"render",value:function(){var e=this,t=function(e){return Y.intl.formatMessage({id:e})},n=this.props.groupedSampleEvents.filter((function(e){return e.label===q.d||e.label===q.c})).map((function(e){return Sn(Sn({},e),{},{label:t("functionDetail.testEvents.saved"===e.id?"functionDetail.testEvents.user":e.id)})})),r=i.a.createElement(s.Button,{className:"awsui-util-ml-s",variant:"normal",icon:"refresh",loading:this.props.loading||this.props.isEventLoading,onClick:function(){return e.props.dispatch(q.g.refreshTestEvents(e.props.functionName))}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.FormField,{label:t("functionDetail.testEvents.modal.eventName"),secondaryControl:r},i.a.createElement(s.Select,{filteringType:n.length>1?"auto":"none",options:n,onChange:this.savedEventChanged.bind(this),selectedOption:{label:this.props.savedEventId,id:this.props.savedEventId}})))}}])&&Cn(t.prototype,n),r&&Cn(t,r),o}(i.a.Component),In=Object(l.connect)((function(e){var t=new J.i(Object(y.q)(e)||"").functionName;return{groupedSampleEvents:q.i.getGroupedSampleSharedEvents(e),templateEventId:q.i.getEventModalState(e,"templateEventId"),functionName:t,savedEventId:q.i.getEventModalState(e,"savedEventId"),isEventLoading:q.i.getIsEventLoading(e),loading:q.i.getEventModalState(e,"loading")}}),(function(e){return{setEventIdToInvoke:function(t){return e(q.g.setEventIdToInvoke(t))},dispatch:e}}))(Nn);function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wn(e);if(t){var i=Wn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zn(this,n)}}function zn(e,t){if(t&&("object"===Dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Un(e)}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn=i.a.createElement(s.Alert,{type:"error",dismissible:!0},i.a.createElement(pt.b,{id:"functionDetail.testEvents.shared.form.noPermission",href:"https://docs.aws.amazon.com/lambda/latest/dg/testing-functions.html"}));var Hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(o,e);var t,n,r,a=Ln(o);function o(){var e;Fn(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vn(Un(e=a.call.apply(a,[this].concat(n))),"handleEventConfigurationOptions",(function(t){var n=t.detail.value;e.props.dispatch(q.g.changeConfigurationOption(n))})),e}return t=o,(n=[{key:"templateChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id))}},{key:"codeChanged",value:function(e){this.props.dispatch(q.g.updateEventModal({dirtyEventCode:e,hasParseError:!1}))}},{key:"formatTestEvent",value:function(){var e,t=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown,n=!1;try{t=Object(J.s)(t,!0)}catch(e){n=!0}this.props.dispatch(q.g.updateEventModal({dirtyEventCode:t,hasParseError:n}))}},{key:"render",value:function(){var e,t=this,n=Object(J.J)({id:"functionDetail.testEvents.shared.modal.radio.".concat(q.a)}),r=Object(J.J)({id:"functionDetail.testEvents.shared.modal.radio.".concat(q.b)}),a=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown,o=this.props.configurationOption===q.a,c=this.formatTestEvent.bind(this),l=this.props.groupedSampleEvents.map((function(e){return Mn(Mn({},e),{},{label:Object(J.J)({id:"functionDetail.testEvents.saved"===e.id?"functionDetail.testEvents.user":e.id})})})),u=i.a.createElement(On,{eventNameChanged:this.props.eventNameChanged,eventName:this.props.eventName,eventNameErrorMessage:this.props.eventNameErrorMessage}),d=i.a.createElement(we.a,{header:Object(J.J)({id:"functionDetail.testEvents.shared.form.eventJson"})},i.a.createElement(s.Button,{disabled:this.props.loading,onClick:c,"data-analytics":O.WorkflowTags.formatJson},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.formatJson"}))),f=i.a.createElement(s.FormField,{stretch:!0,label:Object(J.J)({id:"functionDetail.testEvents.modal.eventTemplate"})},i.a.createElement(s.Select,{filteringType:"auto",options:l,onChange:this.templateChanged.bind(this),selectedOption:{label:this.props.templateEventId,id:this.props.templateEventId}}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.FormField,{stretch:!0,label:Object(J.J)({id:"functionDetail.testEvents.shared.modal.radio.label"})},i.a.createElement(s.Tiles,{onChange:this.handleEventConfigurationOptions,value:this.props.configurationOption,items:[{value:q.a,label:n},{value:q.b,label:r,disabled:!this.props.hasSavedEvents}]})),o?f:i.a.createElement(In,null),i.a.createElement(we.c,{id:"testEventCodeContainer",header:d,tag:O.WorkflowTags.testing},i.a.createElement(s.ColumnLayout,null,i.a.createElement("div",{"data-awsui-column-layout-root":"true"},i.a.createElement(x.a,{cond:this.props.isEventLoading,overlay:!0},i.a.createElement("div",{"data-analytics":O.WorkflowTags.editor},i.a.createElement(Qt.a,{id:"eventCode",mode:"json",value:a,onChange:function(e){t.codeChanged(null!=e?e:a)},stretch:!0})))))),o&&u,this.props.hasParseError&&i.a.createElement("div",{className:"awsui-util-mt-s"},i.a.createElement(s.Alert,{type:"error",dismissible:!0},Object(J.J)({id:"functionDetail.testEvents.modal.jsonParseError"}))))}}])&&qn(t.prototype,n),r&&qn(t,r),o}(i.a.Component),Zn=Object(X.tagContextHoc)(Object(l.connect)((function(e){var t=new J.i(Object(y.q)(e)||"").functionName;return{codeForEventInDropdown:q.i.getSharedCodeToShow(e),dirtyEventCode:q.i.getDirtyEventCode(e),hasParseError:q.i.getEventModalState(e,"hasParseError"),configurationOption:q.i.getEventModalState(e,"configurationOption"),hasSavedEvents:q.i.getHasUserSharedSavedEvents(e),loading:q.i.getEventModalState(e,"loading"),isEventLoading:q.i.getIsEventLoading(e),groupedSampleEvents:q.i.getGroupedSampleSharedEvents(e),templateEventId:q.i.getEventModalState(e,"templateEventId"),functionName:t}}),(function(e){return{dispatch:e}}))(Hn),!1);function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xn(e);if(t){var i=Xn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $n(this,n)}}function $n(e,t){if(t&&("object"===Jn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er,tr,nr,rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(o,e);var t,n,r,a=Yn(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this,e,t)).state={eventName:null,eventNameErrorMessage:null},n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.showHelp,n=e.modalCreate,r=e.setEventIdToInvoke,i=e.templateEventId,a=e.configurationOption;t(),this.props.dispatch(q.g.updateShowPermissionError(!1)),this.props.dispatch(Object(z.b)("__key","event-modal")),n&&i&&(Object(J.U)("mandarinquat1")?r(B.f()):r(i));var o=O.WorkflowTags.testing,s=O.WorkflowTags.testEventConfiguration;O.panorama.logWorkflowEvent({tagPath:this.context.nextTag([o,s]),eventDetail:a})}},{key:"componentDidUpdate",value:function(e){this.props.modalCreate&&e.templateEventId!==this.props.templateEventId&&(Object(J.U)("mandarinquat1")?this.props.setEventIdToInvoke(B.f()):this.props.setEventIdToInvoke(this.props.templateEventId));var t=this.props,n=t.savedEventId,r=t.modalCreate,i=t.dirtyEventCode,a=t.eventIdToInvoke,o=t.setEventIdToInvoke;if(!r&&i&&Object(J.U)("mandarinquat1")&&n&&B.e(n)!==a&&o(B.e(n)),e.configurationOption!==this.props.configurationOption){var s=O.WorkflowTags.testing,c=O.WorkflowTags.testEventConfiguration;O.panorama.logWorkflowEvent({tagPath:this.context.nextTag([s,c]),eventDetail:this.props.configurationOption})}}},{key:"resetEventState",value:function(){this.setState({eventName:null,eventNameErrorMessage:null}),this.props.dispatch(q.g.updateEventModal({hasParseError:!1}))}},{key:"updateEventState",value:function(e){this.setState(e)}},{key:"saveSampleEvent",value:function(){this.props.configurationOption===q.a?this.create():this.edit()}},{key:"create",value:function(){var e={eventNameErrorMessage:this.state.eventNameErrorMessage,dirtyEventCode:this.props.dirtyEventCode,codeForEventInDropdown:this.props.codeForEventInDropdown,checkEventName:this.checkEventName.bind(this),eventName:this.state.eventName,eventType:this.props.eventType,EVENT_TYPE_SHARED:q.e,functionName:this.props.functionName,qualifier:this.props.qualifier,dispatch:this.props.dispatch,actions:q.g};B.a(e)&&this.updateEventState({eventName:this.state.eventName,eventNameErrorMessage:null})}},{key:"edit",value:function(){var e={eventName:this.props.savedEventId,dirtyEventCode:this.props.dirtyEventCode,codeForEventInDropdown:this.props.codeForEventInDropdown,functionName:this.props.functionName,qualifier:this.props.qualifier,savedSharedEvents:this.props.savedSharedEvents,dispatch:this.props.dispatch,actions:q.g};B.d(e)}},{key:"eventNameChanged",value:function(e){var t=e.detail.value;this.checkEventName(t)}},{key:"checkEventName",value:function(e){var t=B.i(e,this.props.allSavedTestEvents);return this.updateEventState({eventName:e,eventNameErrorMessage:t.message}),t}},{key:"testFunction",value:function(){this.props.dispatch(q.g.testWithSharedEvents(!0))}},{key:"delete",value:function(){var e={eventName:this.props.savedEventId,savedSharedEvents:this.props.savedSharedEvents,EVENT_TYPE_SHARED:q.e,EVENT_TYPE_USER:q.f,dispatch:this.props.dispatch,actions:q.g};B.c(e),this.resetEventState()}},{key:"render",value:function(){var e=this,t=this.delete.bind(this),n=this.props,r=n.hasParseError,a=n.isEventLoading,o=n.isTestButtonDisabled,c=n.isInvoking,l=n.isSaving,u=n.loading,d=n.error,f=n.showExecutionResults,p=n.showPermissionError,m=n.eventType,g=n.savedEventId,b=n.savedEvents,v=n.savedSharedEvents,y=n.tabLoading,E=u||a||r,w=v.find((function(e){return e.id===g})),j=m===q.f?(null==b?void 0:b.size)>9:(null==v?void 0:v.size)>9,S=E||!this.props.dirtyEventCode||this.props.dirtyEventCode===this.props.codeForEventInDropdown,k=this.saveSampleEvent.bind(this),_=!this.props.modalCreate&&w?"functionDetail.testEvents.shared.save.overwrite":"functionDetail.button.save",C=i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.header"});this.props.modalCreate&&(S=!!j);var T=i.a.createElement(we.a,{header:C},this.props.modalCreate?null:i.a.createElement(s.Button,{key:"delete",onClick:t,disabled:u,"data-analytics":O.WorkflowTags.delete},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.delete"})),i.a.createElement(s.Button,{key:"save",onClick:k,disabled:S,loading:l,"data-analytics":O.WorkflowTags.save},i.a.createElement(h.a,{id:_})),i.a.createElement(s.Button,{key:"invoke",variant:"primary",onClick:function(){return e.testFunction()},loading:c,disabled:o||r,"data-analytics":O.WorkflowTags.invoke,"data-testid":"testTabInvokeButton"},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.test"})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt.a,{className:f?"awsui-util-mb-l":""}),i.a.createElement(we.c,{id:"testEventContainer",header:T,tag:O.WorkflowTags.testing,loading:y,error:d},i.a.createElement(s.ColumnLayout,null,i.a.createElement("div",{"data-awsui-column-layout-root":"true"},i.a.createElement(L.b,{scope:"event-modal"}),p?Gn:null,i.a.createElement(Zn,{tag:O.WorkflowTags.testingTab,eventNameChanged:this.eventNameChanged.bind(this),eventName:this.state.eventName,eventNameErrorMessage:this.state.eventNameErrorMessage})))))}}])&&Kn(t.prototype,n),r&&Kn(t,r),o}(i.a.Component);er=rr,tr="contextType",nr=X.TagContext,tr in er?Object.defineProperty(er,tr,{value:nr,enumerable:!0,configurable:!0,writable:!0}):er[tr]=nr;var ir=Object(p.E)(["testingSharedSource"])(Object(l.connect)((function(e,t){var n=t.loading,r=t.error,i=new J.i(Object(y.q)(e)||""),a=i.functionName,o=i.qualifier,s=Object(y.nb)(e,"testingSharedSource");return{savedEventId:q.i.getEventModalState(e,"savedEventId"),codeForEventInDropdown:q.i.getSharedCodeToShow(e),dirtyEventCode:q.i.getDirtyEventCode(e),hasParseError:q.i.getEventModalState(e,"hasParseError"),loading:q.i.getEventModalState(e,"loading"),error:null!=r?r:s.error,isSaving:q.i.getEventModalState(e,"isSaving"),isEventLoading:q.i.getIsEventLoading(e),isTestButtonDisabled:Object(y.L)(e),showExecutionResults:q.i.getShowExecutionResults(e),isInvoking:q.i.getIsInvoking(e),modalCreate:q.i.getEventModalState(e,"configurationOption")===q.a,configurationOption:q.i.getEventModalState(e,"configurationOption"),tabLoading:null!=n?n:s.loading,templateEventId:q.i.getEventModalState(e,"templateEventId"),eventIdToInvoke:q.i.getEventIdToInvoke(e),functionName:a,qualifier:o,allSavedTestEvents:q.i.getAllSavedEvents(e),eventType:q.i.getEventModalState(e,"eventType"),savedSharedEvents:q.i.getSavedSharedTests(e),savedEvents:q.i.getSavedEvents(e),showPermissionError:q.i.getShowPermissionError(e)}}),(function(e){return{showHelp:function(){return e(Object(Ot.m)("functionDesigner.tab.testing.helpContent"))},setEventIdToInvoke:function(t){return e(q.g.setEventIdToInvoke(t))},dispatch:e}}))(rr)),ar=n(87),or=n(680),sr=n.n(or),cr=wt.c.getSelectedSidebarItem,lr=["items","sidebarId"];function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var mr=function(e){var t=e.items,n=e.sidebarId,r=pr(e,lr),a=function(e){var t=Object(l.useDispatch)();return{selectedSidebarItem:Object(l.useSelector)(cr).get(e),setSelectedSidebarItem:function(n){var r=n.detail;t(Object(Ot.p)(e,r.activeItemId))},resetSelectedSidebarItem:function(){t(Object(Ot.f)(e))}}}(n),o=a.selectedSidebarItem,s=a.setSelectedSidebarItem,c=a.resetSelectedSidebarItem;return i.a.useEffect((function(){Object(J.jb)(t,"id").includes(o)||c()}),[t,o]),i.a.createElement(Pt,fr({activeItemId:o,items:t,onClick:s},r))};mr.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sidebarId:o.a.string.isRequired},Pt.propTypes);var hr=mr;function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wr(e);if(t){var i=wr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(e,t){if(t&&("object"===gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(o,e);var t,n,r,a=Er(o);function o(){return br(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dlq,n=e.role,r=e.dlqArn,i=e.checkPermissions;t&&"None"!==t&&i(t,n,r)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.dlq,r=t.role,i=t.dlqArn;r!==e.role&&n&&"None"!==n&&this.props.checkPermissions(n,r,i)}},{key:"getDlqError",value:function(){var e=this.props,t=e.dlq,n=e.hasDLQPermission,r=e.role,a=null;if("implicitDeny"===n){var o={service:t.toUpperCase(),subject:"sns"===t?"topic":"queue",permission:"sns"===t?"Publish":"SendMessage",region:Object(J.N)(),role:new J.h(r).roleName};a=i.a.createElement(c.a,{tagName:"p",id:"dlq.roleLink.html",values:o})}return a}},{key:"render",value:function(){var e=this.props,t=e.columns,n=e.dlq,r=e.dlqArn,a=e.error,o=e.loading,s=e.qualifier,c=e.maxEventAge,l=e.maxRetryAttempts,u=Math.floor(c/3600),d=Math.floor(c/60)%60,f=c%60,p=Object(J.U)("bananaslug")?[{key:i.a.createElement(h.a,{id:"editAsync.maxEventAge.field.label"}),value:i.a.createElement("div",null,i.a.createElement("span",{className:"awsui-util-pr-xs"},u),i.a.createElement("span",{className:"awsui-util-pr-s"},i.a.createElement(h.a,{id:"config.timeout.hour.label"})),i.a.createElement("span",{className:"awsui-util-pr-xs"},d),i.a.createElement("span",{className:"awsui-util-pr-s"},i.a.createElement(h.a,{id:"config.timeout.min.label"})),i.a.createElement("span",{className:"awsui-util-pr-xs"},f),i.a.createElement(h.a,{id:"config.timeout.sec.label"}))},{key:i.a.createElement(h.a,{id:"editAsync.maxRetryAttempts.field.label"}),value:l}]:[];p.push({key:i.a.createElement(h.a,{id:"editAsync.dlq.field.label"}),value:i.a.createElement(h.a,{id:"None"===n?"none":"editAsync.dlqOptions.".concat(n)})}),n&&"None"!==n&&p.push({key:i.a.createElement(h.a,{id:"editAsync.".concat(n,"Arn.field.label")}),value:new J.b(r).resource});var m=!s,g=!Object(J.U)("bananaslug")&&!m;return i.a.createElement(M.a,{id:"async",editPage:"async",loading:o,error:a,showInfoLink:!0,readonly:g},i.a.createElement(we.f,{flat:!0,columns:null!=t?t:2,items:p}))}}])&&vr(t.prototype,n),r&&vr(t,r),o}(i.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jr,"propTypes",{loading:o.a.bool,error:o.a.instanceOf(Error),nodeId:o.a.string.isRequired,qualifier:o.a.string,columns:o.a.number,dlq:o.a.string,dlqArn:o.a.string,hasDLQPermission:o.a.string,maxEventAge:o.a.number,maxRetryAttempts:o.a.string,role:o.a.string,checkPermissions:o.a.func.isRequired});var Sr=Object(p.E)(["functionParser"])(Object(l.connect)((function(e,t){return{dlq:Object(y.P)(e,t.nodeId,"dlq"),dlqArn:Object(y.P)(e,t.nodeId,"dlqArn"),hasDLQPermission:Object(y.P)(e,t.nodeId,"hasDLQPermission"),maxEventAge:Object(y.P)(e,t.nodeId,"eventInvokeConfig.maxEventAge"),maxRetryAttempts:Object(y.P)(e,t.nodeId,"eventInvokeConfig.maxRetryAttempts"),role:Object(y.P)(e,t.nodeId,"role")}}),(function(e,t){return{checkPermissions:function(n,r,i){return e(Object(m.e)(n,t.nodeId,r,i))}}}))(jr)),kr=n(1905);function _r(e){var t=e.columns,n=void 0===t?1:t,r=e.description,a=e.ephemeralStorage,o=e.error,s=e.loading,c=e.memory,l=e.readonly,u=e.timeout,d=Math.floor(u/60),f=u%60,p=[{key:i.a.createElement(h.a,{id:"config.description.label"}),value:r||"-"},{key:i.a.createElement(h.a,{id:"config.memory.label"}),value:i.a.createElement("span",null,i.a.createElement("span",{className:"awsui-util-pr-xs"},c),i.a.createElement(h.a,{id:"config.memory.size.label"}))},{key:i.a.createElement(h.a,{id:"config.timeout.label"}),value:i.a.createElement("span",null,i.a.createElement("span",{className:"awsui-util-pr-xs"},d),i.a.createElement("span",{className:"awsui-util-pr-s"},i.a.createElement(h.a,{id:"config.timeout.min.label"})),i.a.createElement("span",{className:"awsui-util-pr-xs"},f),i.a.createElement(h.a,{id:"config.timeout.sec.label"}))}];return Object(J.U)("tempo")&&p.splice(2,0,{key:i.a.createElement(h.a,{id:"config.ephemeralStorage.label"}),value:i.a.createElement("span",null,i.a.createElement("span",{className:"awsui-util-pr-xs"},a),i.a.createElement(h.a,{id:"config.ephemeralStorage.size.label"}))}),i.a.createElement(M.a,{id:"generalConfiguration",helpMsgIdOverride:"basic",showInfoLink:!0,readonly:l,editPage:"basic-settings",loading:s,error:o},i.a.createElement(Ve,{task:"functionSource"},i.a.createElement(we.f,{flat:!0,items:p,columns:n}),Object(J.U)("spartan")&&i.a.createElement(kr.a,{alertId:"basicSettings",alertMargin:"awsui-util-mt-xl"})))}_r.propTypes={nodeId:o.a.string.isRequired,readonly:o.a.bool,loading:o.a.bool,error:o.a.instanceOf(Error),columns:o.a.number,description:o.a.string,ephemeralStorage:o.a.number,memory:o.a.number,timeout:o.a.number};var Cr=Object(p.E)(["functionParser"])(Object(l.connect)((function(e,t){var n,r,i,a,o,s=null===(n=Object(y.N)(e,t.nodeId))||void 0===n?void 0:n.get("data");return{description:null!==(r=null==s?void 0:s.get("description"))&&void 0!==r?r:null,ephemeralStorage:null!==(i=null==s?void 0:s.get("ephemeralStorage"))&&void 0!==i?i:null,memory:null!==(a=null==s?void 0:s.get("memory"))&&void 0!==a?a:null,timeout:null!==(o=null==s?void 0:s.get("timeout"))&&void 0!==o?o:null}}),null)(_r));function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dr(e);if(t){var i=Dr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(e,t){if(t&&("object"===Tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ir(e)}function Ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mr=[{id:"source",header:function(){return i.a.createElement(h.a,{id:"editDestination.source.field.label"})},cell:function(e){return i.a.createElement(h.a,{id:"destination.source.".concat(e.source)})}},{id:"sourceArn",header:function(){return i.a.createElement(h.a,{id:"editDestination.esmId.field.label"})},cell:function(e){return e.sourceArn?new J.b(e.sourceArn).resource:"-"}},{id:"condition",header:function(){return i.a.createElement(h.a,{id:"editDestination.condition.field.label"})},cell:function(e){return i.a.createElement(h.a,{id:"destination.condition.".concat(e.condition)})}},{id:"destArn",header:function(){return i.a.createElement(h.a,{id:"editDestination.destArn.field.label"})},cell:function(e){return e.destArn}}],Fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(o,e);var t,n,r,a=Rr(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ar(Ir(n=a.call(this,e,t)),"onSelectionChange",(function(e){return n.setState({selectedItems:e.detail.selectedItems})})),n.state={selectedItems:[]},n.getMessage=function(e){return Y.intl.formatMessage({id:e})},n}return t=o,(n=[{key:"componentWillUnmount",value:function(){this.props.clearFilteringText()}},{key:"onDelete",value:function(){var e=this.state.selectedItems[0],t=e.source,n=e.condition,r=e.id;this.props.deleteDestination(t,n,r)}},{key:"onEdit",value:function(){var e=this.props,t=e.func,n=e.qualifier,r=this.state.selectedItems[0],i=r.source,a=r.condition,o=r.id,s=i===b.m?"condition=".concat(a,"&uuid=").concat(o):"condition=".concat(a);this.props.navigateToEditDestination(t,n,s)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.addDestinationButton,a=n.error,o=n.loading,c=n.isDestinationModalOpen,l=void 0!==c&&c,u=n.isDeleting,d=void 0!==u&&u,f=n.nodes,p=n.setDestinationModalStatus,m=n.title,g=this.state.selectedItems[0],b=i.a.createElement(we.a,{header:null!=m?m:f.get(0).get("name"),info:"editDestination.section.destination.header.info"},i.a.createElement(s.Button,{disabled:0===this.state.selectedItems.length,onClick:function(){return p(!0)}},i.a.createElement(h.a,{id:"remove"})),i.a.createElement(s.Button,{disabled:0===this.state.selectedItems.length,onClick:this.onEdit.bind(this)},i.a.createElement(h.a,{id:"edit"})),null!=r?r:null),v=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:function(){return p(!1)}},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:d,onClick:this.onDelete.bind(this)},i.a.createElement(h.a,{id:"remove"})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Table,{id:"destination-table",columnDefinitions:Mr,items:f.toJS(),loading:!!o,header:b,features:["filtering","selection"],noMatch:i.a.createElement(we.d,{id:"functionDesigner.destinationsSection.noMatch",onClick:this.props.clearFilteringText}),empty:a?i.a.createElement(we.b,{error:a}):i.a.createElement(we.d,{id:"destinations.table.noItems.empty",noButton:!r,button:r})},i.a.createElement(s.TableFiltering,{filteringFields:["name","condition","sourceArn","destArn"],filteringText:null!==(e=this.props.filteringText)&&void 0!==e?e:"",onFilteringChange:function(e){var n=e.detail;return t.props.setFilteringText(n.filteringText)},filteringPlaceholder:Y.intl.formatMessage({id:"functionDesigner.destinationsSection.filter.placeholder"}),filteringCountTextFunction:we.j}),i.a.createElement(s.TableSelection,{selectionType:"single",trackBy:"id",selectedItems:this.state.selectedItems,onSelectionChange:this.onSelectionChange})),i.a.createElement(s.Modal,{expandToFit:!0,size:"large",header:i.a.createElement(h.a,{id:"destination.modal.header"}),footer:v,visible:l,onDismiss:function(){return p(!1)}},g?i.a.createElement(i.a.Fragment,null,i.a.createElement(L.b,{scope:"deleteDestinationModal"}),i.a.createElement(h.a,{id:"destination.modal.message"}),i.a.createElement("ul",null,["source","condition","destArn"].map((function(e){return i.a.createElement("li",{key:e},i.a.createElement(h.a,{id:"separator",values:{key:t.getMessage("editDestination.".concat(e,".field.label")),value:"destArn"===e?g.destArn:t.getMessage("destination.".concat(e,".").concat(g[e]))}}))}))),i.a.createElement(h.a,{id:"destination.modal.checkMessage"})):null))}}])&&Pr(t.prototype,n),r&&Pr(t,r),o}(i.a.Component);Ar(Fr,"propTypes",{nodes:Ie.a.listOf(ze.d).isRequired,loading:o.a.bool,error:o.a.instanceOf(Error),title:o.a.string,addDestinationButton:o.a.node,filteringText:o.a.string.isRequired,func:o.a.string.isRequired,qualifier:o.a.string,isDeleting:o.a.bool,isDestinationModalOpen:o.a.bool,deleteDestination:o.a.func.isRequired,navigateToEditDestination:o.a.func.isRequired,setDestinationModalStatus:o.a.func.isRequired,setFilteringText:o.a.func.isRequired,clearFilteringText:o.a.func.isRequired});var qr=Object(l.connect)((function(e){return{func:Object(y.B)(e),qualifier:Object(y.U)(e),isDeleting:Object(G.f)(e,"destination"),isDestinationModalOpen:Object(G.g)(e,"destination"),filteringText:Object(y.j)(e)}}),(function(e){return{deleteDestination:function(t,n,r){return e(Object(m.k)(t,n,r))},navigateToEditDestination:function(t,n,r){e(Object(m.L)(!0)),e(Object(v.f)(t,n,"destination",r,!1))},setDestinationModalStatus:function(t){return e(Object(G.m)("destination",t))},setFilteringText:function(t){return e(Object(m.J)(t))},clearFilteringText:function(){return e(Object(m.J)(""))}}}))(Fr),Br=function(){var e=Object(v.j)("destination").goToCreate;return i.a.createElement(s.Button,{id:"add-destination",onClick:function(){e(),Object(O.logEvent)(O.EVENT_NAMES.DESTINATION_ADD_CARD)}},i.a.createElement(h.a,{id:"destination.create.title"}))},Lr=function(e){var t=e.destinationNodes,n=e.error,r=e.loading;return i.a.createElement(qr,{addDestinationButton:i.a.createElement(Br,null),error:n,loading:r,nodes:t,title:Y.intl.formatMessage({id:"functionDesigner.configureTab.destinations.header"})})};Lr.propTypes={loading:o.a.bool,error:o.a.instanceOf(Error),destinationNodes:Ie.a.listOf(ze.d).isRequired};var zr=Object(p.E)(["destinationParser"])(Object(l.connect)((function(e){return{destinationNodes:Object(y.Q)(e,"destination")}}),null)(Lr));function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hr={creating:["loading","Creating"],available:["success","Available"],modifying:["pending","Modifying"],deleting:["loading","Deleting"]},Zr=function(e){var t,n,r,a,o,s,c;return{name:i.a.createElement(pt.d,{href:Object(J.x)("rds","proxy",e.get("dbproxyName"))},e.get("dbproxyName")),status:(r=e.get("status"),o=Vr(null!==(a=Hr[r])&&void 0!==a?a:["error",r],2),s=o[0],c=o[1],i.a.createElement(we.i,{status:s},c)),database:e.get("engineFamily"),endpoint:e.get("endpoint"),iam:null===(t=e.get("auth"))||void 0===t||null===(n=t.get(0))||void 0===n?void 0:n.get("iamauth"),arn:e.get("dbproxyArn")}},Jr=["name","status","database","iam"].map((function(e){return{id:e,header:function(){return i.a.createElement(h.a,{id:"databaseProxy.header.".concat(e)})},cell:function(t){return t[e]}}})),Kr=function(e){var t,n,r,a=e.databaseProxies,o=e.error,c=e.functionName,l=e.vpc,u=(null==a?void 0:a.error)?[]:null==a||null===(t=a.result)||void 0===t?void 0:t.toArray().map(Zr),d="#/add/database-proxy?function=".concat(c),f=i.a.createElement(we.a,{header:i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{id:"functionDetail.sections.databaseProxy.title"}),i.a.createElement(ke.a,{path:"addDatabaseProxy.helpContent"}))},i.a.createElement(s.Button,{href:d},i.a.createElement(h.a,{id:"databaseProxy.button.add"})));return null!==(n=a.result)&&void 0!==n&&n.size&&!l.result&&(r=i.a.createElement("div",{className:"awsui-util-mv-s"},i.a.createElement(s.Alert,{dismissible:!0},i.a.createElement(h.a,{id:"databaseProxy.section.missingVpc.title",tagName:"b"}),i.a.createElement("p",null,i.a.createElement(h.a,{id:"databaseProxy.section.missingVpc.description"}),i.a.createElement(pt.c,{href:Object(J.y)("configuration-database.html")}))))),i.a.createElement("div",{className:"awsui-util-mb-l",id:"dbProxySection"},r,i.a.createElement(s.Table,{columnDefinitions:Jr,items:u||[],loading:null==a?void 0:a.loading,header:f,empty:o?i.a.createElement(we.b,{error:o}):i.a.createElement(we.d,{id:"databaseProxy.empty",href:d})}))};Kr.propTypes={databaseProxies:o.a.shape({loading:o.a.bool,error:o.a.bool,result:Ie.a.list}),vpc:o.a.shape({loading:o.a.bool,error:o.a.bool,result:Ie.a.object}),functionName:o.a.string.isRequired,runtime:o.a.string.isRequired,missingVpcResult:o.a.bool,error:o.a.instanceOf(Error)};var Qr=Object(p.E)(["functionParser","databaseProxySource","vpcSource","urlParser"])(Object(l.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({databaseProxies:Object(y.nb)(e,"databaseProxySource"),vpc:Object(y.nb)(e,"vpcSource"),functionName:Object(De.b)(e).params.functionName,runtime:Object(y.P)(e,t.nodeId,"runtime")},t)}))(Kr));function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){Xr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ei=["key","value"].map((function(e){return{id:e,header:i.a.createElement(h.a,{id:"environmentVariables.attributeEditor.".concat(e,".label")}),cell:function(t){return t[e]}}}));function ti(e){var t=e.envVars,n=e.envVarsError,r=e.error,a=e.kmsKeyArn,o=e.loading,l=e.navigateToEdit,u=e.readonly,d=i.a.createElement(s.Table,{variant:"borderless",columnDefinitions:ei,items:t.toJS(),empty:i.a.createElement(we.d,{id:"environmentVariables.empty",noButton:u,onClick:l,"data-analytics":O.WorkflowTags.edit})}),f=t.isEmpty()?null:i.a.createElement(c.a,{id:"functionDesigner.section.environmentVariables.kmsKeyArn.".concat(a?"customer":"default"),values:{keyId:null==a?void 0:a.split("/")[1]}});return i.a.createElement(M.a,{id:"envVars",editPage:"environment-variables",error:r,counter:" (".concat(t.size,")"),description:f,loading:o,readonly:u,noGutters:!0},n&&i.a.createElement(s.Alert,{type:"error"},n.get("message")),d)}ti.propTypes={loading:o.a.bool,error:o.a.instanceOf(Error),nodeId:o.a.string.isRequired,readonly:o.a.bool,envVars:Ie.a.list.isRequired,envVarsError:Ie.a.map,kmsKeyArn:o.a.string,navigateToEdit:o.a.func.isRequired};var ni=Object(p.E)(["functionParser","urlParser"])(Object(l.connect)((function(e,t){var n;return{envVars:null!==(n=Object(y.m)(e,t.nodeId))&&void 0!==n?n:Object(ar.List)(),envVarsError:Object(y.P)(e,t.nodeId,"envVarsError"),kmsKeyArn:Object(y.P)(e,t.nodeId,"kmsKeyArn"),functionName:Object(y.B)(e),qualifier:Object(y.U)(e)}}),(function(e){return{navigateToEdit:function(t,n){e(Object(m.L)(!0)),e(Object(v.f)(t,n,"environment-variables"))}}}),(function(e,t,n){return $r($r($r($r({},n),e),t),{},{navigateToEdit:function(){return t.navigateToEdit(e.functionName,e.qualifier)}})}))(ti));function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ci=function(e){return i.a.createElement(pt.d,{href:Object(J.x)("efs","accessPoint",e)},e)},li={creating:["in-progress","Creating"],available:["success","Available"],updating:["in-progress","Updating"],deleting:["pending","Deleting"],deleted:["stopped","Deleted"]},ui=function(e){var t,n=oi(null!==(t=li[e])&&void 0!==t?t:["error",e],2),r=n[0],a=n[1];return i.a.createElement(we.i,{status:r},a)};function di(e){var t,n,r,a,o,c,l,u,d,f,p=e.error,m=e.fileSystems,g=e.isDeleting,b=e.isEfsModalOpen,v=e.loading,y=e.navigateToEdit,E=e.navigateToCreate,O=e.onDelete,w=e.onCloseModal,j=e.onOpenModal,S=e.qualifier,k=e.readonly,_=e.vpc,C=!(null!=m&&m.length),T=m instanceof Error,P=C?{}:m[0],x=null!=_?_:null,R=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{onClick:function(){return E(S)}},i.a.createElement(h.a,{id:"elasticFileSystem.button.add"}))),N=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{onClick:function(){return y(S)}},i.a.createElement(h.a,{id:"elasticFileSystem.button.edit"}))),I=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{onClick:j},i.a.createElement(h.a,{id:"elasticFileSystem.button.remove"}))),D=null;k||(D=C&&T?I:C&&!T?R:i.a.createElement(i.a.Fragment,null,N,I));var A,M=i.a.createElement(we.a,{header:i.a.createElement(h.a,{id:"functionDetail.sections.elasticFileSystem.title"}),info:"editElasticFileSystem.helpContent"},D),F=null===(t=J.f.fromId(null==P||null===(n=P.fileSystem)||void 0===n?void 0:n.fileSystemId))||void 0===t?void 0:t.arn,q=i.a.createElement(i.a.Fragment,null,i.a.createElement(we.f,{columns:3,flat:!0,variant:"text-grid",items:[{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.id"}),value:null!=P&&null!==(r=P.fileSystem)&&void 0!==r&&r.fileSystemId?(A=P.fileSystem.fileSystemId,i.a.createElement(pt.d,{href:Object(J.x)("efs","fileSystem",A)},A)):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.state"}),value:null!=P&&null!==(a=P.fileSystem)&&void 0!==a&&a.lifeCycleState?ui(P.fileSystem.lifeCycleState):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.arn"}),value:null!=P&&null!==(o=P.fileSystem)&&void 0!==o&&o.fileSystemId?i.a.createElement(Ye.a,{text:F,value:F}):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.accessPoint.id"}),value:null!=P&&null!==(c=P.accessPoint)&&void 0!==c&&c.accessPointId&&null!=P&&null!==(l=P.fileSystem)&&void 0!==l&&l.fileSystemId?ci(P.accessPoint.accessPointId,P.fileSystem.fileSystemId):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.status"}),value:null!=P&&null!==(u=P.accessPoint)&&void 0!==u&&u.lifeCycleState?ui(P.accessPoint.lifeCycleState):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.accessPoint.arn"}),value:null!=P&&null!==(d=P.accessPoint)&&void 0!==d&&d.accessPointArn?i.a.createElement(Ye.a,{text:P.accessPoint.accessPointArn,value:P.accessPoint.accessPointArn}):"-"},{key:i.a.createElement(h.a,{id:"elasticFileSystem.detail.localPath"}),value:null!==(f=null==P?void 0:P.localMountPath)&&void 0!==f?f:"-"}]})),B=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:w},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:g,onClick:O},i.a.createElement(h.a,{id:"remove"}))),z=null;T||(z=v?i.a.createElement(W.a,{size:"large"}):C&&!x?i.a.createElement(we.d,{id:"elasticFileSystem.vpc.empty",noButton:!0}):C&&x?i.a.createElement(we.d,{id:"elasticFileSystem.empty",onClick:function(){return E(S)}}):q);var U=Object(J.U)("hoover")?i.a.createElement(we.b,{error:p}):i.a.createElement(L.b,{scope:"elasticFileSystemCard"});return i.a.createElement(i.a.Fragment,null,i.a.createElement(we.c,{header:M},U,z),i.a.createElement(s.Modal,{expandToFit:!0,size:"medium",header:i.a.createElement(h.a,{id:"elasticFileSystem.modal.header"}),footer:B,visible:b,onDismiss:w},i.a.createElement(h.a,{id:"elasticFileSystem.modal.message"})))}di.propTypes={loading:o.a.bool,error:o.a.instanceOf(Error),readonly:o.a.bool,fileSystems:o.a.oneOfType([o.a.instanceOf(Error),o.a.array]),vpc:o.a.object,functionName:o.a.string.isRequired,isDeleting:o.a.bool.isRequired,qualifier:o.a.string,isEfsModalOpen:o.a.bool.isRequired,navigateTo:o.a.func.isRequired,navigateToCreate:o.a.func.isRequired,navigateToEdit:o.a.func.isRequired,onCloseModal:o.a.func.isRequired,onDelete:o.a.func.isRequired,onOpenModal:o.a.func.isRequired,setModalStatus:o.a.func.isRequired};var fi=Object(p.E)(["elasticFileSystemSource","vpcSource","urlParser"])(Object(l.connect)((function(e){return{fileSystems:Object(y.W)(e,"elasticFileSystemSource"),vpc:Object(y.W)(e,"vpcSource"),functionName:Object(De.b)(e).params.functionName,isDeleting:Object(G.f)(e,"elasticFileSystem"),isEfsModalOpen:Object(G.g)(e,"elasticFileSystem"),qualifier:Object(y.U)(e)}}),(function(e){return{navigateTo:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;Object(O.logEvent)(O.EVENT_NAMES.EFS_CLICK(n?"a":"e")),e(Object(m.L)(!0)),e(Object(v.f)(t,r,"elastic-file-system",null,n))},onDelete:function(t){return e(Object(m.l)(t))},setModalStatus:function(t){return e(Object(G.m)("elasticFileSystem",t))}}}),(function(e,t,n){return ii(ii(ii(ii({},n),e),t),{},{navigateToEdit:function(n){return t.navigateTo(e.functionName,!1,n)},navigateToCreate:function(n){return t.navigateTo(e.functionName,!0,n)},onDelete:function(){Object(O.logEvent)(O.EVENT_NAMES.EFS_CLICK("raprv")),t.onDelete(e.functionName)},onCloseModal:function(){Object(O.logEvent)(O.EVENT_NAMES.EFS_CLICK("clrem")),t.setModalStatus(!1)},onOpenModal:function(){Object(O.logEvent)(O.EVENT_NAMES.EFS_CLICK("r")),t.setModalStatus(!0)}})}))(di));function pi(e){var t=e.count,n=e.onEdit,r=e.showDelete,a=e.selectedPermission,o=i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{id:"resourcePolicy.tableHeader"})," ",i.a.createElement("span",{className:"awsui-util-header-counter"},i.a.createElement(h.a,{id:"wrapper",values:{value:t}})));return i.a.createElement(we.a,{header:o},i.a.createElement(s.Button,{id:"resourcePolicyEditButton",onClick:function(){return n(!1)},disabled:!a},i.a.createElement(h.a,{id:"edit"})),i.a.createElement(s.Button,{id:"resourcePolicyDeleteButton",onClick:function(){return r(!0)},disabled:!a},i.a.createElement(h.a,{id:"resourcePolicy.buttons.delete"})),i.a.createElement(s.Button,{variant:"primary",id:"resourcePolicyAddButton",onClick:function(){return n(!0)}},i.a.createElement(h.a,{id:"resourcePolicy.buttons.add"})))}pi.propTypes={onEdit:o.a.func.isRequired,count:o.a.number.isRequired,showDelete:o.a.func.isRequired,selectedPermission:o.a.object};var mi=n(1907),hi=n(1833);function gi(e){var t=e.items,n=e.showDelete,r=e.openDetailsModal,a=e.onSelectionChange,o=e.noData,c=e.onEdit,l=e.selectedPermission,u=e.loading,d=["sid","principal","action"].map((function(e){return{id:e,field:e}})),f=[{id:"sid",header:function(){return i.a.createElement(h.a,{id:"resourcePolicy.sid"})},cell:function(e){return i.a.createElement("a",{href:"#",onClick:function(t){return r(t,e)}},e.sid)}},{id:"principal",header:function(){return i.a.createElement(h.a,{id:"resourcePolicy.principal"})},cell:function(e){return e.principal}},$t.d.includes("pumpkin")&&{id:"principalOrgID",header:function(){return i.a.createElement(h.a,{id:"editResourcePolicy.principalOrgID.field.label"})},cell:function(e){return e.principalOrgID||"-"}},{id:"condition",header:function(){return i.a.createElement(h.a,{id:"resourcePolicy.condition"})},cell:function(e){return e.hasConditions?Object.keys(e.conditions).join(", "):i.a.createElement(h.a,{id:"resourcePolicy.noConditions"})}},{id:"action",header:function(){return i.a.createElement(h.a,{id:"resourcePolicy.action"})},cell:function(e){return e.action}}];$t.d.includes("pumpkin")&&d.push({id:"principalOrgID",field:"principalOrgID"});var p=Object(J.N)(),m=hi.b.map((function(e){return hi.a[e.id].principal.replace("<region>",p)}));m.pop();var g=[{groupValuesLabel:Y.intl.formatMessage({id:"resourcePolicy.principal"}),propertyKey:"principal",propertyLabel:Y.intl.formatMessage({id:"resourcePolicy.principal"}),values:m},{groupValuesLabel:Y.intl.formatMessage({id:"resourcePolicy.action"}),propertyKey:"action",propertyLabel:Y.intl.formatMessage({id:"resourcePolicy.action"}),values:mi.a.map((function(e){return e.id}))}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Table,{className:"resourcePolicyPermissionsTable",columnDefinitions:f,header:i.a.createElement(pi,{count:t.length,onEdit:c,showDelete:n,selectedPermission:l}),items:t,empty:o(),variant:"borderless",loading:u},i.a.createElement(s.TablePagination,{pageSize:5}),i.a.createElement(s.TableSorting,{sortingColumn:"principal",sortableColumns:d}),i.a.createElement(s.TableSelection,{selectionType:"single",onSelectionChange:a,trackBy:"sid"}),i.a.createElement(s.TablePropertyFiltering,{allowFreeTextFiltering:!0,filteringOptions:g,groupValuesText:Y.intl.formatMessage({id:"groupValuesText"}),groupPropertiesText:Y.intl.formatMessage({id:"groupPropertiesText"}),placeholder:Y.intl.formatMessage({id:"resourcePolicy.filterPlaceholder"}),clearFiltersText:Y.intl.formatMessage({id:"clearFiltersText"}),operationAndText:Y.intl.formatMessage({id:"operationAndText"}),operationNotAndText:Y.intl.formatMessage({id:"operationNotAndText"}),operationOrText:Y.intl.formatMessage({id:"operationOrText"}),operationNotOrText:Y.intl.formatMessage({id:"operationNotOrText"}),filteringCountTextFunction:we.j})))}function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){_i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ki(e);if(t){var i=ki(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(e,t){if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}gi.propTypes={items:o.a.array,showDelete:o.a.func.isRequired,openDetailsModal:o.a.func.isRequired,onSelectionChange:o.a.func.isRequired,noData:o.a.func.isRequired,onEdit:o.a.func.isRequired,selectedPermission:o.a.object,loading:o.a.bool.isRequired};var Ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(l,e);var t,n,r,a,o,c=ji(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={deleteModalOpen:!1,detailsModalOpen:!1,selectedPermission:null,detailsPermission:null,removePermissionLoading:!1},t}return t=l,(n=[{key:"onDelete",value:(a=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showDelete(!1),t=this.props.functionName,n=this.props.qualifier,r=this.state.selectedPermission.sid,e.prev=4,this.setState({removePermissionLoading:!0}),e.next=8,K.a.removePermission({functionName:t,qualifier:n,statementId:r});case 8:this.props.refresh(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.props.alert(e.t0.message);case 14:return e.prev=14,this.setState({selectedPermission:null,removePermissionLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[4,11,14,17]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){Ei(i,n,r,o,s,"next",e)}function s(e){Ei(i,n,r,o,s,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"onSelectionChange",value:function(e){e.detail.selectedItems.length&&this.setState({selectedPermission:e.detail.selectedItems[0]});var t=this.state.selectedPermission,n=t.isAccount?"":this.getServiceKey(t.principal);this.props.updateForm(t,n)}},{key:"onEdit",value:function(e){this.props.navigateToEdit(this.props.functionName,this.props.qualifier,e)}},{key:"getServiceKey",value:function(e){var t=e.split(".")[0];return t in hi.a?t:"placeholder"}},{key:"showDelete",value:function(e){this.setState({deleteModalOpen:e})}},{key:"showDetails",value:function(e,t){if(this.setState({detailsModalOpen:e,detailsPermission:t}),e){var n=t.isAccount?"":this.getServiceKey(t.principal);this.props.updateForm(t,n)}}},{key:"openDetailsModal",value:function(e,t){e.preventDefault(),this.showDetails(!0,t)}},{key:"noData",value:function(){var e=this;return i.a.createElement(we.d,{id:"resourcePolicy.empty",noDescription:!0,onClick:function(){return e.onEdit(!0)}})}},{key:"detailsContent",value:function(e){return e?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"awsui-util-spacing-v-s"},i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},"Statement ID"),i.a.createElement("div",null,e.sid)),i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},"Principal"),i.a.createElement("div",null,e.principal)),i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},"Effect"),i.a.createElement("div",null,e.effect)),i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},"Action"),i.a.createElement("div",null,e.action)),i.a.createElement("div",null,i.a.createElement("div",{className:"awsui-util-label"},"Conditions"),e.hasConditions?i.a.createElement("pre",null,JSON.stringify(e.conditions,null,1)):i.a.createElement(h.a,{id:"resourcePolicy.noConditions"})))):null}},{key:"render",value:function(){var e,t,n,r=this,a=this.props.loading||this.state.removePermissionLoading,o=i.a.createElement(h.a,{id:"modal.policy.delete.title"}),c=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:function(){return r.showDelete(!1)}},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",onClick:this.onDelete.bind(this)},i.a.createElement(h.a,{id:"remove"}))),l=i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{id:"modal.policy.delete.warning"}),i.a.createElement(s.ExpandableSection,{className:"awsui-util-mt-m",header:i.a.createElement(h.a,{id:"modal.policy.delete.expandableTitle"})},this.detailsContent(this.state.selectedPermission))),u=i.a.createElement(h.a,{id:"modal.policy.details.title"}),d=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:function(){return r.showDetails(!1)}},i.a.createElement(h.a,{id:"close"}))),f=i.a.createElement("div",{className:"awsui-util-spacing-v-s"},this.detailsContent(this.state.detailsPermission),i.a.createElement(s.Button,{onClick:function(){return r.onEdit(!1)}},i.a.createElement(h.a,{id:"edit"}))),p=i.a.createElement(we.a,{header:i.a.createElement(h.a,{id:"functionDesigner.tab.permissions.resourcePolicy.title"}),info:"functionDesigner.tab.permissions.resourcePolicy.info"},i.a.createElement(s.Button,{id:"viewResourcePolicy",onClick:function(){return r.props.openPolicyModal(!0)},disabled:a||!!this.props.error},i.a.createElement(Oe.a,{direction:"horizontal",size:"xs"},a&&i.a.createElement(W.a,null),i.a.createElement(h.a,{id:"functionDesigner.tab.permissions.resourcePolicy.viewJson"}))));return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Modal,{size:"large",id:"permissionDeleteModal",header:o,footer:c,visible:this.state.deleteModalOpen,onDismiss:function(){return r.showDelete(!1)},expandToFit:!0},l),i.a.createElement(s.Modal,{size:"large",id:"permissionDetailsModal",header:u,footer:d,visible:this.state.detailsModalOpen,onDismiss:function(){return r.showDetails(!1)},expandToFit:!0},f),i.a.createElement(we.c,{id:"resourcePolicySection",header:p,noGutters:!0,error:this.props.error},i.a.createElement("div",{"data-awsui-column-layout-root":!0},i.a.createElement(s.ColumnLayout,{columns:1,variant:"text-grid",className:"awsui-util-ph-l awsui-util-pb-l awsui-util-pt-m"},i.a.createElement("div",{"data-awsui-column-layout-root":"true"},i.a.createElement("div",{className:"awsui-util-spacing-v-s"},i.a.createElement(h.a,{id:"functionDesigner.tab.permissions.resourcePolicy.description"}))))),i.a.createElement(gi,{items:null!==(e=null===(t=this.props.result)||void 0===t||null===(n=t.toJS())||void 0===n?void 0:n.statements)&&void 0!==e?e:[],showDelete:this.showDelete.bind(this),openDetailsModal:this.openDetailsModal.bind(this),onSelectionChange:this.onSelectionChange.bind(this),noData:this.noData.bind(this),onEdit:this.onEdit.bind(this),selectedPermission:this.state.selectedPermission,loading:a})))}}])&&Oi(t.prototype,n),r&&Oi(t,r),l}(i.a.Component);_i(Ci,"propTypes",{loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),result:o.a.object,functionName:o.a.string,qualifier:o.a.string,alert:o.a.func.isRequired,navigateToEdit:o.a.func.isRequired,refresh:o.a.func.isRequired,updateForm:o.a.func.isRequired,openPolicyModal:o.a.func.isRequired});var Ti=Object(p.E)(["urlParser","relationParser","resourcePolicyParser"])(Object(l.connect)((function(e,t){return yi(yi({},Object(y.nb)(e,"resourcePolicyParser")),{},{functionName:Object(y.B)(e),qualifier:Object(y.U)(e)},t)}),(function(e){return{alert:function(t){return e(Object(z.d)({message:t}))},navigateToEdit:function(t,n,r){return e(Object(v.f)(t,n,"resource-policy",null,r))},refresh:function(){return e(Object(m.z)(["resourcePolicySource","resourcePolicyParser","vertexSource","relationParser"]))},updateForm:function(t,n){var r,i,a,o,s,c;e(Object(H.setFieldValue)("editResourcePolicy","source",t.isAccount?"account":"service")),e(Object(H.setFieldValue)("editResourcePolicy","arn",t.isAccount?t.principal:"")),e(Object(H.setFieldValue)("editResourcePolicy","service",t.isAccount?"":n)),e(Object(H.setFieldValue)("editResourcePolicy","principal",t.principal)),e(Object(H.setFieldValue)("editResourcePolicy","principalOrgID",t.principalOrgID)),e(Object(H.setFieldValue)("editResourcePolicy","statementId",t.sid)),e(Object(H.setFieldValue)("editResourcePolicy","action",t.action)),e(Object(H.setFieldValue)("editResourcePolicy","sourceAccount",null===(r=Object(ar.fromJS)(t.conditions))||void 0===r||null===(i=r.get("StringEquals",null))||void 0===i?void 0:i.get("AWS:SourceAccount",null))),e(Object(H.setFieldValue)("editResourcePolicy","sourceArn",null===(a=Object(ar.fromJS)(t.conditions))||void 0===a||null===(o=a.get("ArnLike",null))||void 0===o?void 0:o.get("AWS:SourceArn",null))),e(Object(H.setFieldValue)("editResourcePolicy","eventSourceToken",null===(s=Object(ar.fromJS)(t.conditions))||void 0===s||null===(c=s.get("StringEquals",null))||void 0===c?void 0:c.get("lambda:EventSourceToken",null)))}}}))(Ci));function Pi(e){var t=e.atom,n=e.type;return"*"===t?i.a.createElement(h.a,{tagName:"b",id:"functionDesigner.node.resource.".concat(n,".all")}):i.a.createElement("span",null,t)}function xi(e){var t=e.statement,n=e.other,r=t.get("effect"),a=i.a.createElement(Pi,{atom:t.get(n),type:n});return i.a.createElement("span",{className:A()({"awsui-util-status-negative":"Deny"===r})},i.a.createElement(h.a,{id:"separator",values:{key:r,value:a}}))}Pi.propTypes={atom:o.a.string.isRequired,type:o.a.string.isRequired},xi.propTypes={statement:Ie.a.map.isRequired,other:o.a.string.isRequired};var Ri=function(e,t){return[{id:e,header:function(){return i.a.createElement(h.a,{id:"functionDesigner.node.resource.focus.".concat(e)})},cell:function(t){return i.a.createElement(Pi,{atom:t[0],type:e})}},{id:t,header:function(){return i.a.createElement(h.a,{id:"functionDesigner.node.resource.other.".concat(e)})},cell:function(e){return i.a.createElement("ul",null,e[1].map((function(e,n){return i.a.createElement("li",{key:n},i.a.createElement(xi,{statement:e,other:t}))})))}}]};function Ni(e){var t=e.statements,n=e.focus,r="action"===n?"resource":"action",a=t.groupBy((function(e){return e.get(n)})).map((function(e){return e.map((function(e){return e.delete("source")}))})).map(ar.Set).entrySeq().toArray();return i.a.createElement(s.Table,{variant:"borderless",columnDefinitions:Ri(n,r),items:a})}function Ii(e){var t=e.source,n={name:t.get("policyName"),index:t.get("index")};return i.a.createElement(h.a,{id:"functionDesigner.node.resource.source.".concat(t.get("policyType")),values:n})}function Di(e){var t=e.nodes,n=e.bare,r=t.get(0),a=r.getIn(["data","statements"]),o=["action","resource"].map((function(e){return{id:e,label:function(){return i.a.createElement(h.a,{id:"functionDesigner.node.resource.tab.".concat(e)})},content:i.a.createElement(Ni,{statements:a,focus:e})}})),c=a.map((function(e){return e.get("source")})).toSet(),l=r.get("name"),u="*"===l?i.a.createElement(h.a,{id:"functionDesigner.node.resource.all"}):l,d=i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{tagName:"div",id:"functionDesigner.node.resource.blurb"}),i.a.createElement(s.Tabs,{id:"resourceTabs",tabs:o,activeTabId:"resource"}),i.a.createElement(s.Alert,null,i.a.createElement(h.a,{id:"functionDesigner.node.resource.source.blurb"}),i.a.createElement("ul",null,c.map((function(e,t){return i.a.createElement("li",{key:t,className:"awsui-util-ml-l"},i.a.createElement(Ii,{source:e}))})))));return n?d:i.a.createElement("div",{className:"awsui-util-container awsui-util-no-gutters"},i.a.createElement("div",{className:"awsui-util-container-header"},u),i.a.createElement("div",{className:"awsui-util-clearfix"},d))}Ni.propTypes={statements:Ie.a.list.isRequired,focus:o.a.string.isRequired},Ii.propTypes={source:Ie.a.map.isRequired},Di.propTypes={nodes:Ie.a.listOf(ze.d).isRequired,bare:o.a.bool};var Ai=Di;function Mi(){return i.a.createElement(M.a,{id:"auditing"},i.a.createElement(c.a,{tagName:"p",id:"functionDetail.sections.auditing.blurb"}))}function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){Bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Li(e){var t,n=e.functionArn,r=e.loading,a=e.error,o=e.result;if(!r&&!a){var s=new J.h(o.get("role")).roleName,c={key:i.a.createElement(h.a,{id:"role.name.label"}),value:i.a.createElement(pt.d,{href:"/iam/home#/roles/".concat(s,"?section=permissions")},s)};t=i.a.createElement(we.f,{flat:!0,items:[c]})}var l=!0;n&&(l=!!new J.i(n).qualifier);return i.a.createElement(M.a,{id:"role",editPage:"basic-settings",readonly:l,loading:r,error:a},t)}Li.propTypes={functionArn:o.a.string,loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),result:Ie.a.map};var zi=Object(p.E)(["functionSource"])(Object(l.connect)((function(e,t){return qi(qi({functionArn:Object(y.q)(e)},Object(y.nb)(e,"functionSource")),t)}))(Li));function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zi(e);if(t){var i=Zi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hi(this,n)}}function Hi(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ki(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qi=Object(l.connect)((function(e){return{executionRole:Object(y.W)(e,"executionRoleSource"),resourcesLoading:!Object(y.a)(e,"resource"),resources:Object(y.Q)(e,"resource")}}))((function(e){var t=e.executionRole,n=e.resourcesLoading,a=e.resources;if(n)return i.a.createElement(W.a,{size:"large"});if(a.isEmpty())return i.a.createElement("div",{className:"resource-node awsui-util-mt-m"},i.a.createElement(c.a,{id:"functionDesigner.permissionsTab.noResources"}));var o=a.getIn([0,"data","service","name"]),l=Ji(Object(r.useState)(o),2),u=l[0],d=l[1],f=a.map((function(e){var t=e.getIn(["data","service","name"]),n=e.getIn(["data","statements"]);return{id:t,label:"*"===t?Y.intl.formatMessage({id:"functionDesigner.node.resource.all"}):t,description:Y.intl.formatMessage({id:"functionDesigner.permissionsTab.resource.description"},{actions:n.map((function(e){return e.get("action")})).toSet().size,resources:n.map((function(e){return e.get("resource")})).toSet().size}),iconUrl:e.getIn(["data","service","icon"])}})).toArray(),p=f.find((function(e){return e.id===u}));return i.a.createElement(i.a.Fragment,null,(null==t?void 0:t.partial)&&i.a.createElement(s.Alert,{className:"awsui-util-mb-m"},i.a.createElement(c.a,{id:"functionDesigner.permissionsTab.role.partial",values:{roleName:t.roleName}})),i.a.createElement(s.Select,{filteringType:"auto",triggerVariant:"option",options:f,selectedOption:p,onChange:function(e){return d(e.detail.selectedOption.id)}}),i.a.createElement("div",{className:"resource-node awsui-util-mt-m"},i.a.createElement(Ai,{bare:!0,nodes:a.filter((function(e){return e.getIn(["data","service","name"])===u}))})))})),Yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(o,e);var t,n,r,a=Gi(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={roleModalOpen:!1,policyModalOpen:!1},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.showHelp()}},{key:"setRoleModalOpen",value:function(e){this.setState({roleModalOpen:e})}},{key:"setPolicyModalOpen",value:function(e){this.setState({policyModalOpen:e})}},{key:"render",value:function(){var e,t,n=this;if(this.props.resourcePolicyLoading)e=i.a.createElement(W.a,{size:"large"});else if(this.props.resourcePolicyFailed)e=i.a.createElement(s.Alert,{type:"warning"},this.props.resourcePolicy.message);else if(this.props.resourcePolicy){var r=JSON.stringify(this.props.resourcePolicy,null,2);e=i.a.createElement(Qt.a,{id:"resourcePolicy",mode:"json",readonly:!0,value:r})}else e=i.a.createElement(c.a,{tagName:"p",id:"modal.policy.empty"});if(this.props.executionRoleLoading||!this.props.executionRole)t=i.a.createElement(W.a,{size:"large"});else if(this.props.executionRoleFailed)t=i.a.createElement(s.Alert,{type:"warning"},this.props.executionRole.message);else{var a=JSON.stringify(this.props.executionRole,null,2);t=i.a.createElement(Qt.a,{id:"executionRole",mode:"json",readonly:!0,value:a})}var o,l,u=i.a.createElement(we.a,{header:i.a.createElement(h.a,{id:"functionDesigner.permissionsTab.role.header"})},i.a.createElement(s.Button,{onClick:function(){return n.setRoleModalOpen(!0)}},i.a.createElement(h.a,{id:"functionDesigner.permissionsTab.role.actions.viewJson"}))),d=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:function(){return n.setRoleModalOpen(!1)}},i.a.createElement(h.a,{id:"close"}))),f=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:function(){return n.setPolicyModalOpen(!1)}},i.a.createElement(h.a,{id:"close"})));return o=this.props.executionRoleFailed?t:i.a.createElement(Qi,null),l=this.props.resourcePolicyFailed?e:i.a.createElement(Ti,{openPolicyModal:this.setPolicyModalOpen.bind(this)}),i.a.createElement(i.a.Fragment,null,i.a.createElement(zi,null),i.a.createElement(we.c,{tag:null,header:u},o),l,i.a.createElement(Mi,null),i.a.createElement(s.Modal,{size:"large",expandToFit:!0,visible:this.state.roleModalOpen,header:i.a.createElement(h.a,{id:"functionDesigner.permissionsTab.roleJson.header"}),footer:d,onDismiss:function(){return n.setRoleModalOpen(!1)}},t),i.a.createElement(s.Modal,{size:"large",id:"resourcePolicyModal",expandToFit:!0,visible:this.state.policyModalOpen,header:i.a.createElement(h.a,{id:"functionDesigner.tab.permissions.resourcePolicy.json.header"}),footer:f,onDismiss:function(){return n.setPolicyModalOpen(!1)}},e))}}])&&Wi(t.prototype,n),r&&Wi(t,r),o}(i.a.Component),$i=Object(p.E)(["executionRoleParser","resourcePolicyParser"])(Object(l.connect)((function(e){return{resourcePolicyLoading:!Object(y.d)(e).includes("resourcePolicySource"),resourcePolicy:Object(y.W)(e,"resourcePolicySource"),resourcePolicyFailed:Object(y.R)(e).contains("resourcePolicySource"),executionRoleLoading:!Object(y.d)(e).includes("executionRoleSource"),executionRole:Object(y.W)(e,"executionRoleSource"),executionRoleFailed:Object(y.R)(e).contains("executionRoleSource")}}),(function(e){return{showHelp:function(){return e(Object(Ot.m)("functionDesigner.tab.permissions.helpContent"))}}}))(Yi)),Xi=n(1694),ea=n(1790);function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sa(e);if(t){var i=sa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oa(this,n)}}function oa(e,t){if(t&&("object"===ta(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(o,e);var t,n,r,a=aa(o);function o(){return na(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"onEditButtonClick",value:function(){this.goToProvisionedConcurrencyEditPage()}},{key:"goToProvisionedConcurrencyEditPage",value:function(){var e=new J.i(this.props.functionArn),t=Object(J.Y)(e.qualifier)?"versions":"aliases";this.props.goToUrl("/functions/".concat(e.functionName,"/").concat(t,"/").concat(e.qualifier,"/edit/provisioned-concurrency"))}},{key:"render",value:function(){var e=this,t=new J.i(this.props.functionArn),n=i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{id:"provisionedConcurrency.versionsAndAliases.title"})," ",i.a.createElement("span",{className:"awsui-util-header-counter"},!this.props.refreshing&&i.a.createElement(h.a,{id:"wrapper",values:{value:this.props.count}})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(we.a,{header:n},i.a.createElement(s.Button,{id:"provisionedConcurrencyRefreshButton",icon:"refresh",loading:this.props.refreshing,onClick:this.props.refreshTable}),i.a.createElement(s.Button,{id:"provisionedConcurrencyEditButton",disabled:this.props.isDisabledForEditButton,onClick:this.onEditButtonClick.bind(this)},i.a.createElement(h.a,{id:"edit"})),i.a.createElement(s.Button,{id:"provisionedConcurrencyDeleteButton",disabled:!t.qualifier,onClick:function(){return e.props.showDeleteProvisionedConcurrencyModal()}},i.a.createElement(h.a,{id:"provisionedConcurrency.buttons.delete"})),i.a.createElement(s.Button,{id:"provisionedConcurrencyCreateButton",href:"#/functions/".concat(t.functionName,"/create/provisioned-concurrency")},i.a.createElement(h.a,{id:"provisionedConcurrency.buttons.create"}))),i.a.createElement("div",{className:"awsui-util-header-description awsui-util-mt-xs"},i.a.createElement(h.a,{id:"provisionedConcurrency.description.html",values:{"learn-more":function(){return i.a.createElement(pt.c,{href:"https://docs.".concat(Object(J.A)(),"/console/lambda/provisioned-concurrency")})}}})),i.a.createElement(L.b,{scope:"provisioned-concurrency"}))}}])&&ra(t.prototype,n),r&&ra(t,r),o}(i.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ca,"propTypes",{functionArn:o.a.string,count:o.a.number.isRequired,isDisabledForEditButton:o.a.bool.isRequired,refreshing:o.a.bool.isRequired,refreshTable:o.a.func.isRequired,showDeleteProvisionedConcurrencyModal:o.a.func.isRequired,goToUrl:o.a.func.isRequired,provisionedConcurrencyAlerts:o.a.oneOfType([Ie.a.orderedMap,Ie.a.map])});var la={READY:"ready",IN_PROGRESS:"in-progress",FAILED:"failed"};function ua(e){var t=e.functionArn,n=e.onDelete;if(!t)return i.a.createElement(x.a,null,i.a.createElement("div",null));var r=new J.i(t).qualifier,a=Object(J.Y)(r)?"version":"alias";return i.a.createElement(ye.b,{id:"deleteProvisionedConcurrency",size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"modal.delete.title.provisionedConcurrency.".concat(a),values:{qualifier:r}}),footerProvider:function(e,r){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:r},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:e,onClick:function(){return n(t)}},i.a.createElement(h.a,{id:"remove"})))}},i.a.createElement(c.a,{tagName:"p",id:"modal.delete.text.provisionedConcurrency.".concat(a),values:{qualifier:r}}))}function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ba(e);if(t){var i=ba(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ha(this,n)}}function ha(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ga(e)}function ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ua.propTypes={functionArn:o.a.string,onDelete:o.a.func.isRequired};var ya=[{id:"qualifier",field:"qualifier"},{id:"type",field:"type"},{id:"availableConcurrency",field:"availableConcurrency"},{id:"status",field:"status"}],Ea=[{id:"qualifier",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.qualifier"})},cell:function(e){return i.a.createElement("a",{href:e.href},e.qualifier)}},{id:"type",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.type"})},cell:function(e){return i.a.createElement(h.a,{id:"".concat(e.type)})}},{id:"availableConcurrency",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.availableProvisionedConcurrency"})},cell:function(e){return e.availableConcurrency}},{id:"status",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.status"})},cell:function(e){return e.status?i.a.createElement(i.a.Fragment,null,i.a.createElement(we.i,{status:la[e.status]})," ",e.statusReason,("IN_PROGRESS"===e.status||"FAILED"===e.status)&&i.a.createElement(h.a,{id:"provisionedConcurrency.status.details",values:{allocated:e.provisionedConcurrency,requested:e.requestedConcurrency}})):"-"}},{id:"details",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.details"})},cell:function(e){return e.details}}],Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(o,e);var t,n,r,a=ma(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),va(ga(n=a.call(this,e,t)),"filteringOptions",[{groupValuesLabel:Y.intl.formatMessage({id:"provisionedConcurrency.types"}),propertyKey:"type",propertyLabel:Y.intl.formatMessage({id:"provisionedConcurrency.type"}),values:[Y.intl.formatMessage({id:"version"}),Y.intl.formatMessage({id:"alias"})]}]),n.state={selectedFunctionArn:null,isWeightedAlias:!1},n}return t=o,(n=[{key:"onSelectionChange",value:function(e){var t=e.detail.selectedItems;if(t.length){var n=t[0];this.setState({selectedFunctionArn:n.functionArn}),"alias"===n.type&&this.props.qualifiers.aliases.getIn([new J.i(n.functionArn).qualifier,"additionalVersionWeight","version"])?this.setState({isWeightedAlias:!0}):this.setState({isWeightedAlias:!1})}}},{key:"onDeleteProvisionedConcurrency",value:function(){this.props.onDelete(this.state.selectedFunctionArn),this.setState({selectedFunctionArn:void 0})}},{key:"onRefresh",value:function(){this.props.refreshTable(),this.setState({selectedFunctionArn:void 0})}},{key:"noMatch",value:function(){return i.a.createElement("div",{className:"awsui-util-t-c"},i.a.createElement("div",{className:"awsui-util-pt-s awsui-util-mb-xs"},i.a.createElement(h.a,{tagName:"b",id:"noMatch"})))}},{key:"noData",value:function(){var e=new J.i(this.props.functionArn).functionName;return i.a.createElement(we.d,{id:"provisionedConcurrency.empty",noDescription:!0,href:"#/functions/".concat(e,"/create/provisioned-concurrency")})}},{key:"render",value:function(){var e=Object(p.p)(this.props.qualifiers.aliases),t=[];return this.props.provisionedConcurrencyConfigs.versions.forEach((function(n){var r,i=!(null===(r=e[n.qualifier])||void 0===r||!r.length);t.push({functionArn:n.functionArn,qualifier:n.qualifier,href:"#".concat(Object(v.d)(new J.i(n.functionArn).functionName,n.qualifier)),type:"version",requestedConcurrency:n.requestedConcurrency,provisionedConcurrency:n.provisionedConcurrency,availableConcurrency:n.availableConcurrency,status:n.status,statusReason:n.statusReason,details:i?n.aliases:"-"})})),this.props.provisionedConcurrencyConfigs.aliases.forEach((function(e){t.push({functionArn:e.functionArn,qualifier:e.qualifier,href:"#".concat(Object(v.d)(new J.i(e.functionArn).functionName,e.qualifier)),type:"alias",requestedConcurrency:e.requestedConcurrency,provisionedConcurrency:e.provisionedConcurrency,availableConcurrency:e.availableConcurrency,status:e.status,statusReason:e.statusReason,details:e.versions})})),i.a.createElement(i.a.Fragment,null,this.state.isWeightedAlias&&i.a.createElement(s.Alert,{className:"awsui-util-mb-xs"},i.a.createElement(h.a,{id:"editProvisionedConcurrency.provisionedConcurrencyAlias.errorText.weightedAlias.edit"})),i.a.createElement(ua,{functionArn:this.state.selectedFunctionArn,onDelete:this.onDeleteProvisionedConcurrency.bind(this)}),i.a.createElement(s.Table,{className:"provisionedConcurrencyVersionsAndAliasesTable",columnDefinitions:Ea,header:i.a.createElement(ca,{functionArn:this.state.selectedFunctionArn||this.props.functionArn,count:t.length,isDisabledForEditButton:!this.state.selectedFunctionArn||this.state.isWeightedAlias,refreshing:this.props.refreshing,refreshTable:this.onRefresh.bind(this),showDeleteProvisionedConcurrencyModal:this.props.showDeleteProvisionedConcurrencyModal.bind(this),goToUrl:this.props.goToUrl}),noMatch:this.noMatch(),items:t,empty:this.noData(),loading:this.props.refreshing,features:["selection","propertyFiltering","sorting"]},i.a.createElement(s.TableSorting,{sortingColumn:"availableConcurrency",sortingDescending:!0,sortableColumns:ya}),i.a.createElement(s.TableSelection,{selectionType:"single",trackBy:"functionArn",onSelectionChange:this.onSelectionChange.bind(this)}),i.a.createElement(s.TablePropertyFiltering,{filteringOptions:this.filteringOptions,groupValuesText:Y.intl.formatMessage({id:"groupValuesText"}),groupPropertiesText:Y.intl.formatMessage({id:"groupPropertiesText"}),operationAndText:Y.intl.formatMessage({id:"operationAndText"}),operationNotAndText:Y.intl.formatMessage({id:"operationNotAndText"}),operationOrText:Y.intl.formatMessage({id:"operationOrText"}),operationNotOrText:Y.intl.formatMessage({id:"operationNotOrText"}),clearFiltersText:Y.intl.formatMessage({id:"clearFiltersText"}),placeholder:Y.intl.formatMessage({id:"provisionedConcurrency.filterPlaceholder"}),allowFreeTextFiltering:!0,filteringCountTextFunction:we.j})))}}])&&fa(t.prototype,n),r&&fa(t,r),o}(i.a.Component);va(Oa,"propTypes",{functionArn:o.a.string.isRequired,provisionedConcurrencyConfigs:o.a.object.isRequired,qualifiers:o.a.object.isRequired,refreshing:o.a.bool.isRequired,refreshTable:o.a.func.isRequired,showDeleteProvisionedConcurrencyModal:o.a.func.isRequired,goToUrl:o.a.func.isRequired,alert:o.a.func.isRequired,onDelete:o.a.func.isRequired});var wa=Object(l.connect)((function(e){var t;return{provisionedConcurrencyConfigs:(null===(t=Object(y.gb)(e,"provisionedConcurrencyConfigsParser"))||void 0===t?void 0:t.toJS())||{versions:[],aliases:[]},qualifiers:Object(y.W)(e,"functionQualifiersSource")||{versions:Object(ar.Map)(),aliases:Object(ar.Map)()},functionArn:Object(y.q)(e),refreshing:$t.d.includes("hyperion")&&!Object(y.T)(e)}}),(function(e){return{refreshTable:function(){return e(Object(m.z)(["functionQualifiersSource","provisionedConcurrencyConfigsSource","provisionedConcurrencyConfigsParser"]))},showDeleteProvisionedConcurrencyModal:function(){return e(Object(G.m)("deleteProvisionedConcurrency",!0))},onDelete:function(t){return e(Object(m.p)(t))},goToUrl:function(t){return e(Object(f.c)(t))},alert:function(t){return e(Object(z.f)(t))}}}))(Oa);function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ta(e);if(t){var i=Ta(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ca(this,n)}}function Ca(e,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(o,e);var t,n,r,a=_a(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={originalReservedConcurrentExecutionsOverride:e.originalReservedConcurrentExecutions,reservedConcurrentExecutions:null},t}return t=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.originalReservedConcurrentExecutions,r=e.userSettingsLoading,i=t.originalReservedConcurrentExecutionsOverride;return r||i===n?null:{originalReservedConcurrentExecutionsOverride:n}}}],(n=[{key:"componentDidMount",value:function(){var e;null===this.state.reservedConcurrentExecutions&&this.setState({reservedConcurrentExecutions:this.props.reservedConcurrentExecutions||(null===(e=this.props.provisionedConcurrencyConfigs)||void 0===e?void 0:e.get("provisionedConcurrency"))||0})}},{key:"getUnreservedPoolSize",value:function(){var e=this.props,t=e.reservedConcurrentExecutions,n=void 0===t?null:t,r=e.unreservedConcurrentExecutions,i=e.concurrencyPoolType,a=this.state.originalReservedConcurrentExecutionsOverride,o=void 0===a?null:a,s=r;return i===ea.a.UNRESERVED&&null!==o?s+=o:i===ea.a.RESERVED&&null!==n&&(s+=o-n),s}},{key:"render",value:function(){var e;e=this.props.concurrencyPoolType===ea.a.UNRESERVED?[{key:i.a.createElement(h.a,{id:"concurrency.poolOptions.label"}),value:i.a.createElement(h.a,{id:"concurrency.poolOptions.unreserved"})},{key:i.a.createElement(h.a,{id:"concurrency.label.unreservedPool"}),value:this.getUnreservedPoolSize()}]:[{key:i.a.createElement(h.a,{id:"concurrency.poolOptions.label"}),value:i.a.createElement(h.a,{id:"concurrency.poolOptions.useReserved"})},{key:i.a.createElement(h.a,{id:"concurrency.label.reservedPool"}),value:this.props.reservedConcurrentExecutions}];var t=i.a.createElement("div",{className:"awsui-util-pv-m awsui-util-ph-l"},i.a.createElement(we.f,{flat:!0,columns:2,items:e}));return i.a.createElement("div",{className:"concurrencyComponent"},t,Object(J.U)("hyperion")&&i.a.createElement(wa,null))}}])&&Sa(t.prototype,n),r&&Sa(t,r),o}(i.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pa,"propTypes",{concurrencyPoolType:o.a.string.isRequired,userSettingsLoading:o.a.bool.isRequired,unreservedConcurrentExecutions:o.a.number.isRequired,unreservedConcurrentExecutionsMinimum:o.a.number.isRequired,provisionedConcurrencyConfigs:o.a.object.isRequired,reservedConcurrentExecutions:o.a.number,originalReservedConcurrentExecutions:o.a.number,readonly:o.a.bool});var xa=["loading","error"];function Ra(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Na=Object(l.connect)((function(e,t){var n=Object(Xi.e)(e),r=Object(y.N)(e,t.nodeId).get("data"),i=Object(y.h)(e,t.nodeId).get("data");return{concurrencyPoolType:r.get("concurrencyPoolType"),reservedConcurrentExecutions:r.get("reservedConcurrentExecutions"),originalReservedConcurrentExecutions:i.get("reservedConcurrentExecutions"),userSettingsLoading:e.user.get("isLoading"),concurrentExecutions:n.getIn(["accountLimit","concurrentExecutions"]),unreservedConcurrentExecutions:n.getIn(["accountLimit","unreservedConcurrentExecutions"]),unreservedConcurrentExecutionsMinimum:n.getIn(["accountLimit","unreservedConcurrentExecutionsMinimum"]),provisionedConcurrencyConfigs:Object(J.U)("hyperion")&&Object(y.W)(e,"provisionedConcurrencyConfigsParser")||Object(ar.Map)()}}))(Pa),Ia=function(e){var t=e.loading,n=e.error,r=Ra(e,xa),a=Object(J.U)("hyperion")?"concurrencyAndProvisionedConcurrency":"concurrency";return i.a.createElement(M.a,{id:a,editPage:"concurrency",error:n,loading:t,noGutters:!0},i.a.createElement(Na,r))};Ia.propTypes={nodeId:o.a.string.isRequired,readonly:o.a.bool,loading:o.a.bool,error:o.a.instanceOf(Error)};var Da=Object(p.E)(["functionParser","provisionedConcurrencyConfigsParser"])(Ia);function Aa(e){var t,n=e.provisionedConcurrencyConfigs,r=e.qualifiers,a=e.qualifier,o=e.refreshing;if(!r||n.isEmpty())return o?i.a.createElement(x.a,null,i.a.createElement("div",null)):null;var s=null===(t=n.get("aliases"))||void 0===t?void 0:t.find((function(e){return e.get("qualifier")===a}));if(!s)return i.a.createElement(we.f,{columns:1,items:[[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.availableProvisionedConcurrency"}),value:"-"}]]});var c=s.get("status"),l=s.get("provisionedConcurrency"),u=s.get("requestedConcurrency");return i.a.createElement(we.f,{columns:2,items:[[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.availableProvisionedConcurrency"}),value:i.a.createElement("span",null,s.get("availableConcurrency"))}],[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.status"}),value:i.a.createElement(i.a.Fragment,null,i.a.createElement(we.i,{status:o?"loading":la[c]})," ",!o&&s.get("statusReason"),!o&&("IN_PROGRESS"===c||"FAILED"===c)&&i.a.createElement(h.a,{id:"provisionedConcurrency.status.details",values:{allocated:l,requested:u}}))}]]})}Aa.propTypes={provisionedConcurrencyConfigs:a.PropTypes.object.isRequired,qualifiers:a.PropTypes.object,qualifier:a.PropTypes.string.isRequired,refreshing:a.PropTypes.bool};var Ma=[{id:"qualifier",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.version"})},cell:function(e){return e.qualifier}},{id:"weight",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.weight"})},cell:function(e){return"".concat(e.weight,"%")}},{id:"requestedConcurrency",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.requestedConcurrency"})},cell:function(e){return void 0===e.requestedConcurrency?"-":e.requestedConcurrency}},{id:"provisionedConcurrency",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.allocatedProvisionedConcurrency"})},cell:function(e){return void 0===e.provisionedConcurrency?"-":e.provisionedConcurrency}},{id:"status",header:function(){return i.a.createElement(h.a,{id:"provisionedConcurrency.status"})},cell:function(e){return e.status?i.a.createElement(i.a.Fragment,null,i.a.createElement(we.i,{status:la[e.status]})," ",e.statusReason):"-"}}];function Fa(e){var t,n,r=e.qualifiers,a=e.qualifier,o=e.provisionedConcurrencyConfigs,c=e.refreshing,l=r.getIn(["aliases",a]),u=null==l?void 0:l.get("version"),d=[{qualifier:u,weight:100}],f=null===(t=o.get("aliases"))||void 0===t?void 0:t.find((function(e){return e.get("qualifier")===(null==l?void 0:l.get("qualifier"))})),p=null===(n=o.get("versions"))||void 0===n?void 0:n.find((function(e){return e.get("qualifier")===u}));f&&"READY"===f.get("status")?(d[0].requestedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.fromAlias",values:{provisionedConcurrency:f.get("requestedConcurrency")}}),d[0].provisionedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.fromAlias",values:{provisionedConcurrency:f.get("provisionedConcurrency")}})):p&&(d[0].requestedConcurrency=p.get("requestedConcurrency"),d[0].provisionedConcurrency=p.get("provisionedConcurrency"),d[0].status=p.get("status"));var m,g=null==l?void 0:l.getIn(["additionalVersionWeight","version"]);if(g){var b,v=null==l?void 0:l.getIn(["additionalVersionWeight","weight"]),y=100-v;d[0].weight=y,d.push({qualifier:g,weight:v}),m=null===(b=o.get("versions"))||void 0===b?void 0:b.find((function(e){return e.get("qualifier")===g})),f&&"READY"===f.get("status")?(d[0].requestedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.basedOnWeight"}),d[0].provisionedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.basedOnWeight"}),d[1].requestedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.basedOnWeight"}),d[1].provisionedConcurrency=i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.basedOnWeight"})):m&&(d[1].requestedConcurrency=m.get("requestedConcurrency"),d[1].provisionedConcurrency=m.get("provisionedConcurrency"),d[1].status=m.get("status"))}return i.a.createElement(i.a.Fragment,null,(f||p||m)&&i.a.createElement("div",{className:"awsui-util-mt-l"},i.a.createElement(s.Table,{className:"versionsMappedToAliasTable",columnDefinitions:Ma,header:i.a.createElement("h2",null,i.a.createElement(h.a,{id:"provisionedConcurrency.versionsMappedToAlias.header"})),items:d,empty:i.a.createElement(h.a,{id:"functions.grid.noData"}),loading:c})))}Fa.propTypes={provisionedConcurrencyConfigs:o.a.object,qualifiers:o.a.object,qualifier:o.a.string.isRequired,refreshing:o.a.bool};var qa=Object(l.connect)((function(e){return{provisionedConcurrencyConfigs:Object(y.W)(e,"provisionedConcurrencyConfigsParser")||Object(ar.Map)(),qualifiers:Object(y.V)(e)||Object(ar.Map)()}}))(Fa),Ba=n(1836);function La(e){var t,n=e.nodeId,r=e.loading,a=e.error,o=e.onDelete,c=e.showDeleteProvisionedConcurrencyModal,l=e.qualifier,u=e.qualifiers,d=e.provisionedConcurrencyConfigs,f=e.refreshing,p=e.refresh,m=null===(t=d.get("aliases"))||void 0===t?void 0:t.find((function(e){return e.get("qualifier")===l})),g=!!m,b=!!u.getIn(["aliases",l,"additionalVersionWeight","version"]),v=m&&m.get("functionArn"),y=[];g&&b?y.push({message:Y.intl.formatMessage({id:"editProvisionedConcurrency.provisionedConcurrencyAlias.errorText.weightedAlias.edit"})}):y=Object(Ba.a)(l,u,d);var E=0===y.length&&i.a.createElement(s.Button,{id:"provisionedConcurrencyDeleteButton",disabled:!g,onClick:function(){return c()}},i.a.createElement(h.a,{id:"provisionedConcurrency.buttons.delete"}));return i.a.createElement(M.a,{id:"provisionedConcurrency",loading:r,error:a,refresh:p,refreshing:f,editPage:y.length>0?void 0:"provisioned-concurrency",actionsButton:E},i.a.createElement(ua,{functionArn:v,onDelete:function(){return o(v)}}),i.a.createElement(L.b,{scope:"provisioned-concurrency"}),y.length>0&&i.a.createElement(s.Alert,{className:"awsui-util-mb-s"},y[0].message),(0===y.length||g)&&i.a.createElement(Aa,{nodeId:n,qualifier:l,qualifiers:u,provisionedConcurrencyConfigs:d,refreshing:f}),i.a.createElement(qa,{nodeId:n,qualifier:l,refreshing:f}))}La.propTypes={nodeId:o.a.string.isRequired,qualifier:o.a.string.isRequired,loading:o.a.bool,error:o.a.instanceOf(Error),qualifiers:o.a.object.isRequired,provisionedConcurrencyConfigs:o.a.object.isRequired,refreshing:o.a.bool.isRequired,onDelete:o.a.func.isRequired,refresh:o.a.func.isRequired,showDeleteProvisionedConcurrencyModal:o.a.func.isRequired};var za=Object(p.E)(["functionQualifiersSource","provisionedConcurrencyConfigsParser"])(Object(l.connect)((function(e){return{qualifiers:Object(y.V)(e)||Object(ar.Map)(),provisionedConcurrencyConfigs:Object(y.W)(e,"provisionedConcurrencyConfigsParser")||Object(ar.Map)(),refreshing:$t.d.includes("hyperion")&&!Object(y.T)(e)}}),(function(e){return{refresh:function(){return e(Object(m.z)(["functionQualifiersSource","provisionedConcurrencyConfigsSource","provisionedConcurrencyConfigsParser"]))},showDeleteProvisionedConcurrencyModal:function(){return e(Object(G.m)("deleteProvisionedConcurrency",!0))},onDelete:function(t){return e(Object(m.p)(t))}}}))(La));function Ua(e){var t,n=e.qualifier,r=e.provisionedConcurrencyConfigs,a=e.refreshing;if(r.isEmpty())return i.a.createElement(x.a,null,i.a.createElement("div",null));var o=null===(t=r.get("versions"))||void 0===t?void 0:t.find((function(e){return e.get("qualifier")===n}));if(!o)return i.a.createElement(we.f,{columns:1,items:[[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.availableProvisionedConcurrency"}),value:"-"}]]});var s=o.get("status"),c=o.get("provisionedConcurrency"),l=o.get("requestedConcurrency");return i.a.createElement(we.f,{columns:2,items:[[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.availableProvisionedConcurrency"}),value:i.a.createElement("span",null,o.get("availableConcurrency"))}],[{key:i.a.createElement(h.a,{id:"provisionedConcurrency.status"}),value:i.a.createElement(i.a.Fragment,null,i.a.createElement(we.i,{status:a?"loading":la[s]})," ",o.get("statusReason"),!a&&("IN_PROGRESS"===s||"FAILED"===s)&&i.a.createElement(h.a,{id:"provisionedConcurrency.status.details",values:{allocated:c,requested:l}}))}]]})}Ua.propTypes={qualifier:a.PropTypes.string.isRequired,provisionedConcurrencyConfigs:a.PropTypes.object.isRequired,refreshing:a.PropTypes.bool};function Wa(e){var t,n=e.nodeId,r=e.loading,a=e.error,o=e.onDelete,c=e.showDeleteProvisionedConcurrencyModal,l=e.qualifier,u=e.qualifiers,d=e.provisionedConcurrencyConfigs,f=e.refresh,p=e.refreshing,m=Object(Ba.e)(l,u,d),g=null===(t=d.get("versions"))||void 0===t?void 0:t.find((function(e){return e.get("qualifier")===l})),b=!!g,v=g&&g.get("functionArn"),y=0===m.length&&i.a.createElement(s.Button,{id:"provisionedConcurrencyDeleteButton",disabled:!b,onClick:function(){return c()}},i.a.createElement(h.a,{id:"provisionedConcurrency.buttons.delete"}));return i.a.createElement(M.a,{id:"provisionedConcurrency",loading:r,error:a,refresh:f,refreshing:p,editPage:m.length>0?void 0:"provisioned-concurrency",actionsButton:y},i.a.createElement(ua,{functionArn:v,onDelete:function(){return o(v)}}),i.a.createElement(L.b,{scope:"provisioned-concurrency"}),m.length>0&&i.a.createElement(s.Alert,{className:"awsui-util-mb-s"},m[0].message),0===m.length&&i.a.createElement(Ua,{nodeId:n,qualifier:l,provisionedConcurrencyConfigs:d,refreshing:p}))}Wa.propTypes={nodeId:o.a.string.isRequired,loading:o.a.bool,error:o.a.instanceOf(Error),onDelete:o.a.func.isRequired,showDeleteProvisionedConcurrencyModal:o.a.func.isRequired,qualifier:o.a.string.isRequired,qualifiers:o.a.object.isRequired,provisionedConcurrencyConfigs:o.a.object.isRequired,refreshing:o.a.bool.isRequired,refresh:o.a.func.isRequired};var Va=Object(p.E)(["functionQualifiersSource","provisionedConcurrencyConfigsParser"])(Object(l.connect)((function(e){return{qualifiers:Object(y.V)(e)||Object(ar.Map)(),provisionedConcurrencyConfigs:Object(y.W)(e,"provisionedConcurrencyConfigsParser")||Object(ar.Map)(),refreshing:$t.d.includes("hyperion")&&!Object(y.T)(e)}}),(function(e){return{refresh:function(){return e(Object(m.z)(["provisionedConcurrencyConfigsSource","provisionedConcurrencyConfigsParser"]))},showDeleteProvisionedConcurrencyModal:function(){return e(Object(G.m)("deleteProvisionedConcurrency",!0))},onDelete:function(t){return e(Object(m.p)(t))}}}))(Wa)),Ga=n(1891),Ha=function(e){return e===Ft.b.DISABLED?i.a.createElement(h.a,{id:"functionDetail.sections.monitoringTools.status.".concat(e)}):i.a.createElement(we.i,{status:e},i.a.createElement(h.a,{id:"functionDetail.sections.monitoringTools.status.".concat(e)}))},Za=Object(l.connect)((function(e,t){var n;return{loading:null!==(n=null==t?void 0:t.loading)&&void 0!==n?n:!Object(y.mb)(e),extensionsStatusValue:Object(Ft.e)(e),columns:Math.ceil((Object(Ft.f)(e).length+1)/2)}}))((function(e){var t=e.loading,n=e.columns,r=void 0===n?1:n,a=e.extensionsStatusValue.map((function(e){var t=e.id,n=e.status;return{key:i.a.createElement(h.a,{id:"editMonitoringTools.".concat(t,".field.label")}),value:Ha(n)}}));return i.a.createElement(x.a,{cond:t},i.a.createElement(Oe.a,{size:"l"},!t&&i.a.createElement(we.f,{flat:!0,items:a,columns:r}),i.a.createElement(Ga.ExtensionsPageEntry,null)))}));function Ja(e){var t=e.readonly,n=e.nodeId,r=e.loading,a=e.error,o=e.columns,s=void 0===o?1:o;return i.a.createElement(M.a,{id:"monitoringTools",editPage:"monitoring-tools",error:a,loading:r,readonly:t,showInfoLink:!0},i.a.createElement(Za,{readonly:t,nodeId:n,columns:s,loading:r}))}Ja.propTypes={nodeId:o.a.string.isRequired,columns:o.a.number,readonly:o.a.bool,loading:o.a.bool,error:o.a.instanceOf(Error)};var Ka=Object(p.E)(["functionParser","simulateRoleForExtensions"])(Ja),Qa=n(2039),Ya=n(1856),$a=function(e){return i.a.createElement("div",{className:"awsui-util-mb-l"},i.a.createElement(Ya.a,{tag:[O.WorkflowTags.stepFunctions,O.WorkflowTags.stateMachine],qualifiedFunctionName:e.qualifiedFunctionName}))};$a.propTypes={qualifiedFunctionName:o.a.string.isRequired};var Xa=Object(p.E)(["sfnStateMachineData"])($a);function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){no(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ro(e){var t,n=e.functionName,r=e.loading,a=e.error,o=e.result,l=e.qualifier,u=e.navigateToEdit,d=(null==o?void 0:o.get("systemTags"))||Object(ar.List)(),f=(null==o?void 0:o.get("userTags"))||Object(ar.List)(),p=Object(J.L)(l),m="version"!==p&&"alias"!==p,g=!0;if(m){var b=[{id:"key",header:i.a.createElement(h.a,{id:"tags.table.keyHeader"}),cell:function(e){return e.key}},{id:"value",header:i.a.createElement(h.a,{id:"tags.table.valueHeader"}),cell:function(e){return e.value||"-"}}];t=i.a.createElement(s.Table,{columnDefinitions:b,items:d.concat(f).toJS(),variant:"borderless",empty:i.a.createElement(we.d,{id:"tags.emptyTags",onClick:function(){return u(n)}})})}else g=!1,t=i.a.createElement(c.a,{id:"tags.".concat(p,"Description.html"),values:{functionName:n},tagName:"p"});return i.a.createElement(M.a,{id:"tags",counter:m?" (".concat(d.size+f.size,")"):null,description:i.a.createElement(h.a,{id:"functionDetail.sections.tags.description"}),editPage:m?"tags":"",error:a,loading:r,noGutters:g},t)}ro.propTypes={functionName:o.a.string.isRequired,loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),result:o.a.object,qualifier:o.a.string,navigateToEdit:o.a.func.isRequired};var io=Object(p.E)(["tagParser","urlParser"])(Object(l.connect)((function(e,t){return to(to({functionName:new J.i(Object(y.q)(e)).functionName},Object(y.nb)(e,"tagParser")),t)}),(function(e){return{navigateToEdit:function(t){e(Object(m.L)(!0)),e(Object(v.f)(t,null,"tags"))}}}))(ro)),ao=n(676),oo=n(1703),so=n(2642);function co(e){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(){return(lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);if(t){var i=go(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ho(this,n)}}function ho(e,t){if(t&&("object"===co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eo=Object(X.tagContextHoc)(ye.c),Oo={info:"info",warning:"warning",error:"error",fatal:"error"},wo={details:Ie.a.listOf(ze.e).isRequired,exception:Ie.a.map,enabled:o.a.bool,name:o.a.string,originalTrigger:Ie.a.map,service:ze.c.isRequired,sourceId:o.a.string.isRequired,state:o.a.string,triggerType:o.a.string,url:o.a.string},jo=function(e,t){return e.getMessage("data.".concat(t))||e.getMessage("schema.".concat(t,".name"))||t},So=function(e){var t=e.exception;return t&&"info"!==t.get("level")},ko=function(e){var t=e.exception;return!(null!=t&&t.get("correctable"))},_o=function(e){return!e.service.toggle},Co=function(e){return e.enabled},To=function(e){return!e.enabled},Po=function(e){var t=e.state;return t&&!["disabled","enabled"].includes(t.toLowerCase())},xo=function(e,t){return!e.length||e.some((function(e){return t.some((function(t){return t(e)}))}))},Ro=function(e){var t=e.children,n=e.href;return null!=n&&n.startsWith("http")?i.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},t):t||null};function No(e){var t=e.formatted,n=e.link,r=e.name,a=i.a.createElement("strong",null,i.a.createElement(Ro,{href:n},t));return i.a.createElement(h.a,{id:"separator",values:{key:r,value:a}})}function Io(e){var t,n=e.details,r=e.enabled,a=e.exception,o=e.name,c=e.service,u=e.sourceId,d=e.state,f=e.triggerType,p=e.url,m=null;if(c.toggle){var g=Po({state:d})?d:i.a.createElement(h.a,{id:"trigger.table.".concat(r?"enabled":"disabled")});m=i.a.createElement(h.a,{id:"wrapper",values:{value:g}})}var b=Object(l.useSelector)((function(e){return wt.c.getNodes(e)[f]["x-lambda"].highlightDetails})),v={key:i.a.createElement("strong",null,c.name),value:i.a.createElement("span",null,i.a.createElement(Ro,{href:p},o)," ",m)},y=n.toJS().map((function(e){return vo(vo({},e),{},{name:jo(c.config,e.key),formatted:Object(oo.f)(e.value)})})).filter((function(e){return!!e.formatted})).filter((function(e){var t,n,r=null===(t=c.config.widgetAnnotations[e.key])||void 0===t||null===(n=t.visible)||void 0===n?void 0:n.preview;return!r||Object(J.U)(r)})).sort((function(e,t){return e.name.localeCompare(t.name)})),E=y.filter((function(e){return null==b?void 0:b.includes(e.key)}));y=y.filter((function(e){return!(null!=b&&b.includes(e.key))}));var w,j=i.a.createElement("div",null,i.a.createElement(Ro,{href:u},i.a.createElement("small",null,u)));return i.a.createElement("div",{className:"trigger"},i.a.createElement("div",{className:"awsui-util-mr-s"},i.a.createElement("img",{alt:c.name,src:c.icon})),i.a.createElement("div",null,i.a.createElement(h.a,{tagName:"h5",id:"separator",values:v}),"kafka"!==(null==c||null===(t=c.config)||void 0===t?void 0:t.id)&&j,a&&i.a.createElement("p",null,i.a.createElement(we.i,{status:Oo[a.get("level")]},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(J.mb)((w=a.get("message"),Object(oo.g)().renderInline(w)))}}))),0===E.length?null:i.a.createElement("ul",null,E.map((function(e,t){return i.a.createElement("li",{key:t},i.a.createElement(No,e))}))),0===y.length?null:i.a.createElement(s.ExpandableSection,{header:i.a.createElement(h.a,{id:"details"}),"data-analytics":O.WorkflowTags.details},i.a.createElement("ul",null,y.map((function(e,t){return i.a.createElement("li",{key:t},i.a.createElement(No,e))}))))))}function Do(e){var t=e.selectedAction,n=e.name,r=e.service,a=e.exception,o=i.a.createElement(h.a,{id:"separator",values:{key:r.name,value:n}});return a&&"fix"===t?i.a.createElement(so.a,{content:Object(J.mb)(a.get("action"))},o):o}function Ao(e,t){var n=t.service,r=n.config.getMessage("".concat(e,".trigger.alert"));return r?"".concat(n.name,": ").concat(r):null}Ro.propTypes={children:o.a.node,href:o.a.string},No.propTypes={formatted:o.a.node.isRequired,link:o.a.string,name:o.a.string.isRequired},Io.propTypes=wo,Do.propTypes=vo(vo({},wo),{},{selectedAction:o.a.string.isRequired}),Ao.propTypes=vo(vo({},wo),{},{selectedAction:o.a.string.isRequired});var Mo={enable:regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ao.put)(Object(z.g)());case 2:return n=t.id,r=t.originalTrigger,e.next=5,Object(ao.call)(oo.l,!0,r.get("target"),r.toJS());case 5:return i=e.sent,a=i.data.state,e.next=9,Object(ao.select)(y.N,n);case 9:if(o=e.sent,!a){e.next=18;break}return s=Object(ar.fromJS)({state:a}),e.next=14,Object(ao.put)(Object(m.B)(o,s));case 14:return e.next=16,Object(ao.put)(Object(Ot.r)(n,{state:a}));case 16:e.next=23;break;case 18:return s=Object(ar.fromJS)({enabled:!0,originalTrigger:vo(vo({},r.toJS()),{},{enabled:!0})}),e.next=21,Object(ao.put)(Object(m.B)(o,s));case 21:return e.next=23,Object(ao.put)(Object(Ot.r)(n,{enabled:!0}));case 23:case"end":return e.stop()}}),e)})),disable:regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ao.put)(Object(z.g)());case 2:return n=t.id,r=t.originalTrigger,e.next=5,Object(ao.call)(oo.l,!1,r.get("target"),r.toJS());case 5:return i=e.sent,a=i.data.state,e.next=9,Object(ao.select)(y.N,n);case 9:if(o=e.sent,!a){e.next=18;break}return s=Object(ar.fromJS)({state:a}),e.next=14,Object(ao.put)(Object(m.B)(o,s));case 14:return e.next=16,Object(ao.put)(Object(Ot.r)(n,{state:a}));case 16:e.next=23;break;case 18:return s=Object(ar.fromJS)({enabled:!1,originalTrigger:vo(vo({},r.toJS()),{},{enabled:!1})}),e.next=21,Object(ao.put)(Object(m.B)(o,s));case 21:return e.next=23,Object(ao.put)(Object(Ot.r)(n,{enabled:!1}));case 23:case"end":return e.stop()}}),e)})),fix:regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ao.put)(Object(z.g)());case 2:return n=t.id,r=t.originalTrigger,e.next=5,Object(ao.call)(oo.e,r.toJS());case 5:return i=e.sent,a=i.exception,e.next=9,Object(ao.select)(y.N,n);case 9:return o=e.sent,s=Object(ar.fromJS)({exception:a,originalTrigger:vo(vo({},r.toJS()),{},{exception:a})}),e.next=13,Object(ao.put)(Object(m.B)(o,s));case 13:return e.next=15,Object(ao.put)(Object(Ot.r)(n,{exception:a}));case 15:case"end":return e.stop()}}),e)})),delete:regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ao.put)(Object(z.g)());case 2:return n=t.id,r=t.originalTrigger,e.next=5,Object(ao.call)(oo.d,r.toJS());case 5:return i=e.sent,a=i.data.state,e.next=9,Object(ao.select)(y.N,n);case 9:if(o=e.sent,!a){e.next=18;break}return s=Object(ar.fromJS)({state:a}),e.next=14,Object(ao.put)(Object(m.B)(o,s));case 14:return e.next=16,Object(ao.put)(Object(Ot.r)(n,{state:a}));case 16:e.next=20;break;case 18:return e.next=20,Object(ao.put)(Object(Ot.r)(n,{deleted:!0}));case 20:case"end":return e.stop()}}),e)}))},Fo=[{id:"trigger",header:function(){return i.a.createElement(h.a,{id:"triggerTable.column.trigger"})},cell:function(e){return i.a.createElement(Io,e)}}],qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(o,e);var t,n,r,a=mo(o);function o(){return uo(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.select([])}},{key:"componentDidUpdate",value:function(e){this.props.title===e.title&&this.props.refreshLoading===e.refreshLoading||this.props.select([])}},{key:"componentWillUnmount",value:function(){this.props.clearFilteringText()}},{key:"render",value:function(){var e,t,n=this,r=this.props.triggers.filter((function(e){var t=e.exception;return"vertex.exception.node.internal.unsupported"!==(null==t?void 0:t.get("code"))})),a=this.props.triggers.length!==r.length,o=i.a.createElement(i.a.Fragment,null,i.a.createElement(we.a,{header:this.props.title,counter:" (".concat(this.props.triggers.length,")")},this.props.refreshButton,i.a.createElement(s.Button,{disabled:xo(this.props.selected,[So,_o,Co,Po]),onClick:function(){return n.props.selectAction("enable")},"data-analytics":O.WorkflowTags.enable},i.a.createElement(h.a,{id:"triggerTable.button.enable"})),i.a.createElement(s.Button,{disabled:xo(this.props.selected,[So,_o,To,Po]),onClick:function(){return n.props.selectAction("disable")},"data-analytics":O.WorkflowTags.disable},i.a.createElement(h.a,{id:"triggerTable.button.disable"})),i.a.createElement(s.Button,{disabled:xo(this.props.selected,[ko]),onClick:function(){return n.props.selectAction("fix")},"data-analytics":O.WorkflowTags.fix},i.a.createElement(h.a,{id:"triggerTable.button.fix"})),i.a.createElement(s.Button,{disabled:xo(this.props.selected,[Po]),onClick:function(){return n.props.selectAction("delete")},"data-analytics":O.WorkflowTags.delete},i.a.createElement(h.a,{id:"triggerTable.button.delete"})),null!==(e=this.props.addTriggerButton)&&void 0!==e?e:null),a&&i.a.createElement("div",{className:"awsui-util-mt-m"},i.a.createElement(s.Alert,{type:"info"},i.a.createElement(h.a,{id:"triggerTable.unsupported"}))));return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Table,{id:"trigger-table",header:o,columnDefinitions:Fo,items:r,features:["filtering","pagination","selection"],noMatch:i.a.createElement(we.d,{id:"triggerTable.noMatch.empty",onClick:this.props.clearFilteringText}),loading:!!this.props.loading,empty:this.props.error?i.a.createElement(we.b,{error:this.props.error}):i.a.createElement(we.d,{id:"triggerTable.noItems.empty",noButton:!this.props.addTriggerButton,button:this.props.addTriggerButton})},i.a.createElement(s.TableFiltering,{filteringFields:["name","sourceId","serviceName"],filteringText:null!==(t=this.props.filteringText)&&void 0!==t?t:"",onFilteringChange:function(e){var t=e.detail;return n.props.setFilteringText(t.filteringText)},filteringPlaceholder:Y.intl.formatMessage({id:"triggerTable.filter.placeholder"}),filteringCountTextFunction:we.j}),i.a.createElement(s.TablePagination,{pageSize:10}),i.a.createElement(s.TableSelection,{keepSelection:!0,selectionType:"multi",trackBy:"id",selectedItems:this.props.selected,onSelectionChange:function(e){return n.props.select(e.detail.selectedItems)}})),i.a.createElement(Eo,{id:"trigger-table",size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"triggerTable.modal.".concat(this.props.selectedAction,".header")}),contentProvider:function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{tagName:"p",id:"triggerTable.modal.".concat(n.props.selectedAction,".").concat(t?"completed":"message")}),e)},footerProvider:function(e,t,r,a,o,c,l){return i.a.createElement(i.a.Fragment,null,e&&t>1&&i.a.createElement("span",{className:"awsui-util-f-l"},i.a.createElement(s.Button,{loading:a&&e,onClick:c,"data-analytics":O.WorkflowTags.stop},i.a.createElement(h.a,{id:"triggerTable.modal.stop"}))),i.a.createElement("span",{className:"awsui-util-f-r"},e||o?null:i.a.createElement(s.Button,{variant:"link",onClick:r,"data-analytics":O.WorkflowTags.cancel},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:e,onClick:o?r:l,"data-analytics":o?O.WorkflowTags.close:O.WorkflowTags[n.props.selectedAction]},i.a.createElement(h.a,{id:o?"close":"triggerTable.modal.".concat(n.props.selectedAction,".buttonText")}))))},alertProvider:function(e){return Ao(n.props.selectedAction,e)},itemProvider:function(e){return i.a.createElement(Do,lo({selectedAction:n.props.selectedAction},e))},itemTask:Mo[this.props.selectedAction],items:this.props.selected,onClose:this.props.removeDeletedTriggers,tag:O.WorkflowTags.triggersModal}))}}])&&fo(t.prototype,n),r&&fo(t,r),o}(i.a.Component);yo(qo,"propTypes",{title:o.a.string.isRequired,triggers:o.a.array.isRequired,refreshLoading:o.a.bool.isRequired,refreshButton:o.a.node,addTriggerButton:o.a.node,loading:o.a.bool,error:o.a.bool,filteringText:o.a.string.isRequired,selected:o.a.array.isRequired,selectedAction:o.a.string,select:o.a.func.isRequired,selectAction:o.a.func.isRequired,removeDeletedTriggers:o.a.func.isRequired,setFilteringText:o.a.func.isRequired,clearFilteringText:o.a.func.isRequired});var Bo=Object(l.connect)((function(e){return{selected:wt.c.getSelectedTriggers(e),selectedAction:wt.c.getSelectedTriggerAction(e),filteringText:Object(y.hb)(e)}}),(function(e){return{select:function(t){return e(Object(Ot.h)(t))},selectAction:function(t){e(Object(Ot.g)(t)),e(Object(G.m)("trigger-table",!0))},deleteTriggerNode:function(t){return e(Object(m.o)(t,!0))},removeSelectedDeletedTriggers:function(){return e(Object(Ot.e)())},setFilteringText:function(t){return e(Object(m.Q)(t))},clearFilteringText:function(){return e(Object(m.Q)(""))}}}),(function(e,t,n){return vo(vo(vo(vo({},n),e),t),{},{removeDeletedTriggers:function(){var n;null===(n=e.selected)||void 0===n||n.forEach((function(e){e.deleted&&t.deleteTriggerNode(e.id)})),t.removeSelectedDeletedTriggers()}})}))(qo);function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wo=function(e,t){return e.get("nodes").filter((function(e){return"trigger"===e.get("type")})).map((function(e){var t=e.get("data"),n={};return["enabled","name","sourceId","url","exception","details","state","originalTrigger"].forEach((function(e){n[e]=t.get(e)})),["id","icon"].forEach((function(t){n[t]=e.get(t)})),n.serviceName=e.get("name"),n.triggerType=e.getIn(["data","id"]),n})).map((function(e){var n=t[e.triggerType],r={name:e.serviceName,icon:n.icon,toggle:n.toggle,config:n};return zo(zo({},e),{},{service:r})})).toArray()},Vo=function(e){var t=e.error,n=e.functionArn,r=e.graph,a=e.loading,o=e.refreshDisabled,c=e.refreshLoading,l=e.refreshTriggers,u=e.triggersConfig,d=i.a.createElement(s.Button,{id:"add-trigger",href:"#/add/relation?type=trigger&targetType=lambda&target=".concat(n),onClick:function(){Object(O.logEvent)(O.EVENT_NAMES.TRIGGER_ADD_CARD)},"data-analytics":O.WorkflowTags.addTrigger},i.a.createElement(h.a,{id:"trigger.create.title"})),f=i.a.createElement(s.Button,{icon:"refresh",disabled:o,loading:c,onClick:l,"data-analytics":O.WorkflowTags.refresh});return i.a.createElement(Bo,{addTriggerButton:d,error:t,loading:a,refreshButton:f,refreshLoading:c,title:Y.intl.formatMessage({id:"functionDesigner.configureTab.triggers.header"}),triggers:Wo(r,u)})};Vo.propTypes={loading:o.a.bool,error:o.a.instanceOf(Error),functionArn:o.a.string.isRequired,graph:Ie.a.map.isRequired,refreshDisabled:o.a.bool.isRequired,refreshLoading:o.a.bool.isRequired,triggersConfig:o.a.object.isRequired,refreshTriggers:o.a.func.isRequired};var Go=Object(p.E)(["vertexSource","relationParser"])(Object(l.connect)((function(e){return{functionArn:Object(y.q)(e),graph:Object(y.F)(e),refreshDisabled:!Object(y.Z)(e).isEmpty(),refreshLoading:!Object(y.b)(e),triggersConfig:wt.c.getNodes(e)}}),(function(e){return{refreshTriggers:function(){return e(Object(m.z)(["vertexSource","relationParser"]))}}}))(Vo)),Ho=n(1956),Zo=n(1916);function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){Qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yo=function(e){var t=e.type,n=e.id,r=e.mainDetail,a=e.otherDetails,o=null==a?void 0:a.filter(J.eb).join(", "),s=Object(J.x)("vpc",t,n);return i.a.createElement("span",null,i.a.createElement("a",{href:s},n)," (",r,")",o?i.a.createElement("span",null," | ",o):null)};function $o(e){var t,n=e.loading,r=e.error,a=e.navigateToEdit,o=e.result,c=e.readonly;if(n)return i.a.createElement(W.a,{size:"large"});if(r)return i.a.createElement(s.Alert,{type:"error"},r.message);if(!o)return i.a.createElement(we.d,{id:"editVpc.vpcSelection.empty",onClick:a,noButton:c});var l=o.vpc,u=o.securityGroups,d=o.subnets,f=i.a.createElement("span",null,i.a.createElement(Yo,{type:"vpc",id:l.vpcId,mainDetail:l.cidrBlock,otherDetails:[l.default&&Y.intl.formatMessage({id:"default"})||"",null===(t=l.tags.find((function(e){return"Name"===e.key})))||void 0===t?void 0:t.value]})),p=i.a.createElement("ul",null,d.map((function(e,t){var n,r=e.subnetId,a=e.cidrBlock,o=e.availabilityZone,s=e.tags;return i.a.createElement("li",{key:t},i.a.createElement(Yo,{type:"subnet",id:r,mainDetail:a,otherDetails:[null!=o?o:"",null===(n=s.find((function(e){return"Name"===e.key})))||void 0===n?void 0:n.value]}))}))),m=i.a.createElement("ul",null,u.map((function(e,t){var n,r,a=e.groupId,o=e.groupName,s=e.tags;return i.a.createElement("li",{key:t},i.a.createElement(Yo,{type:"securityGroup",id:a,mainDetail:o,otherDetails:[null!==(n=null===(r=s.find((function(e){return"Name"===e.key})))||void 0===r?void 0:r.value)&&void 0!==n?n:""]}))}))),g=[{key:i.a.createElement(h.a,{id:"editVpc.vpcId.field.label"}),value:f},{key:i.a.createElement(h.a,{id:"editVpc.subnetIds.field.label"}),value:p},{key:i.a.createElement(h.a,{id:"editVpc.securityGroupIds.field.label"}),value:m}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(we.f,{flat:!0,columns:3,items:g}),i.a.createElement("div",{className:"awsui-util-mt-l"},i.a.createElement(Zo.a,{securityGroups:u})))}Yo.propTypes={type:o.a.string.isRequired,id:o.a.string.isRequired,mainDetail:o.a.string.isRequired,otherDetails:o.a.arrayOf(o.a.string)},$o.propTypes={loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),result:o.a.object,functionName:o.a.string.isRequired,navigateToEdit:o.a.func.isRequired,qualifier:o.a.string,readonly:o.a.bool};var Xo=Object(p.E)(["vpcSource","urlParser"])(Object(l.connect)((function(e,t){return Ko(Ko(Ko({},Object(y.nb)(e,"vpcSource")),t),{},{functionName:Object(y.B)(e),qualifier:Object(y.U)(e)})}),(function(e){return{navigateToEdit:function(t){e(Object(v.f)(t,null,"vpc"))}}}),(function(e,t,n){return Ko(Ko(Ko(Ko({},n),e),t),{},{navigateToEdit:function(){return t.navigateToEdit(e.functionName,e.qualifier)}})}))($o));function es(e){var t=e.readonly;return i.a.createElement(M.a,{id:"vpc",readonly:t,editPage:"vpc",showInfoLink:!0},i.a.createElement(Xo,{readonly:t}))}es.propTypes={readonly:o.a.bool};var ts=["isReplica"];function ns(){return(ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function as(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cs=Object(X.tagContextHoc)(hr),ls=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ss(this,"idsForQualifierType",(function(e){switch(e){case b.H.ALIAS:return t._aliasedFunctionIds;case b.H.VERSION:return t._versionedFunctionIds;default:return t._allIds}})),ss(this,"addItem",(function(e){var n=e.id,r=e.labelId,a=e.tag,o=e.content,s=e.preconditions,l=void 0===s?[]:s,u=i.a.createElement(h.a,{id:"preview",values:{name:i.a.createElement(h.a,{id:"functionURL"})}});t._itemIndexes.has(n)&&l.every(J.eb)&&t._itemDescriptors.set(n,{id:n,tag:a,content:o,label:"url"===n?u:i.a.createElement(c.a,{id:"functionDesigner.tab.configure.".concat(null!=r?r:n)})})})),ss(this,"getItems",(function(e){return t.idsForQualifierType(e).toList().sortBy((function(e){return t._itemIndexes.get(e)})).filter((function(e){return t._itemDescriptors.has(e)})).map((function(e){return t._itemDescriptors.get(e)})).toArray()})),this._itemDescriptors=Object(ar.Map)().asMutable(),this._itemIndexes=Object(ar.List)([b.e.BASIC_SETTINGS,b.e.TRIGGERS,b.e.PERMISSIONS,b.e.DESTINATIONS,b.e.URL,b.e.ENV_VARS,b.e.TAGS,b.e.VPC,b.e.MONITORING_TOOLS,b.e.CONCURRENCY,b.e.ASYNC_INVOKE,b.e.CODE_SIGNING,b.e.DATABASE_PROXIES,b.e.FILE_SYSTEMS,b.e.STATE_MACHINES]).toMap().flip()}var t,n,r;return t=e,(n=[{key:"_aliasedFunctionIds",get:function(){return Object(ar.Set)([b.e.ASYNC_INVOKE,b.e.BASIC_SETTINGS,b.e.CONCURRENCY,b.e.DESTINATIONS,b.e.MONITORING_TOOLS,b.e.PERMISSIONS,b.e.TRIGGERS,b.e.URL])}},{key:"_versionedFunctionIds",get:function(){return this._aliasedFunctionIds.union([b.e.ENV_VARS,b.e.DATABASE_PROXIES,b.e.FILE_SYSTEMS,b.e.STATE_MACHINES,b.e.VPC])}},{key:"_allIds",get:function(){return Object(ar.Set)(this._itemIndexes.keys())}}])&&os(t.prototype,n),r&&os(t,r),e}(),us=Object(d.default)((function(e){var t=e.qualifier,n=e.isReplica;switch(Object(J.L)(t)){case b.H.ALIAS:return{Component:za,preconditions:[Object(J.U)("hyperion")]};case b.H.VERSION:return{Component:Va,preconditions:[Object(J.U)("hyperion"),!n,Object(J.Y)(t)]};default:return{Component:Da}}}),sr.a),ds=Object(d.default)((function(e){return{Component:function(){switch(Object(J.L)(e)){case b.H.ALIAS:return function(){return i.a.createElement(Qa.b,{id:"generalConfiguration",qualifier:e,qualifierType:b.H.ALIAS})};case b.H.VERSION:return function(t){var n=t.isReplica,r=as(t,ts);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Cr,r),!n&&i.a.createElement(Qa.b,{qualifier:e,qualifierType:b.H.VERSION}))};default:return Cr}}()}})),fs=function(e){var t,n=e.functionArn,r=e.loading,a=e.functionSourceStat,o=new J.i(n),s=o.functionName,c=o.qualifier,l=Object(J.L)(c),u=Object(p.t)(n),d={nodeId:n,readonly:!!c},f=[{id:b.e.ASYNC_INVOKE,Component:Sr,props:is(is({},d),{},{columns:3}),preconditions:[Object(J.U)("bananaslug"),!u],tag:O.WorkflowTags.asyncInvoke,requireFunctionSource:!0},is({id:b.e.BASIC_SETTINGS,props:is(is({},d),{},{isReplica:u,columns:3}),tag:O.WorkflowTags.general},ds(c)),{id:b.e.CODE_SIGNING,Component:at,props:d,preconditions:[Object(J.U)("ishikawa"),!u],tag:O.WorkflowTags.codeSigning,requireFunctionSource:!0},is(is({id:b.e.CONCURRENCY,labelId:c&&"provisionedConcurrency",props:is(is({},d),{},{qualifier:c}),tag:O.WorkflowTags.concurrency},us({qualifier:c,isReplica:u})),{},{requireFunctionSource:!0}),{id:b.e.DATABASE_PROXIES,Component:Qr,props:d,preconditions:[Object(J.U)("dittograph"),!u],tag:O.WorkflowTags.databaseProxies,requireFunctionSource:!0},{id:b.e.ENV_VARS,Component:ni,props:d,tag:O.WorkflowTags.envVars,requireFunctionSource:!0},{id:b.e.DESTINATIONS,Component:zr,preconditions:[Object(J.U)("starfish")],tag:O.WorkflowTags.destinations},{id:b.e.FILE_SYSTEMS,Component:fi,props:d,preconditions:[Object(J.U)("evanescent"),!u],tag:O.WorkflowTags.fileSystems,requireFunctionSource:!0},{id:b.e.MONITORING_TOOLS,Component:Ka,props:is({},d),preconditions:[Object(J.U)("triscuit"),!u],tag:O.WorkflowTags.monitoringTools},{id:b.e.PERMISSIONS,Component:$i,tag:O.WorkflowTags.permissions},{id:b.e.TAGS,Component:io,tag:O.WorkflowTags.tags},{id:b.e.TRIGGERS,Component:Go,tag:O.WorkflowTags.triggers},{id:b.e.STATE_MACHINES,Component:Xa,props:{qualifiedFunctionName:"".concat(s,":").concat(null!=c?c:b.a)},preconditions:[Object(J.U)("orchestration2")],tag:O.WorkflowTags.stateMachines},{id:b.e.URL,Component:Ho.b,preconditions:[Object(J.U)("ganondorf"),!u],tag:O.WorkflowTags.url},{id:b.e.VPC,Component:es,props:d,tag:O.WorkflowTags.vpc,requireFunctionSource:!0}],m=(t=new ls,f.forEach((function(e){var n=e.id,o=e.labelId,s=e.tag,c=e.Component,l=e.props,u=void 0===l?{}:l,d=e.preconditions,f=void 0===d?[]:d,p=e.requireFunctionSource;void 0!==p&&p&&!a.result||t.addItem({id:n,labelId:o,tag:s,preconditions:f,content:i.a.createElement(X.TaggedDiv,{tag:s},i.a.createElement(x.a,{cond:r},i.a.createElement(c,ns({},u,{tag:s}))))})})),t.getItems(l));return i.a.createElement(x.a,{cond:a.loading},i.a.createElement(cs,{items:m,sidebarId:b.K.CONFIGURE,tag:O.WorkflowTags.configurationSidebar}))};fs.propTypes={loading:o.a.bool.isRequired,functionArn:o.a.string.isRequired,functionSourceStat:o.a.shape({loading:o.a.bool,result:o.a.object}).isRequired};var ps=Object(l.connect)((function(e,t){var n;return{functionArn:Object(y.q)(e),loading:null!==(n=null==t?void 0:t.loading)&&void 0!==n?n:!Object(y.a)(e,"configure")||!Object(y.mb)(e),functionSourceStat:Object(y.nb)(e,"functionSource")}}),null)(fs),ms=Object(p.E)(["urlParser","functionSource"])(ps),hs=n(1794);function gs(){return(gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Es=function(e){var t=e.functionName,n=e.isQualifiersDataLoaded,r=e.qualifier,i=e.qualifiers,a=e.goToQualifier,o=e.children,s=Object(ar.List)(),c=Object(ar.List)();n&&(Object(p.t)(t)||(s=Object(p.f)(i.aliases,r,a)),c=Object(p.g)(i.versions,r,a,Object(p.p)(s)).filterNot((function(e){return Object(p.r)(e.get("version"))})));var l=void 0===i;return o({qualifiersData:{loading:l,error:!l&&i instanceof Error?i:null,aliases:s,versions:c}})};Es.propTypes={children:o.a.func.isRequired,functionName:o.a.string.isRequired,isQualifiersDataLoaded:o.a.bool.isRequired,qualifier:o.a.string.isRequired,qualifiers:o.a.oneOfType([o.a.exact({versions:Ie.a.map.isRequired,aliases:Ie.a.map}),o.a.instanceOf(Error)]),goToQualifier:o.a.func.isRequired};var Os=Object(l.connect)((function(e){var t=Object(De.b)(e).params,n=t.functionName,r=t.version,i=t.alias;return{functionName:n,qualifier:r||i||"",isQualifiersDataLoaded:Object(y.H)(e),qualifiers:Object(y.W)(e,"functionQualifiersSource")}}),(function(e){return{goToQualifierFor:function(t){return function(n){e(Object(f.c)({pathname:Object(v.d)(t,n,null,void 0,!1)},{persistQuery:!0}))}}}}),(function(e,t,n){return vs(vs(vs({},e),n),{},{goToQualifier:t.goToQualifierFor(e.functionName)})}))(Es),ws=function(e){return Object(p.E)(["functionQualifiersSource"])((function(t){return i.a.createElement(Os,null,(function(n){var r,a=n.qualifiersData;return i.a.createElement(e,gs({qualifiersData:vs(vs({},a),{},{loading:null!==(r=t.loading)&&void 0!==r?r:a.loading})},t))}))}))},js=o.a.exact({loading:o.a.bool.isRequired,error:o.a.instanceOf(Error),versions:Ie.a.list.isRequired,aliases:Ie.a.list.isRequired});function Ss(){return(Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ks(e){var t=encodeURIComponent(e.functionName),n=encodeURI(e.qualifier);return i.a.createElement(ye.b,{id:e.id,size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"modal.delete.title.".concat(e.qualifierType),values:{functionName:t,qualifier:n}}),footerProvider:function(t,n){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:n},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:t,onClick:e.deleteFunction},i.a.createElement(h.a,{id:"modal.delete.button.submit"})))}},i.a.createElement(c.a,{id:"modal.delete.text.".concat(e.qualifierType)}))}ks.propTypes={id:o.a.string,functionName:o.a.string.isRequired,qualifier:o.a.string,qualifierType:o.a.string.isRequired,deleteFunction:o.a.func.isRequired};var _s=Object(l.connect)(null,(function(e,t){return{deleteFunction:function(){return e(Object(m.m)(t))}}}))(ks),Cs=function(e){return i.a.createElement(_s,Ss({id:"deleteFunction"},e))};function Ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xs=function(e){var t,n=e.count,r=e.functionName,a=e.selectedAlias,o=e.openDeleteAliasModal,c=Object(v.j)("alias"),l=c.goToEdit,u=c.goToCreate,d=[{intlId:"edit",onClick:function(){return l({qualifier:null==a?void 0:a.name})},disabled:!a},{intlId:"delete",onClick:o,disabled:!a},{intlId:"hub.aliases.button.createAlias",onClick:u}];return i.a.createElement(we.a,{header:i.a.createElement("span",null,i.a.createElement(h.a,{id:"hub.section.aliases.title"})," "),counter:n?i.a.createElement(h.a,{id:"wrapper",values:{value:n}}):null,info:"functions.hub.aliases.helpContent"},d.map((function(e){var t=e.intlId,n=e.onClick,r=e.disabled;return i.a.createElement(s.Button,{key:t,onClick:n,disabled:!!r},i.a.createElement(h.a,{id:t}))})),i.a.createElement(Cs,{id:"deleteAlias",functionName:r,qualifier:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"",qualifierType:b.H.ALIAS}))};xs.propTypes={count:o.a.number.isRequired,selectedAlias:o.a.shape({name:o.a.string.isRequired,goToQualifier:o.a.func.isRequired}),functionName:o.a.string.isRequired,openDeleteAliasModal:o.a.func.isRequired};var Rs=Object(l.connect)((function(e){return{functionName:Object(y.B)(e)}}),(function(e){return{openDeleteAliasModal:function(){return Object(G.a)(e)("deleteAlias")}}}))(xs),Ns=function(e){var t=e.functionName,n=e.version,r=e.weight;return n?i.a.createElement("p",null,Object(p.r)(n)?i.a.createElement("span",{className:"awsui-util-mr-xs"},i.a.createElement(h.a,{id:"version"}),": ",n):i.a.createElement("a",{href:Object(v.a)(t,n),className:"awsui-util-mr-xs"},i.a.createElement(h.a,{id:"version"}),": ",n),"(",i.a.createElement(h.a,{id:"weight"}),"=",r,"%)"):null};Ns.propTypes={functionName:o.a.string.isRequired,version:o.a.string,weight:o.a.number.isRequired};var Is={pageSize:10,filteringFields:["name","description"],sortingColumn:"name",sortableColumns:[{id:"name",field:"name"},{id:"description",field:"description"}],selectionType:"single",trackSelectionBy:"name",columnDefinitions:[{id:"name",header:Y.intl.formatMessage({id:"hub.aliases.table.name.label"}),cell:function(e){var t=e.name,n=e.goToQualifier;return i.a.createElement("a",{onClick:function(){n(t)}},t)}},{id:"versions",header:Y.intl.formatMessage({id:"hub.aliases.table.versions.label"}),cell:function(e){var t=e.arn,n=e.version,r=e.weight,a=e.additionalVersionWeight,o=a.version,s=a.weight;if(!t)return"-";var c=new J.i(t).functionName;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ns,{version:n,weight:r,functionName:c}),i.a.createElement(Ns,{version:o,weight:s,functionName:c}))}},{id:"description",header:Y.intl.formatMessage({id:"hub.aliases.table.description.label"}),cell:function(e){return e.description||"-"}}]},Ds=function(e){var t=e.qualifiersData,n=t.loading,r=t.error,a=t.aliases,o=Ts(i.a.useState(null),2),c=o[0],l=o[1],u=Object(hs.a)(),d=u.filteringText,f=u.onFilteringChange,p=u.resetFilteringText,m=Object(v.j)("alias").goToCreate;return i.a.createElement(s.Table,{header:i.a.createElement(Rs,{selectedAlias:c,count:a.size}),columnDefinitions:Is.columnDefinitions,loading:n,items:a.toJS(),empty:r?i.a.createElement(we.b,{error:r}):i.a.createElement(we.d,{id:"functionDesigner.aliasesSection.empty",onClick:m}),"data-testId":"aliases-table",noMatch:i.a.createElement(we.d,{id:"hub.noMatch.aliasesTable.empty",onClick:p})},i.a.createElement(s.TableSelection,{selectionType:Is.selectionType,onSelectionChange:function(e){var t=e.detail;l(null==t?void 0:t.selectedItems[0])},trackBy:Is.trackSelectionBy}),i.a.createElement(s.TableFiltering,{filteringFields:Is.filteringFields,filteringPlaceholder:Y.intl.formatMessage({id:"hub.aliases.table.filter.placeholder"}),filteringCountTextFunction:we.j,filteringText:d,onFilteringChange:f}),i.a.createElement(s.TableSorting,{sortingColumn:Is.sortingColumn,sortableColumns:Is.sortableColumns}),i.a.createElement(s.TablePagination,{pageSize:Is.pageSize}))};Ds.propTypes={qualifiersData:js.isRequired};var As=ws(Ds),Ms={type:"object",properties:{description:{type:"string",maxLength:256}}};function Fs(e){var t=e.onPublish,n={size:"large",expandToFit:!0,header:i.a.createElement(h.a,{id:"functionDetail.qualifiers.modal.publish.title"})},r={onSubmit:t,schema:Ms};return i.a.createElement(ye.a,{id:"publishVersion",actionsProvider:function(e,t,n){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:t},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{variant:"primary",loading:e,onClick:n},i.a.createElement(h.a,{id:"functionDetail.qualifiers.modal.publish.button.submit"})))},modalProps:n,formProps:r},i.a.createElement(h.a,{tagName:"p",id:"functionDetail.qualifiers.modal.publish.text"}),i.a.createElement(H.FormField,{id:"description",fieldTextProps:["label"],optional:!0},i.a.createElement(s.Input,null)))}Fs.propTypes={functionName:o.a.string.isRequired,onPublish:o.a.func.isRequired};var qs=Object(l.connect)(null,(function(e,t){return{onPublish:function(n){return e(Object(m.h)(t.functionName,n))}}}))(Fs),Bs=["intlId","onClick","renderModal"];function Ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Us(){return(Us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ws(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Vs=function(e){var t=e.count,n=e.functionName,r=e.openModal,a=e.selectedVersion,o=[{intlId:"delete",onClick:function(){r("deleteVersion")},disabled:!a,"data-testid":"deleteVersion-cta",renderModal:function(){return i.a.createElement(Cs,{id:"deleteVersion",functionName:n,qualifier:null==a?void 0:a.version,qualifierType:"version"})}},{intlId:"hub.versions.button.publishVersion",onClick:function(){r("publishVersion")},renderModal:function(){return i.a.createElement(qs,{functionName:n})}}];return i.a.createElement(we.a,{header:i.a.createElement("span",null,i.a.createElement(h.a,{id:"hub.section.versions.title"})," "),counter:t?i.a.createElement(h.a,{id:"wrapper",values:{value:t}}):null,info:"functions.hub.versions.helpContent"},o.map((function(e){var t=e.intlId,n=e.onClick,r=e.renderModal,a=Ws(e,Bs);return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(s.Button,Us({key:t,onClick:n},a),i.a.createElement(h.a,{id:t})),"function"==typeof r&&r())})))};Vs.propTypes={count:o.a.number.isRequired,selectedVersion:o.a.shape({version:o.a.string.isRequired}),functionName:o.a.string.isRequired,openModal:o.a.func.isRequired};var Gs=Object(l.connect)((function(e){return{functionName:Object(y.B)(e)}}),(function(e){return{openModal:Object(G.a)(e)}}))(Vs),Hs={pageSize:10,filteringFields:["version","description"],sortingColumn:"version",sortableColumns:[{id:"version",comparator:function(e,t){return+e.version-+t.version}},{id:"description",field:"description"},{id:"lastModified",comparator:function(e,t){var n=e.lastModified,r=t.lastModified;return new Date(n).getTime()-new Date(r).getTime()}}],selectionType:"single",trackSelectionBy:"version",columnDefinitions:[{id:"version",header:Y.intl.formatMessage({id:"hub.versions.table.version.label"}),cell:function(e){var t=e.version,n=e.goToQualifier;return i.a.createElement("a",{onClick:function(){n(t)}},t)}},{id:"aliases",header:Y.intl.formatMessage({id:"hub.versions.table.aliases.label"}),cell:function(e){var t=e.arn,n=e.pills;return null!=n&&n.length?i.a.createElement(i.a.Fragment,null,n.map((function(e){return i.a.createElement("p",{key:e},i.a.createElement("a",{href:"#".concat(Object(v.d)(new J.i(t).functionName,e))},Y.intl.formatMessage({id:"alias"}),": ",e))}))):"-"}},{id:"description",header:Y.intl.formatMessage({id:"hub.versions.table.description.label"}),cell:function(e){return e.description||"-"}},{id:"lastModified",header:Y.intl.formatMessage({id:"lastModified"}),cell:function(e){var t=e.lastModified;return t?i.a.createElement($e.a,{value:t}):"-"}},{id:"architectures",header:function(){return i.a.createElement(h.a,{id:"functions.grid.architecture"})},cell:function(e){return Object(J.F)(e.architectures)}}].filter((function(e){return Object(_e.c)().length>1||"architectures"!==e.id}))},Zs=function(e){var t=e.qualifiersData,n=t.loading,r=t.error,a=t.versions,o=e.openPublishVersionModal,c=Ls(i.a.useState(null),2),l=c[0],u=c[1],d=Object(hs.a)(),f=d.filteringText,p=d.onFilteringChange,m=d.resetFilteringText;return i.a.createElement(s.Table,{"data-testId":"versions-table",header:i.a.createElement(Gs,{count:a.size,selectedVersion:l}),columnDefinitions:Hs.columnDefinitions,loading:n,items:a.toJS(),empty:r?i.a.createElement(we.b,{error:r}):i.a.createElement(we.d,{id:"functionDesigner.versionsSection.empty",onClick:o}),noMatch:i.a.createElement(we.d,{id:"hub.noMatch.versionsTable.empty",onClick:m})},i.a.createElement(s.TableSelection,{selectionType:Hs.selectionType,onSelectionChange:function(e){var t,n=e.detail;u(null==n||null===(t=n.selectedItems)||void 0===t?void 0:t[0])},trackBy:Hs.trackSelectionBy}),i.a.createElement(s.TableFiltering,{filteringFields:Hs.filteringFields,filteringPlaceholder:Y.intl.formatMessage({id:"hub.versions.table.filter.placeholder"}),filteringCountTextFunction:we.j,filteringText:f,onFilteringChange:p}),i.a.createElement(s.TableSorting,{sortingDescending:!0,sortingColumn:Hs.sortingColumn,sortableColumns:Hs.sortableColumns}),i.a.createElement(s.TablePagination,{pageSize:Hs.pageSize}))};Zs.propTypes={qualifiersData:js.isRequired,openPublishVersionModal:o.a.func.isRequired};var Js=Object(l.connect)(null,(function(e){return{openPublishVersionModal:function(){return Object(G.a)(e)("publishVersion")}}}))(ws(Zs)),Ks=n(2128),Qs=n(1937);function Ys(){return l.useSelector((function(e){return!!Object(y.n)(e,Qs.a)}))?(Object(O.logEvent)(O.EVENT_NAMES.S3_RECURSION_ALERT_APPEAR),i.a.createElement(Ee.a,{"data-testid":"s3-recursion-alert",margin:{vertical:"s"}},i.a.createElement(V.a,{dismissible:!0,onDismiss:function(){return Object(O.logEvent)(O.EVENT_NAMES.S3_RECURSION_ALERT_DISMISS)}},i.a.createElement(h.a,{id:"recEngine.s3Recursion.title",tagName:"b"}),i.a.createElement(c.a,{id:"recEngine.s3Recursion.description",tagName:"p"})))):null}var $s=n(1715),Xs=Object(l.connect)((function(e){var t;return{loading:!Object(y.mb)(e),graph:Object(y.F)(e),functionArn:null!==(t=Object(y.q)(e))&&void 0!==t?t:"",selectedNodes:Object(y.cb)(e),destinationsLoading:!Object(y.a)(e,"destination"),resourcesLoading:!Object(y.a)(e,"resource"),triggersLoading:!Object(y.a)(e,"trigger"),appDesignerExpand:Object(Xi.b)(e)}}),(function(e){return{clickNodes:function(t){e(Object(m.I)(t));var n=null==t?void 0:t.first();if(n){var r=n.get("type"),i=n.get("name");e(Object(m.u)({nodeType:r,serviceName:i}))}},setUserPreference:function(t){return e(Object($s.d)(t))},showHelp:function(){return e(Object(Ot.m)("functionDesigner.helpContent"))}}}))((function(e){var t=e.appDesignerExpand,n=e.changeTab,r=e.clickNodes,a=e.destinationsLoading,o=e.functionArn,s=e.graph,c=e.loading,l=e.resourcesLoading,u=e.selectedNodes,d=e.setUserPreference,f=e.showHelp,m=e.triggersLoading;return i.a.useEffect((function(){f()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ys,null),i.a.createElement(Ks.a,{id:"overviewDesigner",loading:c,nodes:s.get("nodes"),edges:s.get("edges"),selectedNodes:Object(J.jb)(u,"id"),focus:o,leftNodes:{type:"trigger",loading:m,tag:O.WorkflowTags.triggers},rightNodes:Object(J.U)("starfish")?{type:"destination",loading:a,tag:O.WorkflowTags.destinations}:{type:"resource",loading:l},onClickNodes:r,setUserPreference:d,appDesignerExpand:t,readonly:!o||Object(p.t)(o),changeTab:n,tag:O.WorkflowTags.functionViz}))})),ec=Object(l.connect)((function(e){return{provisionedConcurrencyConfigs:Object(y.W)(e,"provisionedConcurrencyConfigsParser")||Object(ar.Map)()}}),(function(e,t){var n=t.functionArn;return{stopFunction:function(){return e(Object(m.V)(n))}}}))(Object(p.E)(["provisionedConcurrencyConfigsParser"])((function(e){var t=e.functionArn,n=e.provisionedConcurrencyConfigs,r=e.stopFunction,a=new J.i(t).functionName,o=!!n.get("provisionedConcurrency");return i.a.createElement(ye.b,{id:"stop",size:"medium",expandToFit:!0,header:i.a.createElement(h.a,{id:"modal.stop.title"}),footerProvider:function(e,t){return i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:t},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{disabled:o,variant:"primary",loading:e,onClick:r},i.a.createElement(h.a,{id:"modal.stop.button.submit"})))}},i.a.createElement(L.b,{scope:"stop-function"}),o?i.a.createElement(h.a,{id:"error.throttleModal.provisionedConcurrency",values:{functionName:a}}):i.a.createElement(c.a,{id:"modal.stop.text",values:{functionName:a}}))})));function tc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rc=Object(l.connect)((function(e,t){var n=J.i.fromFunctionName(t.functionName,t.qualifier).arn,r=Object(y.h)(e,n),i=Object(y.u)(e);return{functionArn:n,isSaving:Object(y.J)(e),disabled:!r||0===r.getIn(["data","reservedConcurrentExecutions"])||!i.intersect(b.V).isEmpty()}}),(function(e){return{openStopModal:function(){return e(Object(G.m)("stop",!0))}}}))(Object(p.E)(["functionParser"])((function(e){var t=e.functionArn,n=e.qualifier,r=e.isSaving,a=e.disabled,o=e.openStopModal,c=tc(i.a.useState(!1),2),l=c[0],u=c[1];if(n)return i.a.createElement("span",null);return i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(ec,{functionArn:t}),i.a.createElement(s.Button,{className:"stop",onClick:function(){u(!0),o()},loading:r,disabled:a,variant:"normal"},i.a.createElement(h.a,{id:"designer.button.stop"})))}))),ic=n(1845),ac=n(1893),oc=n(1957),sc=n(1678);function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){dc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||pc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fc(e){return function(e){if(Array.isArray(e))return mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pc(e,t){if(e){if("string"==typeof e)return mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(e,t):void 0}}function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hc,gc,bc=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?n:[]},vc=function(e,t){return!t.intersect(e).isEmpty()},yc=Object(l.connect)((function(e){return{metadata:Object(y.A)(e),group:Object(y.f)(e),functionCombinedStateSet:Object(y.u)(e),integrations:wt.c.getNodes(e),isSaveButtonDisabled:Object(y.I)(e),isQualifiersDataLoaded:Object(y.H)(e),packageType:Object(y.C)(e)}}),(function(e){return{bindNavigateToCreateAlias:function(t){return function(){e(Object(m.L)(!0)),e(t())}},openModal:Object(G.a)(e),runDeferredTriggerHandler:function(){return e(Object(m.D)(["deferredTriggerHandler"]))}}}),(function(e,t,n){var r=t.bindNavigateToCreateAlias,i=t.openModal,a=t.runDeferredTriggerHandler;return lc(lc(lc({},n),e),{},{openModal:i,runDeferredTriggerHandler:a,navigateToCreateAlias:r((function(){return Object(v.f)(e.metadata.functionName,e.metadata.qualifier,"alias",null,!0)})),openGroupModal:function(){return i("editGroup",{group:e.group})}})}))(Object(p.E)(["functionParser","functionGroupParser","functionQualifiersSource","integrationConfigSource"])((function(e){var t,n,r=e.metadata,a=r.functionName,o=r.functionArn,c=r.qualifier,l=r.isReplica,u=r.detailsType,d=r.isAlias,f=r.isVersionButNotLatest,p=e.isQualifiersDataLoaded,m=e.isSaveButtonDisabled,g=e.integrations,v=e.functionCombinedStateSet,y=e.navigateToCreateAlias,E=e.openGroupModal,w=e.openModal,j=e.packageType,S=e.runDeferredTriggerHandler,k=null===(t=g.cloudfront)||void 0===t?void 0:t.isAvailable,_=d||f?u:"func",C={createAlias:{id:"createAlias",text:Y.intl.formatMessage({id:"functionDetail.button.createAlias"}),disabled:l||!p||vc(b.f,v)},deleteFunctionOrQualifier:{id:"deleteFunction",text:Y.intl.formatMessage({id:"functionDetail.button.delete.".concat(_)},{functionName:a,qualifier:c}),disabled:l||vc(b.i,v)},exportToFlourish:{id:"exportToFlourish",text:Y.intl.formatMessage({id:"exportFunction"}),disabled:l},deployToLambdaAtEdge:{id:"capabilities",text:Y.intl.formatMessage({id:"functionDesigner.capabilities.title"}),items:[{id:"deployToLambdaAtEdge",text:Y.intl.formatMessage({id:"functionDesigner.capabilities.deployToLambdaAtEdge"}),disabled:m||vc(b.z,v)}]},group:{id:"editGroup",text:Y.intl.formatMessage({id:"group.modal.action"}),disabled:vc(b.n,v)},publishVersion:{id:"publishVersion",text:Y.intl.formatMessage({id:"functionDetail.button.publishVersion"}),disabled:!p||vc(b.G,v)}},T=!Object(J.U)("parangopod")||j===b.D.ZIP,P=(dc(n={},b.r.HUB,[C.publishVersion,C.createAlias].concat(fc(bc(Object(J.U)("frost"),C.group)),fc(bc(T,C.exportToFlourish)),fc(bc(k,C.deployToLambdaAtEdge)),[C.deleteFunctionOrQualifier])),dc(n,b.r.ALIAS,[C.deleteFunctionOrQualifier]),dc(n,b.r.VERSION,[C.createAlias].concat(fc(bc(T,C.exportToFlourish)),[C.deleteFunctionOrQualifier])),dc(n,b.r.VERSION_LATEST,fc(bc(T,C.exportToFlourish))),n),x=uc(i.a.useState(Object(ar.Set)()),2),R=x[0],N=x[1],I=function(e){return R.has(e)},D=function(e){return I(e)||N((function(t){return t.add(e)}))},A=function(e,t){return I(e)?t:null},M=function(e){D(e),w(e)};i.a.useEffect((function(){Object(sc.c)("deferredTrigger")&&(S(),D("lambdaAtEdge"))}),[sc.c]);var F={createAlias:function(){return y()},editGroup:function(){return E()},exportToFlourish:function(){return M("export")},deployToLambdaAtEdge:function(){Object(O.logEvent)(O.EVENT_NAMES.EDGE_MODAL_OPEN),M("lambdaAtEdge")},deleteFunction:function(){return M("deleteFunction")},publishVersion:function(){return M("publishVersion")}},q=A("deleteFunction",i.a.createElement(Cs,{functionName:a,qualifier:c,qualifierType:_})),B=A("publishVersion",i.a.createElement(qs,{functionName:a})),L=A("export",i.a.createElement(ac.b,null)),z=A("lambdaAtEdge",k?i.a.createElement(ic.a,null):null),U=i.a.createElement(i.a.Fragment,null,q,L,z,B,Object(J.U)("frost")?i.a.createElement(oc.b,{functionName:a}):null);return i.a.createElement(i.a.Fragment,null,U,i.a.createElement(i.a.Fragment,null,i.a.createElement(rc,{functionName:a,qualifier:c}),i.a.createElement("span",{className:"awsui-util-p-xs"},i.a.createElement(Ye.a,{value:o,buttonStyle:!0,text:i.a.createElement(h.a,{id:"functionDetail.button.copyArn"})})),i.a.createElement(s.ButtonDropdown,{id:"function-designer-dropdown",disabled:l,items:P[u],onItemClick:function(e){return F[e.detail.id]()}},i.a.createElement(h.a,{id:"functionDetail.button.actions"}))))})));function Ec(e){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){Pc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tc(e);if(t){var i=Tc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _c(this,n)}}function _c(e,t){if(t&&("object"===Ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cc(e)}function Cc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tc(e){return(Tc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(o,e);var t,n,r,a=kc(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Pc(Cc(n=a.call(this,e,t)),"handleEventConfigurationOptions",(function(e){var t=e.detail.value;n.props.dispatch(q.g.changeConfigurationOption(t)),O.panorama.logWorkflowEvent({tagPath:n.props.nextTag(O.WorkflowTags.testEventConfiguration),eventDetail:t})})),n.state={eventName:null,eventNameErrorMessage:null},n}return t=o,(n=[{key:"componentDidUpdate",value:function(e){!e.eventModalOpen&&this.props.eventModalOpen&&O.panorama.logWorkflowEvent({tagPath:this.props.nextTag(O.WorkflowTags.show)},{tagPath:this.props.nextTag(O.WorkflowTags.testEventConfiguration),eventDetail:this.props.configurationOption})}},{key:"resetEventState",value:function(){this.setState({eventName:null,eventNameErrorMessage:null})}},{key:"formatTestEvent",value:function(){var e,t=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown,n=!1;try{t=Object(J.s)(t,!0)}catch(e){n=!0}this.props.dispatch(q.g.updateEventModal({dirtyEventCode:t,hasParseError:n}))}},{key:"saveSampleEvent",value:function(){if(this.props.modalCreate){if(this.state.eventNameErrorMessage)return;if(null===this.state.eventName)return void this.eventNameChanged({detail:{value:""}})}var e=!1;try{var t;JSON.parse(null!==(t=this.props.dirtyEventCode)&&void 0!==t?t:this.props.codeForEventInDropdown)}catch(t){e=!0}if(e)this.props.dispatch(q.g.updateEventModal({hasParseError:e}));else{Object(O.logEvent)(O.EVENT_NAMES.TESTEVENT_FD("save"));var n=this.props,r=n.functionName,i=n.qualifier;this.props.modalCreate?this.props.dispatch(q.g.saveTestEvent(r,i,this.state.eventName,this.props.dirtyEventCode||this.props.codeForEventInDropdown)):this.props.dispatch(q.g.saveTestEvent(r,i,this.props.savedEventId,this.props.dirtyEventCode)),this.resetEventState()}}},{key:"savedEventChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id,!1))}},{key:"templateChanged",value:function(e){this.props.dispatch(q.g.loadTestEvent(this.props.functionName,e.detail.selectedOption.id,!0))}},{key:"codeChanged",value:function(e){this.props.dispatch(q.g.updateEventModal({dirtyEventCode:e,hasParseError:!1}))}},{key:"eventNameChanged",value:function(e){var t=Kt.a.validate(e.detail.value),n=t.valid,r=t.errors;this.setState({eventNameErrorMessage:n?null:r[0].message,eventName:e.detail.value})}},{key:"close",value:function(){Object(O.logEvent)(O.EVENT_NAMES.TESTEVENT_FD("close")),this.resetEventState(),this.props.hasSavedEvents&&!this.props.eventIdToInvoke.match(B.h())&&this.props.dispatch(q.g.loadTestEvent(this.props.functionName,this.props.eventIdToInvoke)),this.props.dispatch(q.g.toggleEventModal())}},{key:"delete",value:function(){this.props.dispatch(q.g.deleteTestEvent(this.props.functionName,this.props.savedEventId)),this.resetEventState()}},{key:"render",value:function(){var e,t=this,n=function(e){return Y.intl.formatMessage({id:e})},r=this.props,a=r.groupedSampleEvents,o=r.loading,l=r.isEventLoading,u=r.hasParseError,d=this.close.bind(this),f=this.delete.bind(this),p=o||l||u,m=p||!this.props.dirtyEventCode||this.props.dirtyEventCode===this.props.codeForEventInDropdown,g=i.a.createElement("span",null,i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:d,"data-analytics":O.WorkflowTags.cancel},i.a.createElement(h.a,{id:"cancel"})),i.a.createElement(s.Button,{disabled:o,onClick:function(){return t.formatTestEvent()},"data-analytics":O.WorkflowTags.formatJson},i.a.createElement(h.a,{id:"functionDesigner.tab.testing.testEvent.actions.formatJson"})),i.a.createElement(s.Button,{variant:"primary",disabled:this.props.modalCreate?p:m,onClick:function(){return t.saveSampleEvent()},"data-analytics":O.WorkflowTags.save},this.props.modalCreate?n("functionDetail.testEvents.modal.create"):n("functionDetail.button.save"))),this.props.modalCreate?null:i.a.createElement(s.Button,{className:"awsui-util-f-l",variant:"normal",disabled:o,onClick:f,"data-analytics":O.WorkflowTags.delete},i.a.createElement(h.a,{id:"modal.delete.button.submit"}))),b=a.filter((function(e){return e.label===$t.r})).map((function(e){return wc(wc({},e),{},{label:n(e.id)})})),v=a.map((function(e){return wc(wc({},e),{},{label:n(e.id)})})),y=b[0]?b[0].options.find((function(e){return e.id===t.props.savedEventId})):null,E=i.a.createElement(s.Button,{className:"awsui-util-ml-s",variant:"icon",icon:"refresh",loading:o||l,onClick:function(){return t.props.dispatch(q.g.refreshTestEvents(t.props.functionName))}}),w=i.a.createElement(s.FormField,{label:n("functionDetail.testEvents.saved"),secondaryControl:E},i.a.createElement(s.Select,{filteringType:b.length>1?"auto":"none",options:b,onChange:this.savedEventChanged.bind(this),selectedOption:y})),j=i.a.createElement("div",null,i.a.createElement(s.FormField,{stretch:!0,label:n("functionDetail.testEvents.modal.eventTemplate")},i.a.createElement(s.Select,{filteringType:"auto",options:v,onChange:this.templateChanged.bind(this),selectedOption:{label:this.props.templateEventId,id:this.props.templateEventId}})),i.a.createElement(s.FormField,{stretch:!0,label:n("functionDetail.testEvents.modal.eventName"),errorText:this.state.eventNameErrorMessage},i.a.createElement(s.Input,{placeholder:"MyEventName",onInput:this.eventNameChanged.bind(this),value:this.state.eventName}))),S=Object(J.J)({id:"functionDetail.testEvents.modal.radio.".concat(q.a)}),k=Object(J.J)({id:"functionDetail.testEvents.modal.radio.".concat(q.b)}),_=null!==(e=this.props.dirtyEventCode)&&void 0!==e?e:this.props.codeForEventInDropdown;return i.a.createElement(s.Modal,{className:"eventModal needs-old-form-field-override",expandToFit:!0,header:n("functionDetail.button.configureTestEvent"),size:"large",visible:this.props.eventModalOpen,onDismiss:d,footer:g,"data-analytics":this.props.tag,"data-analytics-type":this.props.tagType},i.a.createElement(x.a,{cond:o||l,overlay:!0},i.a.createElement(L.b,{scope:"event-modal"}),i.a.createElement(c.a,{id:"functionDetail.testEvents.modal.text"}),i.a.createElement(s.FormField,{stretch:!0},i.a.createElement(s.RadioGroup,{onChange:this.handleEventConfigurationOptions,value:this.props.configurationOption,items:[{value:q.a,label:S},{value:q.b,label:k,disabled:!this.props.hasSavedEvents}]})),this.props.modalCreate?j:w,i.a.createElement(Qt.a,{id:"eventCode",mode:"json",value:_,onChange:this.codeChanged.bind(this)}),this.props.hasParseError?i.a.createElement("div",{className:"awsui-util-mt-s"},i.a.createElement(s.Alert,{type:"error"},Object(J.J)({id:"functionDetail.testEvents.modal.jsonParseError"}))):null))}}])&&jc(t.prototype,n),r&&jc(t,r),o}(i.a.Component);Pc(xc,"propTypes",{savedEventId:o.a.string,codeForEventInDropdown:o.a.string,dirtyEventCode:o.a.string,hasParseError:o.a.bool,loading:o.a.bool.isRequired,isEventLoading:o.a.bool.isRequired,groupedSampleEvents:o.a.array,eventsById:o.a.object,modalCreate:o.a.bool,hasSavedEvents:o.a.bool,configurationOption:o.a.string,templateEventId:o.a.string,eventIdToInvoke:o.a.string,functionName:o.a.string,qualifier:o.a.string,eventModalOpen:o.a.bool,tag:o.a.string.isRequired,tagType:o.a.string,nextTag:o.a.func.isRequired,dispatch:o.a.func.isRequired});var Rc=(gc=xc,hc=Object(l.connect)((function(e){var t=new J.i(Object(y.q)(e)||""),n=t.functionName,r=t.qualifier;return{savedEventId:q.i.getEventModalState(e,"savedEventId"),codeForEventInDropdown:q.i.getCodeToShow(e),dirtyEventCode:q.i.getDirtyEventCode(e),hasParseError:q.i.getEventModalState(e,"hasParseError"),groupedSampleEvents:q.i.getGroupedSampleEvents(e),loading:q.i.getEventModalState(e,"loading"),isEventLoading:q.i.getIsEventLoading(e),eventsById:q.i.getEventsById(e),modalCreate:q.i.getEventModalState(e,"configurationOption")===q.a,configurationOption:q.i.getEventModalState(e,"configurationOption"),templateEventId:q.i.getEventModalState(e,"templateEventId"),hasSavedEvents:q.i.getHasSavedEvents(e),eventIdToInvoke:q.i.getEventIdToInvoke(e),functionName:n,qualifier:r,eventModalOpen:q.i.getEventModalOpen(e)}}),(function(e){return{dispatch:e}}))(gc),Object(X.tagContextHoc)(hc));function Nc(e){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fc(e);if(t){var i=Fc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mc(this,n)}}function Mc(e,t){if(t&&("object"===Nc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fc(e){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(o,e);var t,n,r,a=Ac(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this,e,t)).state={eventName:null,eventNameErrorMessage:null},n}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.dispatch(q.g.updateShowPermissionError(!1)),this.props.dispatch(Object(z.b)("__key","event-modal"))}},{key:"componentDidUpdate",value:function(e){!e.eventModalOpen&&this.props.eventModalOpen&&O.panorama.logWorkflowEvent({tagPath:this.props.nextTag(O.WorkflowTags.show)},{tagPath:this.props.nextTag(O.WorkflowTags.testEventConfiguration),eventDetail:this.props.configurationOption})}},{key:"eventNameChanged",value:function(e){var t=e.detail.value;this.checkEventName(t)}},{key:"checkEventName",value:function(e){var t=B.i(e,this.props.allSavedTestEvents);return this.updateEventState({eventName:e,eventNameErrorMessage:t.message}),t}},{key:"updateEventState",value:function(e){this.setState(e)}},{key:"save",value:function(){this.props.configurationOption===q.a?this.create():this.edit()}},{key:"create",value:function(){var e={eventNameErrorMessage:this.state.eventNameErrorMessage,dirtyEventCode:this.props.dirtyEventCode,codeForEventInDropdown:this.props.codeForEventInDropdown,checkEventName:this.checkEventName.bind(this),eventName:this.state.eventName,eventType:this.props.eventType,EVENT_TYPE_SHARED:q.e,functionName:this.props.functionName,qualifier:this.props.qualifier,dispatch:this.props.dispatch,actions:q.g};B.a(e)&&this.updateEventState({eventName:this.state.eventName,eventNameErrorMessage:null})}},{key:"edit",value:function(){var e={eventName:this.props.savedEventId,dirtyEventCode:this.props.dirtyEventCode,codeForEventInDropdown:this.props.codeForEventInDropdown,functionName:this.props.functionName,qualifier:this.props.qualifier,savedSharedEvents:this.props.savedSharedEvents,dispatch:this.props.dispatch,actions:q.g};B.d(e)}},{key:"close",value:function(){Object(O.logEvent)(O.EVENT_NAMES.TESTEVENT_FD("close")),this.updateEventState({eventName:null,eventNameErrorMessage:null}),this.props.hasSavedEvents&&!this.props.eventIdToInvoke.match(B.h())&&this.props.dispatch(q.g.loadTestEvent(this.props.functionName,this.props.eventIdToInvoke)),this.props.dispatch(q.g.updateShowPermissionError(!1)),this.props.dispatch(q.g.toggleEventModal())}},{key:"delete",value:function(){var e={eventName:this.props.savedEventId,savedSharedEvents:this.props.savedSharedEvents,EVENT_TYPE_SHARED:q.e,EVENT_TYPE_USER:q.f,dispatch:this.props.dispatch,actions:q.g};B.c(e),this.updateEventState({eventName:null,eventNameErrorMessage:null})}},{key:"render",value:function(){var e=function(e){return Y.intl.formatMessage({id:e})},t=this.props,n=t.loading,r=t.isEventLoading,a=t.hasParseError,o=t.showPermissionError,l=t.eventType,u=t.savedEventId,d=t.savedEvents,f=t.savedSharedEvents,p=this.close.bind(this),m=this.save.bind(this),g=this.delete.bind(this),b=n||r||a,v=this.props.configurationOption===q.a,y=f.find((function(e){return e.id===u})),E=!v&&y?"functionDetail.testEvents.shared.save.overwrite":"functionDetail.button.save",w=l===q.f?(null==d?void 0:d.size)>9:(null==f?void 0:f.size)>9,j=b||!this.props.dirtyEventCode||this.props.dirtyEventCode===this.props.codeForEventInDropdown;v&&(j=!!w);var S=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(s.Button,{variant:"link",onClick:p,"data-analytics":O.WorkflowTags.cancel},i.a.createElement(h.a,{id:"cancel"})),!v&&i.a.createElement(s.Button,{variant:"link",disabled:this.props.loading||!this.props.hasSavedEvents,onClick:g,"data-analytics":O.WorkflowTags.delete},i.a.createElement(h.a,{id:"modal.delete.button.submit"})),i.a.createElement(s.Button,{variant:"primary",disabled:j,onClick:m,"data-analytics":O.WorkflowTags.save},e(E))));return i.a.createElement(s.Modal,{className:"eventModal needs-old-form-field-override",expandToFit:!0,header:e("functionDetail.button.configureTestEvent"),size:"large",visible:this.props.eventModalOpen,onDismiss:p,footer:S,"data-analytics":this.props.tag,"data-analytics-type":this.props.tagType},i.a.createElement(x.a,{cond:n||r,overlay:!0},i.a.createElement(c.a,{id:"functionDetail.testEvents.shared.modal.text"}),i.a.createElement(Zn,{tag:O.WorkflowTags.testEventModal,eventNameChanged:this.eventNameChanged.bind(this),eventName:this.state.eventName,eventNameErrorMessage:this.state.eventNameErrorMessage,delete:this.delete.bind(this)}),i.a.createElement(L.b,{scope:"event-modal"}),o?Gn:null))}}])&&Ic(t.prototype,n),r&&Ic(t,r),o}(i.a.Component),Bc=Object(X.tagContextHoc)(Object(l.connect)((function(e){var t=new J.i(Object(y.q)(e)||""),n=t.functionName,r=t.qualifier;return{allSavedTestEvents:q.i.getAllSavedEvents(e),codeForEventInDropdown:q.i.getSharedCodeToShow(e),configurationOption:q.i.getEventModalState(e,"configurationOption"),dirtyEventCode:q.i.getDirtyEventCode(e),eventIdToInvoke:q.i.getEventIdToInvoke(e),eventModalOpen:q.i.getEventModalOpen(e),eventType:q.i.getEventModalState(e,"eventType"),functionName:n,hasSavedEvents:q.i.getHasSavedEvents(e),hasParseError:q.i.getEventModalState(e,"hasParseError"),isEventLoading:q.i.getIsEventLoading(e),loading:q.i.getEventModalState(e,"loading"),qualifier:r,savedSharedEvents:q.i.getSavedSharedTests(e),savedEventId:q.i.getEventModalState(e,"savedEventId"),savedEvents:q.i.getSavedEvents(e),showPermissionError:q.i.getShowPermissionError(e)}}),(function(e){return{dispatch:e}}))(qc),!1);function Lc(e){return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zc=["content","tag"];function Uc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vc(e,t){return(Vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zc(e);if(t){var i=Zc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hc(this,n)}}function Hc(e,t){if(t&&("object"===Lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zc(e){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jc(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kc(Object(n),!0).forEach((function(t){Yc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Xc=Object.values(b.N),el=Object(d.default)((function(e,t){var n=e===b.H.ALIAS,r={parangopod:Object(J.U)("parangopod")};return[{id:b.N.CODE,content:i.a.createElement(ft,null),preconditions:[!r.parangopod,!n],tag:O.WorkflowTags.codeTab},{id:b.N.CODE,content:i.a.createElement(ft,null),preconditions:[r.parangopod,t===b.D.ZIP||null===t,!n],tag:O.WorkflowTags.codeTab},{id:b.N.IMAGE,content:i.a.createElement(yt,null),preconditions:[r.parangopod,t===b.D.IMAGE,!n],tag:O.WorkflowTags.imageTab},{id:b.N.LOADING,label:function(){return i.a.createElement(W.a,null)},preconditions:[r.parangopod,void 0===t,!n]},{id:b.N.TESTING,content:Object(J.U)("mandarinquat2")?i.a.createElement(ir,null):i.a.createElement(un,null),tag:O.WorkflowTags.testingTab,preconditions:[]},{id:b.N.MONITORING,content:i.a.createElement(Jt,null),labelId:"monitor",tag:O.WorkflowTags.monitoringTab},{id:b.N.CONFIGURE,content:i.a.createElement(ms,null),tag:O.WorkflowTags.configureTab},{id:b.N.ALIASES,content:i.a.createElement(As,null),preconditions:[!e],tag:O.WorkflowTags.aliasesTab},{id:b.N.VERSIONS,content:i.a.createElement(Js,null),preconditions:[!e],tag:O.WorkflowTags.versionsTab}].filter(p.w).map((function(e){var t=e.content,n=e.tag;return Qc(Qc({},$c(e,zc)),{},{tag:n,content:n?i.a.createElement(X.TaggedDiv,{tag:n},t):t})})).map(Object(p.F)("functionDesigner"))})),tl=function(e){return e?isNaN(e)?"$LATEST"===e?O.EVENT_NAMES.FUNCTION_CONFIGURATION_QUALIFIER_LATEST:O.EVENT_NAMES.FUNCTION_CONFIGURATION_QUALIFIER_ALIAS:O.EVENT_NAMES.FUNCTION_CONFIGURATION_QUALIFIER_VERSION:O.EVENT_NAMES.FUNCTION_CONFIGURATION_QUALIFIER_UNQUALIFIER},nl=function(e){var t,n;return{metadata:Object(y.A)(e),packageType:Object(y.C)(e),breadcrumbs:Object(y.jb)(e),query:Object(De.b)(e).query,tab:Object(y.e)(e),pageLoadError:Object(De.c)(e),functionState:null===(t=Object(y.W)(e,"functionSource"))||void 0===t||null===(n=t.get)||void 0===n?void 0:n.call(t,"state")}},rl=function(e){return{changeTab:(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(J.U)("translunar2")||!Xc.includes(n)){t.next=3;break}return t.next=3,Object(sc.h)("user.clickedTab",n);case 3:Object(l.batch)((function(){e(Object(m.d)(n)),e(Object(f.d)({query:{tab:n}},{persistQuery:!0}))})),Object(O.logTab)("function-designer",n);case 5:case"end":return t.stop()}}),t)})),n=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){Jc(a,r,i,o,s,"next",e)}function s(e){Jc(a,r,i,o,s,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)}),cancelPolling:function(){return e(Object(m.c)())}};var t,n},il=i.a.memo((function(e){var t=e.tabs,n=e.onChangeTab,r=Object(l.useSelector)(y.e);return i.a.createElement(s.Tabs,{className:r,tabs:t,activeTabId:r,onChange:n})}),(function(e,t){return e.tabs===t.tabs}));il.propTypes={tabs:o.a.array.isRequired,onChangeTab:o.a.func.isRequired};var al=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vc(e,t)}(o,e);var t,n,r,a=Gc(o);function o(){return Uc(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){this.logActiveTab();var e=this.props.metadata.qualifier;this.logQualifier(e)}},{key:"componentDidUpdate",value:function(e){if(e.tab!==this.props.tab){var t=this.getTabs().find((function(t){return t.id===e.tab}));this.logActiveTab(t)}var n=this.props.metadata.qualifier;e.metadata.qualifier!==n&&this.logQualifier(n)}},{key:"componentWillUnmount",value:function(){this.props.cancelPolling()}},{key:"getHeader",value:function(){var e,t=this.props,n=t.breadcrumbs,r=t.metadata.functionName,i=n.items.slice(-1)[0],a=i.text,o=i.formattedMessage;return null!==(e=null!=o?o:a)&&void 0!==e?e:r}},{key:"getTabs",value:function(){var e=this.props,t=e.metadata.qualifier,n=e.packageType;return el(Object(J.L)(t),n,Object(J.C)(["userFeatures"]))}},{key:"logActiveTab",value:function(e){var t,n,r=this.props.tab,i=null===(t=this.getTabs().find((function(e){return e.id===r})))||void 0===t?void 0:t.tag;i&&O.panorama.logWorkflowEvent({tagPath:this.props.nextTag(O.WorkflowTags[i]),eventName:"changeTab",eventDetail:{previousTab:null!==(n=null==e?void 0:e.tag)&&void 0!==n?n:""}})}},{key:"logQualifier",value:function(e){Object(O.logEvent)(tl(e))}},{key:"render",value:function(){var e=this;if(this.props.pageLoadError)return i.a.createElement(u.Redirect,{to:"/functions"});var t,n=this.props,r=n.metadata,a=r.functionName,o=r.masterArn,l=r.qualifier,d=r.editPage,f=r.isCreate,m=n.breadcrumbs,h=n.functionState,g=n.query,b=n.tag,v=n.tagType;if(d)return i.a.createElement(P,{breadcrumbs:m,functionName:a,qualifier:l,editPage:d,isCreate:f,tag:b,tagType:v});if(Object(p.y)(a,{functionName:a,qualifier:l,query:g}),Object(p.t)(a)&&o){var y=Object(p.m)(o);t=i.a.createElement("div",{className:"awsui-util-mb-s"},i.a.createElement(s.Alert,{dismissible:!0},i.a.createElement(c.a,{id:"designer.banner.replicaPage",values:{functionLink:y}})))}var w=Object(J.U)("mandarinquat2")?i.a.createElement(Bc,{tag:O.WorkflowTags.testEventModal}):i.a.createElement(Rc,{tag:O.WorkflowTags.testEventModal});return i.a.createElement(E.a,{id:"functionDesigner",breadcrumbs:m,tag:b,tagType:v},i.a.createElement("div",{id:"functionDesignerActionStripe","data-functionstate":h,className:"ellipsize"},i.a.createElement(we.a,{large:!0,header:this.getHeader()},i.a.createElement(yc,null))),t,i.a.createElement(L.b,null),i.a.createElement(Xs,{changeTab:this.props.changeTab}),i.a.createElement(il,{tabs:this.getTabs(),onChangeTab:function(t){return e.props.changeTab(t.detail.activeTabId)}}),w)}}])&&Wc(t.prototype,n),r&&Wc(t,r),o}(i.a.Component);Yc(al,"propTypes",{tag:o.a.string.isRequired,tagType:o.a.string,nextTag:o.a.func.isRequired,query:o.a.objectOf(o.a.string),metadata:o.a.shape({functionName:o.a.string.isRequired,editPage:o.a.string,qualifier:o.a.string,isCreate:o.a.bool.isRequired,masterArn:o.a.string}),packageType:o.a.string,breadcrumbs:o.a.shape({items:o.a.arrayOf(o.a.object),rightSide:o.a.node}),tab:o.a.string.isRequired,pageLoadError:o.a.bool,functionState:o.a.string,changeTab:o.a.func.isRequired,cancelPolling:o.a.func.isRequired});t.default=Object(X.tagContextHoc)(Object(l.connect)(nl,rl)(al),!0)},2620:function(e,t,n){"use strict";n.r(t),n.d(t,"ListFunctionsPageComponent",(function(){return Se}));var r=n(1),i=n.n(r),a=n(33),o=n.n(a),s=n(87),c=n(677),l=n.n(c),u=n(675),d=n(429),f=n(167),p=n(440),m=n(1664),h=n(1685),g=n(1665),b=n(70);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=e.functionName,n=e.loading,r=e.visible,a=e.onClose,o=e.onDelete,s=i.a.createElement("span",{className:"awsui-util-f-r"},i.a.createElement(d.Button,{variant:"link",onClick:a},i.a.createElement(f.a,{id:"cancel"})),i.a.createElement(d.Button,{variant:"primary",loading:n,onClick:o,"data-analytics":b.WorkflowTags.deleteSingleFunction},i.a.createElement(f.a,{id:"modal.delete.button.submit"})));return i.a.createElement(d.Modal,{expandToFit:!0,size:"medium",header:i.a.createElement(f.a,{id:"modal.delete.title.func",values:{functionName:t}}),footer:s,visible:r,onDismiss:a},i.a.createElement(p.a,{tagName:"p",id:"modal.delete.text.func"}))}O.propTypes={functionName:o.a.string.isRequired,loading:o.a.bool.isRequired,visible:o.a.bool.isRequired,onClose:o.a.func.isRequired,onDelete:o.a.func.isRequired};var w=Object(u.connect)((function(e){return{functionName:Object(h.n)(e),loading:Object(h.l)(e),visible:!!Object(g.b)(e).query.deleteModal}}),(function(e){return{onClose:function(){return e(Object(m.c)({query:{deleteModal:void 0}},{persistQuery:!0}))},onDelete:function(t){return e(Object(h.c)(t))}}}),(function(e,t,n){return y(y(y(y({},n),e),t),{},{onDelete:function(){return t.onDelete(e.functionName)}})}))(O),j=n(676),S=n(1659),k=n(1652),_=n(24),C=n(55),T=n(69),P=n(1717),x=n(1660),R=n(1681),N=n(1689),I=n(1649);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=Object(I.tagContextHoc)(N.c),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(o,e);var t,n,r,a=B(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),W(z(t=a.call(this,e)),"statusCount",(function(e){return t.props.statuses.filter((function(t){return t===e})).length})),t.state={confirmedDelete:!1,inputValue:"",duplicateSelectedFunctions:[]},t}return t=o,(n=[{key:"onClickAction",value:function(e){var t;switch(1===this.props.selectedFunctions.size&&(t=Object(_.hb)(this.props.selectedFunction.get("arn"))),e.detail.id){case"view":this.props.visit("/functions/".concat(t));break;case"test":this.props.visit("/functions/".concat(t,"?tab=").concat(x.N.TESTING));break;case"editGroup":C.d.includes("frost")&&this.props.openGroupModal();break;case"delete":if(this.props.selectedFunctions.size>1){this.state.duplicateSelectedFunctions=this.props.selectedFunctions.toJS(),this.props.openDeleteModal();var n=b.WorkflowTags.deleteMultipleFunctions,r=b.WorkflowTags.begin;b.panorama.logWorkflowEvent({tagPath:this.context.nextTag([n,r])});break}this.props.visit({query:{deleteModal:this.props.selectedFunction.get("name")}},{persistQuery:!0})}}},{key:"handleInputChange",value:function(e){var t=e.detail.value||"",n="delete"===t.toLowerCase();this.setState((function(){return{confirmedDelete:n,inputValue:t}}))}},{key:"render",value:function(){var e,t=this,n=this.props.selectedFunctions.size>0,r=!n||!!this.props.selectedFunction.get("masterArn")||this.props.selectedFunctions.some((function(e){return!!e.masterArn})),a=this.props.selectedFunctions.size>1,o=Object(_.U)("mandarinquat2")?"functionlisttable.modal.delete.triggerWarning.schema":"functionlisttable.modal.delete.triggerWarning";if(this.props.selectedFunctions.size>0)e=i.a.createElement(f.a,{id:"wrapperSelected",values:{selected:this.props.selectedFunctions.size.toString()}});else if(this.props.loadingFunctions){var s={partial:this.props.loadedFuncCount.toString(),value:this.props.funcCount.toString()};e=i.a.createElement(f.a,{id:"wrapperLoading",values:s})}else e=i.a.createElement(f.a,{id:"wrapper",values:{value:this.props.loadedFuncCount.toString()}});var c=[{id:"view",text:T.intl.formatMessage({id:"functions.button.view"}),disabled:a},{id:"test",text:T.intl.formatMessage({id:"functions.button.test"}),disabled:r||a},{id:"delete",text:T.intl.formatMessage({id:"functions.button.delete"}),disabled:r}];C.d.includes("frost")&&c.splice(2,0,{id:"editGroup",text:T.intl.formatMessage({id:"group.modal.action"}),disabled:r||a});var l=this.props.lastCached?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,i.a.createElement(f.a,{id:"functions.grid.header.lastFetched"})," "),i.a.createElement(R.a,{value:new Date(this.props.lastCached)})):i.a.createElement(f.a,{id:"functions.grid.header.loadingMessage"}),u=[{id:"functionName",header:i.a.createElement(f.a,{id:"functionlisttable.modal.delete.table.name"}),cell:function(e){return e.name},width:200},{id:"functionErrorMessage",header:i.a.createElement(f.a,{id:"functionlisttable.modal.delete.table.error"}),cell:function(e){return t.props.errorMessages[t.state.duplicateSelectedFunctions.indexOf(e)]?i.a.createElement(d.Alert,{type:"error"},t.props.errorMessages[t.state.duplicateSelectedFunctions.indexOf(e)]):""},width:425},{id:"status",header:i.a.createElement(f.a,{id:"functionlisttable.modal.delete.table.status"}),cell:function(e){return i.a.createElement(k.i,{status:t.props.statuses[t.state.duplicateSelectedFunctions.indexOf(e)]||"pending"})},width:75}],m=this.props.statuses?this.state.duplicateSelectedFunctions.length-(this.statusCount("success")+this.statusCount("error")):this.state.duplicateSelectedFunctions.length,g=i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{id:"functionlisttable.modal.delete.table"})," ",i.a.createElement("span",{className:"awsui-util-header-counter"},i.a.createElement(f.a,{id:"wrapper",values:{value:m}}))),v=i.a.createElement("div",{style:{height:"300px",overflow:"scroll",display:"block"}},i.a.createElement(d.Table,{id:"delete-multiple-functions-table",header:i.a.createElement(k.a,{header:g}),columnDefinitions:u,items:this.state.duplicateSelectedFunctions}));return i.a.createElement(k.a,{header:i.a.createElement("span",null,i.a.createElement(f.a,{id:"functions.title"})," "),counter:e},i.a.createElement("div",{id:"statusLabel",className:"awsui-util-header-counter awsui-util-pt-s awsui-util-pr-s"},l),i.a.createElement(d.Button,{icon:"refresh",loading:this.props.loadingFunctions,onClick:function(){return Object(b.logEvent)(b.EVENT_NAMES.FUNCTION_LIST_REFRESH),t.props.loadFunctions(!1)}}),i.a.createElement(d.ButtonDropdown,{disabled:!n,items:c,onItemClick:this.onClickAction.bind(this)},i.a.createElement(f.a,{id:"functionDetail.button.actions"})),i.a.createElement(d.Button,{disabled:this.props.overLimit,variant:"primary",href:"#/create/function"},i.a.createElement(f.a,{id:"functions.button.create"})),i.a.createElement(V,{tag:[b.WorkflowTags.deleteMultipleFunctions,b.WorkflowTags.deleteMultipleFunctionsModal],id:"function-list-delete",size:"large",expandToFit:!0,header:i.a.createElement(f.a,{id:"functionlisttable.modal.delete.header",values:{size:this.state.duplicateSelectedFunctions.length}}),contentProvider:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{tagName:"p",id:"functionlisttable.modal.delete.confirmMessage"}),i.a.createElement(d.Input,{type:"text",value:t.state.inputValue,onInput:t.handleInputChange.bind(t)}),i.a.createElement(d.Alert,{className:"awsui-util-mt-l",type:"warning"},i.a.createElement(f.a,{id:o})),t.statusCount("success")>0?i.a.createElement("div",{className:"awsui-util-mt-m"},i.a.createElement(k.i,{status:"success"},i.a.createElement(f.a,{id:"functionlisttable.modal.delete.successCount",values:{value:t.statusCount("success")}}))):"",t.statusCount("error")>0?i.a.createElement("div",{className:"awsui-util-mt-xs"},i.a.createElement(k.i,{status:"error"},i.a.createElement(f.a,{id:"functionlisttable.modal.delete.failCount",values:{value:t.statusCount("error")}}))):"",i.a.createElement("div",{className:"awsui-util-mt-m"},v))},footerProvider:function(e,n,r,a,o,s,c){return i.a.createElement(i.a.Fragment,null,e&&n>1&&i.a.createElement("span",{className:"awsui-util-f-l"},i.a.createElement(d.Button,{loading:a&&e,onClick:s},i.a.createElement(f.a,{id:"functionlisttable.modal.delete.stop"}))),i.a.createElement("span",{className:"awsui-util-f-r"},e||o?null:i.a.createElement(d.Button,{variant:"link",onClick:r},i.a.createElement(f.a,{id:"cancel"})),i.a.createElement(d.Button,{variant:"primary",loading:e,onClick:o?r:c,disabled:!t.state.confirmedDelete,"data-analytics":b.WorkflowTags.request},i.a.createElement(f.a,{id:o?"close":"functionlisttable.modal.delete.buttonText"}))))},itemProvider:function(e){return"".concat(e.name)},itemTask:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.call)(h.e,Object(h.c)(t.name));case 2:case"end":return e.stop()}}),e)})),items:this.state.duplicateSelectedFunctions,continueOnError:!0,onTaskComplete:function(){b.panorama.logWorkflowEvent({tagPath:t.context.nextTag([b.WorkflowTags.deleteMultipleFunctions,b.WorkflowTags.success]),eventDetail:{functionsDeleted:t.state.duplicateSelectedFunctions.length}})},onClose:function(){t.setState({inputValue:"",confirmedDelete:!1,duplicateSelectedFunctions:[]}),t.props.doneDeletingFunctions()}}))}}])&&F(t.prototype,n),r&&F(t,r),o}(i.a.Component);W(G,"contextType",I.TagContext),W(G,"propTypes",{funcCount:o.a.number.isRequired,lastCached:o.a.number,loadedFuncCount:o.a.number.isRequired,loadingFunctions:o.a.bool.isRequired,selectedFunction:l.a.map,selectedFunctions:l.a.list.isRequired,overLimit:o.a.bool.isRequired,loadFunctions:o.a.func.isRequired,statuses:o.a.array.isRequired,errorMessages:o.a.array.isRequired,openGroupModal:o.a.func.isRequired,visit:o.a.func.isRequired,openDeleteModal:o.a.func.isRequired,doneDeletingFunctions:o.a.func.isRequired});var H=Object(u.connect)((function(e){return{group:Object(h.k)(e),statuses:Object(S.e)(e,"function-list-delete"),errorMessages:Object(S.d)(e,"function-list-delete")}}),(function(e){return{openGroupModal:function(t){e(Object(P.resetForm)("editGroup",{group:t})),e(Object(S.m)("editGroup",!0))},visit:function(t,n){return e(Object(m.c)(t,n))},openDeleteModal:function(){return e(Object(S.m)("function-list-delete",!0))},doneDeletingFunctions:function(){return e(Object(h.r)(!1))}}}),(function(e,t,n){return M(M(M(M({},n),e),t),{},{openGroupModal:function(){return t.openGroupModal(e.group)}})}))(G);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var i=$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X,ee,te,ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(o,e);var t,n,r,a=Q(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={showReplicas:t.props.tableConfiguration.get("showReplicas")},t}return t=o,(n=[{key:"shouldComponentUpdate",value:function(e,t){return this.state.showReplicas===t.showReplicas}},{key:"onConfirm",value:function(){this.props.tableConfiguration.get("showReplicas")!==this.state.showReplicas&&this.props.onTableConfigurationChange({showReplicas:this.state.showReplicas})}},{key:"onToggleShowReplicas",value:function(e){this.setState({showReplicas:e.detail.checked})}},{key:"resetState",value:function(){this.setState({showReplicas:this.props.tableConfiguration.get("showReplicas")})}},{key:"render",value:function(){var e=this,t={label:T.intl.formatMessage({id:"functions.preferences.functionProperties"}),options:this.props.columnDefinitions.map((function(t){var n=t.id;return{id:n,label:T.intl.formatMessage({id:"functions.grid.".concat(n)}),editable:"functionName"!==n,visible:e.props.tableConfiguration.get("contentSelection").includes(n)}}))};return i.a.createElement(d.TablePreferences,{title:T.intl.formatMessage({id:"preferences"}),confirmLabel:T.intl.formatMessage({id:"save"}),cancelLabel:T.intl.formatMessage({id:"cancel"}),onConfirm:this.onConfirm.bind(this),onCancel:this.resetState.bind(this),disabled:this.props.disabled},i.a.createElement(d.TablePageSizeSelector,{title:T.intl.formatMessage({id:"functions.preferences.pageSize"}),options:(T.intl,[10,30,50].map((function(e){return{value:e,label:T.intl.formatMessage({id:"functions.preferences.functions"},{functions:e})}})))}),i.a.createElement(d.TableWrapLines,{label:T.intl.formatMessage({id:"functions.preferences.wrapLines"})}),i.a.createElement("div",{className:"awsui-table-custom-preference"},i.a.createElement(d.Checkbox,{checked:this.state.showReplicas,onChange:this.onToggleShowReplicas.bind(this)},i.a.createElement(f.a,{id:"functions.preferences.showReplicas"}))),i.a.createElement(d.TableContentSelector,{title:T.intl.formatMessage({id:"functions.preferences.visibleColumns"}),options:[t]}))}}])&&J(t.prototype,n),r&&J(t,r),o}(i.a.Component);X=ne,ee="propTypes",te={columnDefinitions:o.a.array.isRequired,onTableConfigurationChange:o.a.func.isRequired,tableConfiguration:l.a.map.isRequired,disabled:o.a.bool.isRequired},ee in X?Object.defineProperty(X,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[ee]=te;var re=n(1825),ie=n(1673);function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=[{id:"functionName",field:"name"},{id:"packageType",field:"packageType"},{id:"runtime",field:"runtime"},{id:"codeSize",field:"codeSize"},{id:"memorySize",field:"memorySize"},{id:"timeout",field:"timeout"},{id:"lastModified",field:"lastModified"},{id:"architecture",field:"architecture"}];function ue(e){var t=i.a.createElement(H,{funcCount:e.funcCount,lastCached:e.lastCached,loadedFuncCount:e.loadedFuncCount,loadingFunctions:e.loadingFunctions,selectedFunction:e.selectedFunction,selectedFunctions:e.selectedFunctions,overLimit:e.overLimit,loadFunctions:e.loadFunctions}),n=[{id:"functionName",cell:function(e){return i.a.createElement("a",{href:"#/functions/".concat(Object(_.hb)(e.arn))},e.name)}},{id:"description",cell:function(e){return i.a.createElement("span",null,e.description||"-")}},{id:"packageType",cell:function(e){return i.a.createElement("span",null,e.packageType)},width:150},{id:"runtime",cell:function(e){var t;return i.a.createElement("span",null,null!==(t=e.runtime)&&void 0!==t?t:"-")}},{id:"architecture",cell:function(e){return i.a.createElement("span",null,e.architecture)}},{id:"codeSize",cell:function(e){return i.a.createElement("span",null,e.codeSize?Object(_.p)(e.codeSize):"-")}},{id:"memorySize",cell:function(e){return i.a.createElement("span",null,e.memorySize)}},{id:"timeout",cell:function(e){return i.a.createElement("span",null,e.timeout)}},{id:"lastModified",cell:function(e){return i.a.createElement(R.a,{value:e.lastModified})}}];Object(_.U)("parangopod")||(n=n.filter((function(e){return"packageType"!==e.id}))),Object(ie.c)().length<2&&(n=n.filter((function(e){return"architecture"!==e.id}))),n=n.map((function(e){return se(se({},e),{},{header:function(){return i.a.createElement(f.a,{id:"functions.grid.".concat(e.id)})}})}));var r=e.selectedFunctions.toJS()||[],a=e.loadingFunctions,o=e.loadingFunctions?"loading":void 0;return i.a.createElement(d.Table,{columnDefinitions:n,empty:T.intl.formatMessage({id:"functions.grid.noData"}),noMatch:T.intl.formatMessage({id:"functions.grid.noData"}),loading:e.loadingFunctions&&!e.items.length,items:e.items,header:t,className:"functionList",features:["pagination","propertyFiltering","selection","sorting"],wrapLines:e.tableConfiguration.get("wrapLines"),onContentSelectionChange:function(t){var n=t.detail;return e.onTableConfigurationChange(n)},onWrapLinesChange:function(t){var n=t.detail;return e.onTableConfigurationChange({wrapLines:n.value})}},i.a.createElement(d.TablePropertyFiltering,ae({},e.propertyFilterProps,{filteringStatusType:o})),i.a.createElement(d.TablePagination,{pageSize:e.tableConfiguration.get("pageSize"),onPaginationChange:function(t){var n=t.detail;return Object(b.logEvent)(b.EVENT_NAMES.FUNCTION_LIST_PAGE_CHANGE),e.onTableConfigurationChange(n)}}),i.a.createElement(ne,{columnDefinitions:n,onTableConfigurationChange:e.onTableConfigurationChange,tableConfiguration:e.tableConfiguration,disabled:a}),i.a.createElement(d.TableSelection,{keepSelection:!0,selectionType:"multi",trackBy:"name",selectedItems:r,onSelectionChange:e.onSelectionChange}),i.a.createElement(d.TableSorting,{sortableColumns:le,sortingDescending:e.tableConfiguration.get("sortingDescending"),sortingColumn:e.tableConfiguration.get("sortingColumn"),onSortingChange:function(t){var n=t.detail;return e.onTableConfigurationChange(n)}}))}ue.propTypes={funcCount:o.a.number.isRequired,items:o.a.arrayOf(o.a.object).isRequired,overLimit:o.a.bool.isRequired,lastCached:o.a.number,loadedFuncCount:o.a.number.isRequired,loadingFunctions:o.a.bool.isRequired,loadFunctions:o.a.func.isRequired,onSelectionChange:o.a.func.isRequired,onTableConfigurationChange:o.a.func.isRequired,selectedFunction:l.a.map,selectedFunctions:l.a.list.isRequired,tableConfiguration:l.a.map.isRequired,propertyFilterProps:o.a.object.isRequired};var de=[{group:{id:"functions.grid.functionAttributes"},key:{id:"functions.grid.functionName"},value:function(e){return e.name},logEventName:"name",propertyKey:"name",groupId:"functionAttributes"},{group:{id:"functions.grid.functionAttributes"},key:{id:"functions.grid.description"},value:function(e){return e.description},includeEmptySuggestion:!0,logEventName:"desc",propertyKey:"description",groupId:"functionAttributes"},{group:{id:"functions.grid.functionAttributes"},key:{id:"functions.grid.runtime"},value:function(e){return e.runtime},logEventName:"runt",propertyKey:"runtime",groupId:"functionAttributes"},{group:{id:"functions.grid.functionAttributes"},key:{id:"masterARN"},value:function(e){return e.masterArn},includeAllValuesSuggestion:!0,logEventName:"repl",propertyKey:"masterArn",groupId:"functionAttributes"}];if(Object(ie.c)().length>1){de.push({group:{id:"functions.grid.functionAttributes"},key:{id:"functions.grid.architecture"},value:function(e){return e.architecture},includeAllValuesSuggestion:!0,logEventName:"arch",propertyKey:"architecture",groupId:"functionAttributes"})}de.splice(3,0,{group:{id:"tags.fields.tags.label"},prefix:"tag",pairs:function(e){return e.tags.map((function(e){return{key:e.key,value:e.value}}))},includeEmptySuggestion:!0,includeAllValuesSuggestion:!0,logEventName:"tag",groupId:"tags"});var fe=Object(re.a)(ue,{dataName:"items",searchMetadata:de}),pe=n(1661),me=n(1957),he=n(1669),ge=n(1678);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=je(e);if(t){var i=je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(o,e);var t,n,r,a=Oe(o);function o(){return ve(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"onSelectionChange",value:function(e){var t=e.detail.selectedItems;t.length?this.props.setSelectedFunction(t.map((function(e){return e.name}))):this.props.setSelectedFunction()}},{key:"onTableConfigurationChange",value:function(e){var t=Object(s.Map)(e),n=this.props.tableConfiguration.merge(t);ge.f("lambda-functionList-configuration",n.toJS()),this.props.setTableConfiguration(t)}},{key:"render",value:function(){var e=this.props.tag,t=null;if(!this.props.hasErrors){var n=this.props.functions.toList().toJS(),r=this.props,a=r.funcCount,o=r.overLimit,s=r.selectedFunction,c=r.tableConfiguration;c.get("showReplicas")||(n=n.filter((function(e){return!e.masterArn}))),t=i.a.createElement(fe,{funcCount:a,lastCached:this.props.lastCached,loadedFuncCount:n.length,loadingFunctions:this.props.loadingFunctions,overLimit:o,items:n,selectedFunction:s,selectedFunctions:this.props.selectedFunctions,onSelectionChange:this.onSelectionChange.bind(this),onTableConfigurationChange:this.onTableConfigurationChange.bind(this),tableConfiguration:c,loadFunctions:this.props.loadFunctions})}return i.a.createElement(he.a,{id:"listFunctions",breadcrumbs:{items:[{text:T.intl.formatMessage({id:"functions.title"}),href:"#/functions"}]},tag:e},i.a.createElement(pe.b,{scope:"listFunctions"}),t,i.a.createElement(w,null),C.d.includes("frost")?i.a.createElement(me.a,null):null)}}])&&ye(t.prototype,n),r&&ye(t,r),o}(i.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Se,"propTypes",{funcCount:o.a.number.isRequired,functions:l.a.orderedMap.isRequired,lastCached:o.a.number,loadingFunctions:o.a.bool.isRequired,hasErrors:o.a.bool.isRequired,overLimit:o.a.bool.isRequired,selectedFunction:l.a.map,selectedFunctions:l.a.list.isRequired,tableConfiguration:l.a.map.isRequired,tag:o.a.string,tagType:o.a.string,nextTag:o.a.func,setSelectedFunction:o.a.func.isRequired,setTableConfiguration:o.a.func.isRequired,loadFunctions:o.a.func.isRequired});t.default=Object(I.tagContextHoc)(Object(u.connect)(h.q,h.p)(Se),!0)},2623:function(e,t,n){"use strict";n.r(t),n.d(t,"AddDatabaseProxyPageComponent",(function(){return A}));var r=n(1),i=n.n(r),a=n(429),o=n(167),s=n(675),c=n(1717),l=n(1672),u=function(){return Object(l.v)().pipe((function(e){return e.map((function(e){return{id:e.dbproxyArn,label:e.dbproxyName,description:"".concat(e.dbproxyArn)}}))})).take(1e3)};function d(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.FormField,{id:"existingEndpoint",label:i.a.createElement(o.a,{id:"addDatabaseProxy.chooseExisting.existingEndpoint.label"}),paginator:u},i.a.createElement(a.Select,{filteringType:"auto"})))}var f=n(440),p=n(1896),m=n(1830),h=n(1760),g=n(55),b=n(69),v=function(e){return parseInt(e,10)},y=function(e,t,n){if(!e)return!1;var r=e.split(".");return v(r[0])===t&&v(r[1])>=n},E=function(e){return"".concat(e).replace(/[a-zA-Z]+$/,"")},O=function(e){var t,n=e.engine===p.a.POSTGRESQL.VALUE,r=e.engine===p.a.AURORA_POSTRESQL.VALUE,i=e.engine===p.a.AURORA_MYSQL_5_6.VALUE||e.engine===p.a.AURORA_MYSQL_5_7.VALUE,a=e.engine===p.a.MYSQL.VALUE;if((t=g.d.includes("karma")?n||r||a||i:a||i)&&e.engineMode)t=g.d.includes("dittomm")?-1===e.engineMode.search(/^serverless$/):-1===e.engineMode.search(/^serverless|multimaster$/);else if(t&&(a||i))t=-1!==e.engineVersion.search(/5.6|5.7/);else if(t&&n){var o=E(e.engineVersion);t=y(o,11,5)||y(o,10,10)}else if(t&&r){var s=E(e.engineVersion);t=y(s,11,6)||y(s,10,11)}return e.dbinstanceIdentifier?t&&!e.dbclusterIdentifier&&-1!==e.dbinstanceStatus.search(/available|modify|backing/i):t},w=function(e){var t,n,r,i=e.dbclusterIdentifier&&!e.dbinstanceIdentifier;return{id:i?e.dbclusterIdentifier:e.dbinstanceIdentifier,label:i?e.dbclusterIdentifier:e.dbinstanceIdentifier,description:(t=e.engine.toLowerCase(),n=i,"".concat(b.intl.formatMessage({id:"addDatabaseProxy.createNew.description.".concat(n?"cluster":"db")},{dbName:(r=t,p.b[r]||"")}))),engine:e.engine,dbType:i?"cluster":"db",_original:e}},j=function(){return Object(l.d)().pipe((function(e){return e.filter(O).map(w)})).take(1e3)},S=function(){return Object(l.y)().pipe((function(e){return e.map((function(e){var t=e.arn;return{value:t,label:t,needsKms:!!e.kmsKeyId}}))})).take(1e3)},k=[{label:b.intl.formatMessage({id:"addDatabaseProxy.createNew.iamAuthentication.enabled.label"}),id:"REQUIRED",description:b.intl.formatMessage({id:"addDatabaseProxy.createNew.iamAuthentication.enabled.description"})},{label:b.intl.formatMessage({id:"addDatabaseProxy.createNew.iamAuthentication.disabled.label"}),id:"DISABLED",description:b.intl.formatMessage({id:"addDatabaseProxy.createNew.iamAuthentication.disabled.description"})}],_=Object(s.connect)((function(e){return{instanceSelections:Object(c.getFieldValue)(e,"addDatabaseProxy","rdsInstance")||"",iamSelection:Object(c.getFieldValue)(e,"addDatabaseProxy","iamAuthentication")||"DISABLED"}}),(function(e){return{onChangeRoleCombination:function(){return e(Object(m.a)())}}}))((function(e){var t=e.iamSelection,n=e.instanceSelections,r=e.onChangeRoleCombination;return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.FormField,{id:"databaseProxyIdentifier",label:i.a.createElement(o.a,{id:"addDatabaseProxy.createNew.proxyIdentifier.label"}),description:i.a.createElement(f.a,{id:"addDatabaseProxy.createNew.proxyIdentifier.tooltip"})},i.a.createElement(a.Input,null)),i.a.createElement(c.FormField,{id:"rdsInstance",label:i.a.createElement(o.a,{id:"addDatabaseProxy.createNew.rdsInstance.label"}),description:i.a.createElement(f.a,{id:"addDatabaseProxy.createNew.rdsInstance.tooltip"}),paginator:j},i.a.createElement(a.Select,{placeholder:b.intl.formatMessage({id:"addDatabaseProxy.createNew.rdsInstance.placeholder"}),filteringType:"auto",selectedOption:{id:n,label:n}})),i.a.createElement(c.FormField,{id:"secretManagerArn",label:i.a.createElement(o.a,{id:"addDatabaseProxy.createNew.secretManagerArn.label"}),description:i.a.createElement(f.a,{id:"addDatabaseProxy.createNew.secretManagerArn.tooltip"}),paginator:S,onChange:r},i.a.createElement(a.Autosuggest,{filteringType:"auto",placeholder:b.intl.formatMessage({id:"addDatabaseProxy.createNew.secretManagerArn.placeholder"}),empty:b.intl.formatMessage({id:"addDatabaseProxy.createNew.secretManagerArn.empty"})})),i.a.createElement(h.a,{formId:"addDatabaseProxy",roleFilter:"rds.amazonaws.com",showRadioSelection:!1,onChange:r}),i.a.createElement(c.FormField,{id:"iamAuthentication",label:i.a.createElement(o.a,{id:"addDatabaseProxy.createNew.iamAuthentication.label"}),description:i.a.createElement(f.a,{id:"addDatabaseProxy.createNew.iamAuthentication.tooltip"})},i.a.createElement(a.Select,{options:k,selectedOption:k.find((function(e){return e.id===t}))})))})),C=n(1652),T=n(1655),P=n(1669),x=n(24),R=n(1688),N=n(1662),I={pattern:"^[0-9a-z-]+$",maxLength:60},D={type:"object",anyOf:[{properties:{proxySelection:{enum:["chooseExisting"]}},required:["existingEndpoint"]},{properties:{proxySelection:{enum:["createNew"]},databaseProxyIdentifier:I,rdsInstance:I,secretManagerArn:{pattern:"^$|^arn:".concat(Object(x.v)(),":secretsmanager:.+:\\d{12}:secret:.+$")},existingRole:{type:"string",pattern:"^arn:".concat(Object(x.v)(),":iam::\\d{12}:role\\/?[a-zA-Z_0-9+=,.@\\-/]+$"),maxLength:607,errorMessage:{pattern:R.b["role.pattern"]}}},required:["databaseProxyIdentifier","rdsInstance","secretManagerArn","existingRole"]}]};function A(e){var t=e.selection,n=e.add,r=e.cancel,s=e.creating,l=["createNew","chooseExisting"].map((function(e){return{value:e,label:i.a.createElement(o.a,{id:"addDatabaseProxy.selection.".concat(e,".radioLabel")})}}));return i.a.createElement(P.a,{id:"addDatabaseProxy",breadcrumbs:{items:[{text:b.intl.formatMessage({id:"addDatabaseProxy.header"}),href:"#/add/database-proxy"}]}},i.a.createElement(T.a,{id:"addDatabaseProxy",header:i.a.createElement(o.a,{tagName:"h1",id:"addDatabaseProxy.header"}),actionsProvider:function(e){return i.a.createElement("div",null,i.a.createElement(a.Button,{variant:"link",onClick:r},i.a.createElement(o.a,{id:"cancel"})),i.a.createElement(a.Button,{variant:"primary",onClick:e,loading:s},i.a.createElement(o.a,{id:"add.button.submit"})))},onSubmit:n,schema:D},i.a.createElement(C.e,{header:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{id:"addDatabaseProxy.section.databaseProxy"}),i.a.createElement(N.a,{path:"addDatabaseProxy.helpContent"}))},i.a.createElement(c.FormField,{id:"proxySelection"},i.a.createElement(a.RadioGroup,{items:l})),"createNew"===t?i.a.createElement(_,null):i.a.createElement(d,null))))}t.default=Object(s.connect)(m.d,m.c)(A)},308:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a,o,s;return t=e,(n=[{key:"init",value:(o=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})),s=function(){var e=this,t=arguments;return new Promise((function(n,i){var a=o.apply(e,t);function s(e){r(a,n,i,s,c,"next",e)}function c(e){r(a,n,i,s,c,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}])&&i(t.prototype,n),a&&i(t,a),e}();t.Adapter=a},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIME_DIRECTORY="inode/directory",t.MIME_FILE="inode/file",t.getDirectoryEntry=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{meta:{name:e.split("/").pop(),size:0,mime:t.MIME_DIRECTORY},data:n}},t.getFileEntry=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{meta:{name:e.split("/").pop(),size:n.length,mime:t.MIME_FILE},data:n}},t.mergeFilter=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.startsWith("".concat(n.substring(1),"/")),o=e===n.substring(1);return i?a||o:r===t.MIME_DIRECTORY?a:o},t.mergeReplace=function(e,t){return e.replace(new RegExp("^".concat(t.from.substring(1))),t.path.substring(1))}},310:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,a="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,o=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}(e,i,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e))}function d(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,a,o,s;if(u(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=d(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):b(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function b(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+r(e));e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,u=b(c,l);for(n=0;n<l;++n)o(u[n],this,t)}return!0},c.prototype.addListener=function(e,t){return f(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return f(this,e,t,!0)},c.prototype.once=function(e,t){return u(t),this.on(e,m(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,m(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,i,a,o;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return h(this,e,!0)},c.prototype.rawListeners=function(e){return h(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},311:function(e,t,n){(t=e.exports=n(449)).Stream=t,t.Readable=t,t.Writable=n(312),t.Duplex=n(132),t.Transform=n(453),t.PassThrough=n(711)},312:function(e,t,n){"use strict";(function(t,r,i){var a=n(229);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var s,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;v.WritableState=b;var l=Object.create(n(189));l.inherits=n(162);var u={deprecate:n(710)},d=n(450),f=n(230).Buffer,p=i.Uint8Array||function(){};var m,h=n(451);function g(){}function b(e,t){s=s||n(132),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,n,r,t,i);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||O(e,n),r?c(E,e,n,o,i):E(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(e){if(s=s||n(132),!(m.call(v,this)||this instanceof s))return new v(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function y(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function E(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function O(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,y(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(y(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=w(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(j,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(v,d),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===v&&(e&&e._writableState instanceof b)}})):m=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,f.isBuffer(r)||r instanceof p);return s&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,r,i,a);return c}(this,i,s,e,t,n)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||O(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=h.destroy,v.prototype._undestroy=h.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(136),n(313).setImmediate,n(14))},314:function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:n(717),e.exports={Promise:r}},315:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},437:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),i=n(40),a=n(6);function o(){var e=Object(r.useContext)(i.a);return Object(a.h)(e),e}},448:function(e,t,n){e.exports=n(705)},449:function(e,t,n){"use strict";(function(t,r){var i=n(229);e.exports=y;var a,o=n(447);y.ReadableState=v;n(310).EventEmitter;var s=function(e,t){return e.listeners(t).length},c=n(450),l=n(230).Buffer,u=t.Uint8Array||function(){};var d=Object.create(n(189));d.inherits=n(162);var f=n(706),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var m,h=n(707),g=n(451);d.inherits(y,c);var b=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(a=a||n(132));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=n(452).StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function y(e){if(a=a||n(132),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function E(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,j(e)}(e,o)):(i||(a=function(e,t){var n;r=t,l.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):O(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?O(e,o,t,!1):k(e,o)):O(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&j(e)),k(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},y.prototype.unshift=function(e){return E(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return m||(m=n(452).StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){p("emit readable"),e.emit("readable"),P(e)}function k(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(_,e,t))}function _(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){p("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):j(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&R(this),null;var r,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,t);var c=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:y;function l(t,r){p("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",l),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",h),f=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){p("onend"),e.end()}a.endEmitted?i.nextTick(c):n.once("end",c),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",d);var f=!1;var m=!1;function h(t){p("ondata"),m=!1,!1!==e.write(t)||m||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==I(a.pipes,e))&&!f&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,m=!0),n.pause())}function g(t){p("onerror",t),y(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",v),y()}function v(){p("onfinish"),e.removeListener("close",b),y()}function y(){p("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",b),e.once("finish",v),e.emit("pipe",n),a.flowing||(p("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=I(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&j(this):i.nextTick(C,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<b.length;a++)e.on(b[a],this.emit.bind(this,b[a]));return this._read=function(t){p("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=x}).call(this,n(14),n(136))},450:function(e,t,n){e.exports=n(310).EventEmitter},451:function(e,t,n){"use strict";var r=n(229);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},452:function(e,t,n){"use strict";var r=n(230).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},453:function(e,t,n){"use strict";e.exports=o;var r=n(132),i=Object.create(n(189));function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){c(e,t,n)})):c(this,null,null)}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(162),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},454:function(e,t,n){"use strict";var r=n(51),i=n(130),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,i,o,s,c,l,u=[],d=0,f=e.length,p=f,m="string"!==r.getTypeOf(e);d<e.length;)p=f-d,m?(t=e[d++],n=d<f?e[d++]:0,i=d<f?e[d++]:0):(t=e.charCodeAt(d++),n=d<f?e.charCodeAt(d++):0,i=d<f?e.charCodeAt(d++):0),o=t>>2,s=(3&t)<<4|n>>4,c=p>1?(15&n)<<2|i>>6:64,l=p>2?63&i:64,u.push(a.charAt(o)+a.charAt(s)+a.charAt(c)+a.charAt(l));return u.join("")},t.decode=function(e){var t,n,r,o,s,c,l=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&f--,e.charAt(e.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(o=a.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(c=a.indexOf(e.charAt(l++))),d[u++]=t,64!==s&&(d[u++]=n),64!==c&&(d[u++]=r);return d}},455:function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){if(t.from&&t.from!==Uint8Array.from)return t.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,n)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var n=new t(e);return n.fill(0),n},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(131).Buffer)},456:function(e,t,n){"use strict";var r=n(51),i=n(130),a=n(457),o=n(720),s=n(721),c=n(459);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new c(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},457:function(e,t,n){"use strict";var r=n(458);function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}n(51).inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},458:function(e,t,n){"use strict";var r=n(51);function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},459:function(e,t,n){"use strict";var r=n(457);function i(e){r.call(this,e)}n(51).inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},460:function(e,t,n){"use strict";var r=n(456),i=n(51),a=n(461),o=n(463),s=n(228),c=n(725),l=n(130);function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=u},461:function(e,t,n){"use strict";var r=n(314),i=n(462),a=n(723),o=n(724);function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},e.exports=s},462:function(e,t,n){"use strict";var r=n(51),i=n(105);function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=a},463:function(e,t,n){"use strict";var r=n(51);var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},464:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},465:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},466:function(e,t,n){"use strict";var r=n(121),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,i,a,o,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),o=0,a=0;o<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,a,s=t||e.length,l=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)l[r++]=i;else if((a=o[i])>4)l[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return c(l,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},467:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},468:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},51:function(e,t,n){"use strict";var r=n(130),i=n(454),a=n(455),o=n(716),s=n(314);function c(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return u.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return u.stringifyByChar(e)}function f(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=d;var p={};p.string={string:c,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.allocBuffer(e.length))}},p.array={string:d,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},p.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:d,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return a.newBufferFrom(e)}},p.nodebuffer={string:d,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:c},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return p[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){o((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,a,o,c){return s.Promise.resolve(n).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var u,d=t.getTypeOf(n);return d?("arraybuffer"===d?n=t.transformTo("uint8array",n):"string"===d&&(c?n=i.decode(n):a&&!0!==o&&(n=l(u=n,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),n):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},683:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(698)),r(n(700)),r(n(701)),r(n(702))},698:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(515),s=a(n(1)),c=n(699),l=function(e,t,n){Object.entries(n).forEach((function(n){var i=r(n,2),a=i[0],o=i[1];e[t](a,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o[e].apply(o,n)}))}))};t.Cloud9Lite=function(e){var t=s.useRef(),n=s.useRef(null),i=e.fullscreen,a=e.setFullscreen,u=s.useRef(e);return s.useEffect((function(){u.current=e})),s.useEffect((function(){var s,d;u.current.metrics.logEvent("ideTryLoad");var f=r(u.current.getIframeLocation(),2),p=f[0],m=f[1];return t.current=new o.PostMessageBus(window,n.current.contentWindow,m,"application/x-cloud9-lite-v2+json"),t.current.handle("init",(function(e,t){return t(null,{dark:u.current.dark,defaultFile:u.current.defaultFile,features:u.current.features||[],fullscreen:i,hash:u.current.hash,projectId:u.current.projectId,projectName:u.current.projectName,readonly:u.current.readonly,userId:u.current.userId})})),t.current.on("ready",(function(){var e,n;null===(n=(e=u.current).onReady)||void 0===n||n.call(e,t.current)})),l(t.current,"handle",{"c9lite.vfs":c.vfs({adapter:new u.current.adapter(u.current.adapterProps),encryptionSchemes:e.encryptionSchemes,defaultEncryptionScheme:e.defaultEncryptionScheme})}),l(t.current,"on",{"c9lite.fullscreen":{toggle:function(e){return a(e)}},"c9lite.metrics":u.current.metrics}),null===(d=(s=u.current).registerApis)||void 0===d||d.call(s,t.current),n.current.src="".concat(p,"?origin=").concat(window.location.origin,"&v2=true"),function(){return t.current.remove()}}),[]),s.default.createElement("div",{className:"ide-container ".concat(i?"fullscreen":"collapsed")},s.default.createElement("iframe",{id:"editor",ref:n}))}},699:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}Object.defineProperty(t,"__esModule",{value:!0});var c,l,u=a({},"0/ECHO",{decrypt:(l=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),encrypt:(c=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})}),d=function(){var e=s(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:r=e.sent,n(null,r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();t.vfs=function(e){return{init:function(t,n){return s(regeneratorRuntime.mark((function r(){var a,o,s,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i(i({},u),e.encryptionSchemes||{}),o=e.defaultEncryptionScheme||"0/ECHO",r.next=4,e.adapter.init();case 4:return r.next=6,a[o].encrypt(t.writeKey);case 6:if(s=r.sent,c={version:o,writeKey:s},!t.readKey){r.next=15;break}if(a[t.version]){r.next=12;break}return n(new Error("EINVAL")),r.abrupt("return");case 12:return r.next=14,a[t.version].decrypt(t.readKey);case 14:c.readKey=r.sent;case 15:n(null,c);case 16:case"end":return r.stop()}}),r)})))()},read:function(t,n){return s(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:d((function(){return e.adapter.read(t)}),n);case 1:case"end":return r.stop()}}),r)})))()},merge:function(t,n,r){return s(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:d((function(){return e.adapter.merge(t,n)}),r);case 1:case"end":return i.stop()}}),i)})))()}}}},700:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var f=n(87),p=n(308),m=n(309),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,i,u,d=l(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,p),(e=d.call(this)).zip=t.zip||f.Map(),e}return t=p,(n=[{key:"read",value:(u=a(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.warn("Lower FS read:",t),!this.zip.isEmpty()||"/"!==t){e.next=3;break}return e.abrupt("return",m.getDirectoryEntry(t));case 3:if(n=t.substring(1),!this.zip.has(n)){e.next=6;break}return e.abrupt("return",m.getFileEntry(t,this.zip.get(n)));case 6:if(r=n?"".concat(n,"/"):n,!(i=this.zip.filter((function(e,t){return t.startsWith(r)})).toMap().mapKeys((function(e){return e.replace(r,"").split("/")})).keySeq().groupBy((function(e){return e[0]})).map((function(e,t){return{name:t,size:-1,mime:e.some((function(e){return e.length>1}))?m.MIME_DIRECTORY:m.MIME_FILE}}))).isEmpty()){e.next=10;break}throw new Error("ENOENT");case 10:return e.abrupt("return",m.getDirectoryEntry(t,i.toList().toArray()));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"merge",value:(i=a(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.zip=n.reduce((function(e,t){var n=e;return(t.whiteout||t.opaque)&&(n=n.filterNot((function(e,n){return m.mergeFilter(n,t.path,t.meta.mime,t.opaque)})).toMap()),t.from&&(n=n.merge(n.filter((function(e,n){return m.mergeFilter(n,t.from,t.meta.mime)})).toMap().mapKeys((function(e){return m.mergeReplace(e,t)})))),t.meta.mime!==m.MIME_FILE||t.whiteout||t.from||(n=n.set(t.path.substring(1),t.data)),n}),this.zip),e.abrupt("return",{hash:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})}])&&s(t.prototype,n),r&&s(t,r),p}(p.Adapter);t.InMemoryAdapter=h},701:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var f=n(308),p=n(309),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,n,r,i,l,d=c(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),t=d.call(this),Object.assign(u(t),e),t}return t=f,(n=[{key:"read",value:(l=a(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.substring(1),!(r=this.zip.file(n))){e.next=7;break}return e.next=5,r.async("string");case 5:return i=e.sent,e.abrupt("return",p.getFileEntry(t,i));case 7:if(a=n?"".concat(n,"/"):n,o=[],s=[],c=!1,this.zip.filter((function(e){return e.startsWith(a)})).forEach((function(e){var t=e.name.replace(a,"").split("/"),n=t[0];if(n){var r=e.dir?p.MIME_DIRECTORY:p.MIME_FILE;if(t.length>1){if(s.includes(n))return;r=p.MIME_DIRECTORY}o.push({name:n,size:-1,mime:r}),s.push(n)}else c=!0})),0!==o.length||c){e.next=14;break}throw new Error("ENOENT");case 14:return e.abrupt("return",p.getDirectoryEntry(t,o));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"merge",value:(i=a(regeneratorRuntime.mark((function e(t,n){var r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.forEach((function(e){var t;if((e.whiteout||e.opaque)&&a.zip.filter((function(t){return p.mergeFilter(t,e.path,e.meta.mime,e.opaque)})).forEach((function(e){return a.zip.remove(e.name)})),e.from&&a.zip.filter((function(t){return p.mergeFilter(t,e.from,e.meta.mime)})).forEach((function(t){var n=p.mergeReplace(t.name,e);t.dir?a.zip.folder(n):a.zip.file(n,t.async("uint8array"),{unixPermissions:t.unixPermissions})})),e.meta.mime===p.MIME_FILE&&!e.whiteout&&!e.from){var n=a.zip.file(e.path.substring(1));a.zip.file(e.path.substring(1),e.data,{unixPermissions:null==n?void 0:n.unixPermissions})}e.meta.mime!==p.MIME_DIRECTORY||e.whiteout||0!==(null===(t=e.data)||void 0===t?void 0:t.length)||a.zip.folder(e.path.substring(1))})),e.next=3,this.zip.generateAsync(this.zipGenerateOptions||{compression:"DEFLATE",platform:"UNIX",type:"base64"});case 3:return r=e.sent,e.next=6,this.save(r);case 6:return i=e.sent,e.abrupt("return",{hash:i});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})}])&&o(t.prototype,n),r&&o(t,r),f}(f.Adapter);t.LocalZipAdapter=m},702:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var h=n(228),g=m(n(719)),b=m(n(460)),v=m(n(736)),y=n(308),E=n(309),O=function(){function e(t){d(this,e),this.getRemoteRange=t,this.zip=new g.default({base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode})}var t,n;return p(e,[{key:"files",get:function(){return this.zip.files}},{key:"loadCentralDirectory",value:(n=u(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ecdrCache){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getRemoteRange({url:t,low:-65557});case 4:r=e.sent,this.zip.prepareReader(r),e.prev=6,this.zip.readEndOfCentral(),e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(6),e.t0.message.startsWith("Corrupted zip: missing")){e.next=14;break}throw e.t0;case 14:if(!n){e.next=29;break}if(!((i=r.byteLength-n+this.zip.centralDirOffset)>=0)){e.next=20;break}this.zip.prepareReader(r.slice(i)),e.next=27;break;case 20:return e.next=22,this.getRemoteRange({url:t,low:this.zip.centralDirOffset,high:this.zip.centralDirOffset-i-1});case 22:a=e.sent,(o=new Uint8Array(a.byteLength+r.byteLength)).set(a),o.set(r,a.byteLength),this.zip.prepareReader(o);case 27:e.next=33;break;case 29:return e.next=31,this.getRemoteRange({url:t,low:this.zip.centralDirOffset});case 31:s=e.sent,this.zip.prepareReader(s);case 33:for(;this.zip.reader.readAndCheckSignature("PK");)l=this.zip.reader.index,(c=new b.default({zip64:this.zip.zip64},this.zip.loadOptions)).readCentralPart(this.zip.reader),u=this.zip.reader.index,this.zip.reader.setIndex(l+24),c.fileNameLength=this.zip.reader.readInt(2),this.zip.reader.skip(16),c.fileName=this.zip.reader.readData(c.fileNameLength),this.zip.reader.setIndex(u),c.fileNameStr=h.utf8decode(c.fileName),c.dir=c.fileNameStr.endsWith("/"),this.zip.files.push(c);if(0===this.zip.centralDirRecords||0!==this.zip.files.length){e.next=36;break}throw new Error("Expected ".concat(this.zip.centralDirRecords," in central directory, got ").concat(this.zip.files.length));case 36:this.ecdrCache=r;case 37:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(e,t){return n.apply(this,arguments)})},{key:"loadFile",value:(t=u(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.localHeaderOffset,!(r&&this.ecdrCache.byteLength>=r)){e.next=5;break}this.zip.prepareReader(this.ecdrCache.slice(i)),e.next=9;break;case 5:return e.next=7,this.getRemoteRange({url:t,low:i,high:i+30+n.fileNameLength+n.extraFieldsLength+n.compressedSize+4-1});case 7:a=e.sent,this.zip.prepareReader(a);case 9:return this.zip.checkSignature("PK"),n.readLocalPart(this.zip.reader),n.handleUTF8(),n.processAttributes(),o=new v.default(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,dir:n.dir}),e.next=16,o.async("string");case 16:return s=e.sent,e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=a(o);function o(e){var t;return d(this,o),t=r.call(this),Object.assign(s(t),e),t.expires=-1,t.zip=new O(e.getRemoteRange),t}return p(o,[{key:"read",value:(n=u(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.expires<Date.now())){e.next=5;break}return e.next=3,this.getUrl();case 3:n=e.sent,Object.assign(this,n);case 5:return e.next=7,this.zip.loadCentralDirectory(this.url,this.zipSize);case 7:if(r=t.substring(1),!(i=this.zip.files.find((function(e){var t=e.dir;return e.fileNameStr===r&&!t})))){e.next=16;break}if(!(i.uncompressedSize>3145728)){e.next=12;break}throw new Error("EFBIG");case 12:return e.next=14,this.zip.loadFile(this.url,i,this.zipSize);case 14:return a=e.sent,e.abrupt("return",E.getFileEntry(t,a));case 16:if(o=r?"".concat(r,"/"):r,s=[],c=[],l=!1,this.zip.files.filter((function(e){return e.fileNameStr.startsWith(o)})).forEach((function(e){var t=e.dir,n=e.fileNameStr.replace(o,"").split("/"),r=n[0];if(r){var i=t?E.MIME_DIRECTORY:E.MIME_FILE;if(n.length>1){if(c.includes(r))return;i=E.MIME_DIRECTORY}s.push({name:r,size:-1,mime:i}),c.push(r)}else l=!0})),0!==s.length||l){e.next=23;break}throw new Error("ENOENT");case 23:return e.abrupt("return",E.getDirectoryEntry(t,s));case 24:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"merge",value:(t=u(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.save(t,n);case 2:return r=e.sent,e.abrupt("return",{hash:r});case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),o}(y.Adapter);t.RemoteZipAdapter=w},705:function(e,t,n){e.exports=i;var r=n(310).EventEmitter;function i(){r.call(this)}n(162)(i,r),i.Readable=n(311),i.Writable=n(712),i.Duplex=n(713),i.Transform=n(714),i.PassThrough=n(715),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var o=!1;function s(){o||(o=!0,e.end())}function c(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},706:function(e,t){},707:function(e,t,n){"use strict";var r=n(230).Buffer,i=n(708);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,a=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=a,i=s,t.copy(n,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},708:function(e,t){},710:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(14))},711:function(e,t,n){"use strict";e.exports=a;var r=n(453),i=Object.create(n(189));function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(162),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},712:function(e,t,n){e.exports=n(312)},713:function(e,t,n){e.exports=n(132)},714:function(e,t,n){e.exports=n(311).Transform},715:function(e,t,n){e.exports=n(311).PassThrough},716:function(e,t,n){"use strict";(function(t){e.exports="function"==typeof t?t:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,n(313).setImmediate)},717:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(718);function a(){}var o={},s=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&m(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){i((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"===r(e)||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=h((function(){t(i,r)}));"error"===a.status&&r(a.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=u,u.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(a);this.state!==l?f(n,this.state===c?e:t,this.outcome):this.queue.push(new d(n,e,t));return n},d.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){o.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=h(p,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)m(e,r);else{e.state=c,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(a),e)},u.reject=function(e){var t=new this(a);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=new Array(n),s=0,c=-1,l=new this(a);for(;++c<n;)u(e[c],c);return l;function u(e,a){t.resolve(e).then((function(e){i[a]=e,++s!==n||r||(r=!0,o.resolve(l,i))}),(function(e){r||(r=!0,o.reject(l,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,s=new this(a);for(;++i<n;)c=e[i],t.resolve(c).then((function(e){r||(r=!0,o.resolve(s,e))}),(function(e){r||(r=!0,o.reject(s,e))}));var c;return s}},718:function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(u),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}e.exports=function(e){1!==l.push(e)||r||n()}}).call(this,n(14))},719:function(e,t,n){"use strict";var r=n(456),i=n(51),a=n(722),o=n(460),s=(n(228),n(130));function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},720:function(e,t,n){"use strict";var r=n(458);function i(e){r.call(this,e)}n(51).inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},721:function(e,t,n){"use strict";var r=n(459);function i(e){r.call(this,e)}n(51).inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},722:function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},723:function(e,t,n){"use strict";var r=n(105),i=n(463);function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(51).inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=a},724:function(e,t,n){"use strict";var r=n(51),i=n(105);function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},e.exports=a},725:function(e,t,n){"use strict";var r=n(105);t.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n(726)},726:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(727),a=n(51),o=n(105),s=r?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic="\b\0",a.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new c("Deflate",e)},t.uncompressWorker=function(){return new c("Inflate",{})}},727:function(e,t,n){"use strict";var r={};(0,n(121).assign)(r,n(728),n(731),n(468)),e.exports=r},728:function(e,t,n){"use strict";var r=n(729),i=n(121),a=n(466),o=n(315),s=n(467),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(o[n]);this._dict_set=!0}}function u(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}l.prototype.push=function(e,t){var n,o,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=l,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},729:function(e,t,n){"use strict";var r,i=n(121),a=n(730),o=n(464),s=n(465),c=n(315);function l(e,t){return e.msg=c[t],t}function u(e){return(e<<1)-(e>4?9:0)}function d(e){for(var t=e.length;--t>=0;)e[t]=0}function f(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function p(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,f(e.strm)}function m(e,t){e.pending_buf[e.pending++]=t}function h(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function g(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+258,p=l[a+o-1],m=l[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+o]===m&&l[n+o-1]===p&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<f);if(r=258-(f-a),a=f-258,r>o){if(e.match_start=t,o=r,r>=s)break;p=l[a+o-1],m=l[a+o]}}}while((t=d[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function b(e){var t,n,r,a,c,l,u,d,f,p,m=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-262)){i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);a+=m}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,d=e.strstart+e.lookahead,f=a,p=void 0,(p=l.avail_in)>f&&(p=f),n=0===p?0:(l.avail_in-=p,i.arraySet(u,l.input,l.next_in,p,d),1===l.state.wrap?l.adler=o(l.adler,u,p,d):2===l.state.wrap&&(l.adler=s(l.adler,u,p,d)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function v(e,t){for(var n,r;;){if(e.lookahead<262){if(b(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=g(e,n)),e.match_length>=3)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function y(e,t){for(var n,r,i;;){if(e.lookahead<262){if(b(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=g(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(p(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&p(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function E(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),d(this.dyn_ltree),d(this.dyn_dtree),d(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),d(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),d(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):l(e,-2)}function j(e){var t,n=w(e);return 0===n&&((t=e.state).window_size=2*t.w_size,d(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function S(e,t,n,r,a,o){if(!e)return-2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return l(e,-2);8===r&&(r=9);var c=new O;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=n,j(e)}r=[new E(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(b(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,p(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(p(e,!1),e.strm.avail_out),1)})),new E(4,4,8,4,v),new E(4,5,16,8,v),new E(4,6,32,32,v),new E(4,4,16,16,y),new E(8,16,32,32,y),new E(8,16,128,128,y),new E(8,32,128,256,y),new E(32,128,258,1024,y),new E(32,258,258,4096,y)],t.deflateInit=function(e,t){return S(e,t,8,15,8,0)},t.deflateInit2=S,t.deflateReset=j,t.deflateResetKeep=w,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,o,c;if(!e||!e.state||t>5||t<0)return e?l(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return l(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,m(i,31),m(i,139),m(i,8),i.gzhead?(m(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),m(i,255&i.gzhead.time),m(i,i.gzhead.time>>8&255),m(i,i.gzhead.time>>16&255),m(i,i.gzhead.time>>24&255),m(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),m(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(m(i,255&i.gzhead.extra.length),m(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(m(i,0),m(i,0),m(i,0),m(i,0),m(i,0),m(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),m(i,3),i.status=113);else{var g=8+(i.w_bits-8<<4)<<8;g|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=32),g+=31-g%31,i.status=113,h(i,g),0!==i.strstart&&(h(i,e.adler>>>16),h(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending!==i.pending_buf_size));)m(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,m(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),f(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,m(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(e),i.pending+2<=i.pending_buf_size&&(m(i,255&e.adler),m(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&u(t)<=u(n)&&4!==t)return l(e,-5);if(666===i.status&&0!==e.avail_in)return l(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var v=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(b(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=258){if(b(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(p(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(p(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(d(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(m(i,255&e.adler),m(i,e.adler>>8&255),m(i,e.adler>>16&255),m(i,e.adler>>24&255),m(i,255&e.total_in),m(i,e.total_in>>8&255),m(i,e.total_in>>16&255),m(i,e.total_in>>24&255)):(h(i,e.adler>>>16),h(i,65535&e.adler)),f(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?l(e,-2):(e.state=null,113===t?l(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,a,s,c,l,u,f,p=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(d(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),c=e.avail_in,l=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,b(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,b(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=c,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},730:function(e,t,n){"use strict";var r=n(121);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var u=new Array(60);i(u);var d=new Array(512);i(d);var f=new Array(256);i(f);var p=new Array(29);i(p);var m,h,g,b=new Array(30);function v(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function E(e){return e<256?d[e]:d[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function w(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function j(e,t,n){w(e,n[2*t],n[2*t+1])}function S(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function k(e,t,n){var r,i,a=new Array(16),o=0;for(r=1;r<=15;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=S(a[s]++,s))}}function _(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function T(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function P(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&T(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!T(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function x(e,t,n){var r,i,s,c,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?j(e,i,t):(j(e,(s=f[i])+256+1,t),0!==(c=a[s])&&w(e,i-=p[s],c),j(e,s=E(--r),n),0!==(c=o[s])&&w(e,r-=b[s],c))}while(l<e.last_lit);j(e,256,t)}function R(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)P(e,a,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,P(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,h=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=c[2*c[2*(r=e.heap[n])+1]+1]+1)>m&&(a=m,h++),c[2*r+1]=a,r>l||(e.bl_count[a]++,o=0,r>=p&&(o=f[r-p]),s=c[2*r],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(u[2*r+1]+o)));if(0!==h){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,h-=2}while(h>0);for(a=m;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>l||(c[2*i+1]!==a&&(e.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),r--)}}(e,t),k(a,l,e.bl_count)}function N(e,t,n){var r,i,a=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<c&&i===o||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))}function I(e,t,n){var r,i,a=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<c&&i===o)){if(s<l)do{j(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(j(e,i,e.bl_tree),s--),j(e,16,e.bl_tree),w(e,s-3,2)):s<=10?(j(e,17,e.bl_tree),w(e,s-3,3)):(j(e,18,e.bl_tree),w(e,s-11,7));s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}}i(b);var D=!1;function A(e,t,n,i){w(e,0+(i?1:0),3),function(e,t,n,i){C(e),i&&(O(e,n),O(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){D||(!function(){var e,t,n,r,i,c=new Array(16);for(n=0,r=0;r<28;r++)for(p[r]=n,e=0;e<1<<a[r];e++)f[n++]=r;for(f[n-1]=r,i=0,r=0;r<16;r++)for(b[r]=i,e=0;e<1<<o[r];e++)d[i++]=r;for(i>>=7;r<30;r++)for(b[r]=i<<7,e=0;e<1<<o[r]-7;e++)d[256+i++]=r;for(t=0;t<=15;t++)c[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,c[8]++;for(;e<=255;)l[2*e+1]=9,e++,c[9]++;for(;e<=279;)l[2*e+1]=7,e++,c[7]++;for(;e<=287;)l[2*e+1]=8,e++,c[8]++;for(k(l,287,c),e=0;e<30;e++)u[2*e+1]=5,u[2*e]=S(e,5);m=new v(l,a,257,286,15),h=new v(u,o,0,30,15),g=new v(new Array(0),s,0,19,7)}(),D=!0),e.l_desc=new y(e.dyn_ltree,m),e.d_desc=new y(e.dyn_dtree,h),e.bl_desc=new y(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,_(e)},t._tr_stored_block=A,t._tr_flush_block=function(e,t,n,r){var i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),o=function(e){var t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?A(e,t,n,r):4===e.strategy||a===i?(w(e,2+(r?1:0),3),x(e,l,u)):(w(e,4+(r?1:0),3),function(e,t,n,r){var i;for(w(e,t-257,5),w(e,n-1,5),w(e,r-4,4),i=0;i<r;i++)w(e,e.bl_tree[2*c[i]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),x(e,e.dyn_ltree,e.dyn_dtree)),_(e),r&&C(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(f[n]+256+1)]++,e.dyn_dtree[2*E(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){w(e,2,3),j(e,256,l),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},731:function(e,t,n){"use strict";var r=n(732),i=n(121),a=n(466),o=n(468),s=n(315),c=n(467),l=n(735),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);if(this.header=new l,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(s[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,c,l,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,h=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(n=r.inflateSetDictionary(this.strm,m)),n===o.Z_BUF_ERROR&&!0===h&&(n=o.Z_OK,h=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(f.output,f.next_out),l=f.next_out-c,d=a.buf2string(f.output,c),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,c,l,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(h=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},732:function(e,t,n){"use strict";var r=n(121),i=n(464),a=n(465),o=n(733),s=n(734);function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):-2}function f(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,d(e))):-2}function p(e,t){var n,r;return e?(r=new l,e.state=r,r.window=null,0!==(n=f(e,t))&&(e.state=null),n):-2}var m,h,g=!0;function b(e){if(g){var t;for(m=new r.Buf32(512),h=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,h,0,e.work,{bits:5}),g=!1}e.lencode=m,e.lenbits=9,e.distcode=h,e.distbits=5}function v(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=d,t.inflateReset2=f,t.inflateResetKeep=u,t.inflateInit=function(e){return p(e,15)},t.inflateInit2=p,t.inflate=function(e,t){var n,l,u,d,f,p,m,h,g,y,E,O,w,j,S,k,_,C,T,P,x,R,N,I,D=0,A=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,h=n.hold,g=n.bits,y=p,E=m,R=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(2&n.wrap&&35615===h){n.check=0,A[0]=255&h,A[1]=h>>>8&255,n.check=a(n.check,A,2,0),h=0,g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",n.mode=30;break}if(g-=4,x=8+(15&(h>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,e.adler=n.check=1,n.mode=512&h?10:12,h=0,g=0;break;case 2:for(;g<16;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(n.flags=h,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(A[0]=255&h,A[1]=h>>>8&255,n.check=a(n.check,A,2,0)),h=0,g=0,n.mode=3;case 3:for(;g<32;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.head&&(n.head.time=h),512&n.flags&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,n.check=a(n.check,A,4,0)),h=0,g=0,n.mode=4;case 4:for(;g<16;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(A[0]=255&h,A[1]=h>>>8&255,n.check=a(n.check,A,2,0)),h=0,g=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(A[0]=255&h,A[1]=h>>>8&255,n.check=a(n.check,A,2,0)),h=0,g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((O=n.length)>p&&(O=p),O&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,O,x)),512&n.flags&&(n.check=a(n.check,l,O,d)),p-=O,d+=O,n.length-=O),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;O=0;do{x=l[d+O++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&O<p);if(512&n.flags&&(n.check=a(n.check,l,O,d)),p-=O,d+=O,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;O=0;do{x=l[d+O++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&O<p);if(512&n.flags&&(n.check=a(n.check,l,O,d)),p-=O,d+=O,x)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}h=0,g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}e.adler=n.check=c(h),h=0,g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=h,n.bits=g,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){h>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}switch(n.last=1&h,g-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6===t){h>>>=2,g-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}h>>>=2,g-=2;break;case 14:for(h>>>=7&g,g-=7&g;g<32;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&h,h=0,g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(O=n.length){if(O>p&&(O=p),O>m&&(O=m),0===O)break e;r.arraySet(u,l,d,O,f),p-=O,d+=O,m-=O,f+=O,n.length-=O;break}n.mode=12;break;case 17:for(;g<14;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(n.nlen=257+(31&h),h>>>=5,g-=5,n.ndist=1+(31&h),h>>>=5,g-=5,n.ncode=4+(15&h),h>>>=4,g-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.lens[M[n.have++]]=7&h,h>>>=3,g-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},R=s(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,R){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(D=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,_=65535&D,!((S=D>>>24)<=g);){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(_<16)h>>>=S,g-=S,n.lens[n.have++]=_;else{if(16===_){for(I=S+2;g<I;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(h>>>=S,g-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],O=3+(3&h),h>>>=2,g-=2}else if(17===_){for(I=S+3;g<I;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}g-=S,x=0,O=3+(7&(h>>>=S)),h>>>=3,g-=3}else{for(I=S+7;g<I;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}g-=S,x=0,O=11+(127&(h>>>=S)),h>>>=7,g-=7}if(n.have+O>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},R=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,R){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},R=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,R){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(p>=6&&m>=258){e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=h,n.bits=g,o(e,E),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,h=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(D=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,_=65535&D,!((S=D>>>24)<=g);){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(k&&0==(240&k)){for(C=S,T=k,P=_;k=(D=n.lencode[P+((h&(1<<C+T)-1)>>C)])>>>16&255,_=65535&D,!(C+(S=D>>>24)<=g);){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}h>>>=C,g-=C,n.back+=C}if(h>>>=S,g-=S,n.back+=S,n.length=_,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(I=n.extra;g<I;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(D=n.distcode[h&(1<<n.distbits)-1])>>>16&255,_=65535&D,!((S=D>>>24)<=g);){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(0==(240&k)){for(C=S,T=k,P=_;k=(D=n.distcode[P+((h&(1<<C+T)-1)>>C)])>>>16&255,_=65535&D,!(C+(S=D>>>24)<=g);){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}h>>>=C,g-=C,n.back+=C}if(h>>>=S,g-=S,n.back+=S,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(I=n.extra;g<I;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(O=E-m,n.offset>O){if((O=n.offset-O)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}O>n.wnext?(O-=n.wnext,w=n.wsize-O):w=n.wnext-O,O>n.length&&(O=n.length),j=n.window}else j=u,w=f-n.offset,O=n.length;O>m&&(O=m),m-=O,n.length-=O;do{u[f++]=j[w++]}while(--O);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;u[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===p)break e;p--,h|=l[d++]<<g,g+=8}if(E-=m,e.total_out+=E,n.total+=E,E&&(e.adler=n.check=n.flags?a(n.check,u,E,f-E):i(n.check,u,E,f-E)),E=m,(n.flags?h:c(h))!==n.check){e.msg="incorrect data check",n.mode=30;break}h=0,g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===p)break e;p--,h+=l[d++]<<g,g+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}h=0,g=0}n.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=h,n.bits=g,(n.wsize||E!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&v(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(y-=e.avail_in,E-=e.avail_out,e.total_in+=y,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?a(n.check,u,E,e.next_out-E):i(n.check,u,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===y&&0===E||4===t)&&0===R&&(R=-5),R)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:v(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},733:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,b,v,y,E,O,w,j,S,k,_;n=e.state,r=e.next_in,k=e.input,i=r+(e.avail_in-5),a=e.next_out,_=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,m=n.bits,h=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{m<15&&(p+=k[r++]<<m,m+=8,p+=k[r++]<<m,m+=8),y=h[p&b];t:for(;;){if(p>>>=E=y>>>24,m-=E,0===(E=y>>>16&255))_[a++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=h[(65535&y)+(p&(1<<E)-1)];continue t}if(32&E){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&y,(E&=15)&&(m<E&&(p+=k[r++]<<m,m+=8),O+=p&(1<<E)-1,p>>>=E,m-=E),m<15&&(p+=k[r++]<<m,m+=8,p+=k[r++]<<m,m+=8),y=g[p&v];n:for(;;){if(p>>>=E=y>>>24,m-=E,!(16&(E=y>>>16&255))){if(0==(64&E)){y=g[(65535&y)+(p&(1<<E)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&y,m<(E&=15)&&(p+=k[r++]<<m,(m+=8)<E&&(p+=k[r++]<<m,m+=8)),(w+=p&(1<<E)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=E,m-=E,w>(E=a-o)){if((E=w-E)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(j=0,S=f,0===d){if(j+=l-E,E<O){O-=E;do{_[a++]=f[j++]}while(--E);j=a-w,S=_}}else if(d<E){if(j+=l+d-E,(E-=d)<O){O-=E;do{_[a++]=f[j++]}while(--E);if(j=0,d<O){O-=E=d;do{_[a++]=f[j++]}while(--E);j=a-w,S=_}}}else if(j+=d-E,E<O){O-=E;do{_[a++]=f[j++]}while(--E);j=a-w,S=_}for(;O>2;)_[a++]=S[j++],_[a++]=S[j++],_[a++]=S[j++],O-=3;O&&(_[a++]=S[j++],O>1&&(_[a++]=S[j++]))}else{j=a-w;do{_[a++]=_[j++],_[a++]=_[j++],_[a++]=_[j++],O-=3}while(O>2);O&&(_[a++]=_[j++],O>1&&(_[a++]=_[j++]))}break}}break}}while(r<i&&a<s);r-=O=m>>3,p&=(1<<(m-=O<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=m}},734:function(e,t,n){"use strict";var r=n(121),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,l,u,d,f){var p,m,h,g,b,v,y,E,O,w=f.bits,j=0,S=0,k=0,_=0,C=0,T=0,P=0,x=0,R=0,N=0,I=null,D=0,A=new r.Buf16(16),M=new r.Buf16(16),F=null,q=0;for(j=0;j<=15;j++)A[j]=0;for(S=0;S<c;S++)A[t[n+S]]++;for(C=w,_=15;_>=1&&0===A[_];_--);if(C>_&&(C=_),0===_)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(k=1;k<_&&0===A[k];k++);for(C<k&&(C=k),x=1,j=1;j<=15;j++)if(x<<=1,(x-=A[j])<0)return-1;if(x>0&&(0===e||1!==_))return-1;for(M[1]=0,j=1;j<15;j++)M[j+1]=M[j]+A[j];for(S=0;S<c;S++)0!==t[n+S]&&(d[M[t[n+S]]++]=S);if(0===e?(I=F=d,v=19):1===e?(I=i,D-=257,F=a,q-=257,v=256):(I=o,F=s,v=-1),N=0,S=0,j=k,b=u,T=C,P=0,h=-1,g=(R=1<<C)-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){y=j-P,d[S]<v?(E=0,O=d[S]):d[S]>v?(E=F[q+d[S]],O=I[D+d[S]]):(E=96,O=0),p=1<<j-P,k=m=1<<T;do{l[b+(N>>P)+(m-=p)]=y<<24|E<<16|O|0}while(0!==m);for(p=1<<j-1;N&p;)p>>=1;if(0!==p?(N&=p-1,N+=p):N=0,S++,0==--A[j]){if(j===_)break;j=t[n+d[S]]}if(j>C&&(N&g)!==h){for(0===P&&(P=C),b+=k,x=1<<(T=j-P);T+P<_&&!((x-=A[T+P])<=0);)T++,x<<=1;if(R+=1<<T,1===e&&R>852||2===e&&R>592)return 1;l[h=N&g]=C<<24|T<<16|b-u|0}}return 0!==N&&(l[b+N]=j-P<<24|64<<16|0),f.bits=C,0}},735:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},736:function(e,t,n){"use strict";var r=n(737),i=n(462),a=n(228),o=n(461),s=n(105),c=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};c.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&i&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)c.prototype[l[d]]=u;e.exports=c},737:function(e,t,n){"use strict";(function(t){var r=n(51),i=n(738),a=n(105),o=n(454),s=n(130),c=n(314),l=null;if(s.nodestream)try{l=n(739)}catch(e){}function u(e,n){return new c.Promise((function(i,a){var s=[],c=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){s.push(e),n&&n(t)})).on("error",(function(e){s=[],a(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(l,function(e,n){var r,i=0,a=null,o=0;for(r=0;r<n.length;r++)o+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(o),r=0;r<n.length;r++)a.set(n[r],i),i+=n[r].length;return a;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(c,s),u);i(e)}catch(e){a(e)}s=[]})).resume()}))}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=d}).call(this,n(131).Buffer)},738:function(e,t,n){"use strict";var r=n(105),i=n(51);function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},e.exports=a},739:function(e,t,n){"use strict";var r=n(448).Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}n(51).inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i}}]);